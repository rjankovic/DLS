<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.4" DspName="Microsoft.Data.Tools.Schema.Sql.SqlAzureV12DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="150" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="CD.DLS.DB.dll" />
			<Metadata Name="FileName" Value="C:\PROJECTS\DESCENT\MAIN\CD.FRAMEWORK.DB\OBJ\DEBUG\CD.DLS.DB.DLL" />
			<Metadata Name="AssemblyName" Value="CD.DLS.DB" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Projects\Descent\Main\CD.Framework.DB\obj\Debug\CD.DLS.DB.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="SQL_Latin1_General_CP1_CI_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="RecoveryMode" Value="1" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="ServiceBrokerOption" Value="1" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="35" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="36" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="37" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="38" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[N'Native']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsMode]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="39" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="40" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Search].[FulltextSearch].[SearchPriority]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="41" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(GETDATE())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[CreatedTime]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="42" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Annotate].[LinkTypes].[Deleted]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="43" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="44" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="45" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[CreatedBy]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="46" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[UpdatedBy]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="47" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="48" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="49" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="50" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="51" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="52" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="53" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="54" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="55" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="56" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="57" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="58" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Learning].[OlapFields].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="59" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="60" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Learning].[OlapFields].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="61" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapQueryFields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Learning].[OlapFields].[OlapFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="62" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageDbId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="63" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="64" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldValueId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="65" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewFieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="66" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="67" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="68" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="69" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[TypeChildTypes].[TypeChildTypesId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Search].[TypeChildTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="70" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[RootElements].[RootElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Search].[RootElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="71" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Stg].[Extracts].[ExtractId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Stg].[Extracts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="72" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[HighLevelTypeDescendants].[HighLevelTypeDescendantId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="73" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[ProcedureExecutionQueue].[ProcedureExecutionQueueId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[ProcedureExecutionQueue]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="74" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="75" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="76" />
		</Element>
		<Element Type="SqlSchema" Name="[Adm]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[BroadcastMessages]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[BroadcastMessageId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[BroadcastMessageType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[Active]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[Content]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[BroadcastMessages].[CreatedTime]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="77" />
						<AttachedAnnotation Disambiguator="42" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="78" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Adm].[DF_Adm_Log_CreatedDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[GETDATE()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[Log].[CreatedDate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="79" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Adm].[DF_Adm_RequestMessages_Received]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="80" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Adm].[DF_Adm_UserActionLog_CreatedDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[GETDATE()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserActionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[UserActionLog].[CreatedDate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="81" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Adm].[DF_RequestsWaitFor_Active]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="82" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[Adm].[f_EscapeForLike]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[f_EscapeForLike].[@val]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN REPLACE(REPLACE(REPLACE(REPLACE(@val, '[', '[[]'), ']', '[]]'), '_', '[_]'), '%', '[%]')
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="203" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_EscapeForLike]&#xD;&#xA;(&#xD;&#xA;&#x9;@val nvarchar(MAX)&#xD;&#xA;)&#xD;&#xA;RETURNS nvarchar(MAX)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_EscapeForLike].[@val]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetCreationForRequest]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetCreationForRequest].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[customerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetCreationForRequest].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[customerCode]
	  ,[RequestFromUserId]
  FROM [Adm].[RequestMessages]
  WHERE RequestId = @requestId AND MessageType = N'RequestCreated'
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="674" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetCreationForRequest]&#xD;&#xA;(&#xD;&#xA;@requestId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetCreationForRequest].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetMessageById]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetMessageById].[@messageid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[CustomerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageById].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[CustomerCode]
	  ,RequestFromUserId
  FROM [Adm].[RequestMessages]
  WHERE MessageId = @messageid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="629" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetMessageById]&#xD;&#xA;(&#xD;&#xA;@messageid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetMessageById].[@messageid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetMessageByRequestAndType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetMessageByRequestAndType].[@requestid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetMessageByRequestAndType].[@messagetype]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[CustomerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMessageByRequestAndType].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[CustomerCode]
	  ,RequestFromUserId
  FROM [Adm].[RequestMessages]
  WHERE RequestId = @requestid AND MessageType = @messagetype
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="700" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetMessageByRequestAndType]&#xD;&#xA;(&#xD;&#xA;@requestid UNIQUEIDENTIFIER,&#xD;&#xA;@messagetype NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetMessageByRequestAndType].[@requestid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetMessageByRequestAndType].[@messagetype]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetMssqlAgentProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[MssqlAgentProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[JobName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetMssqlAgentProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlAgentProjectComponents].[MssqlAgentProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlAgentProjectComponents].[MssqlAgentProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlAgentProjectComponents].[ServerName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlAgentProjectComponents].[ServerName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlAgentProjectComponents].[JobName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlAgentProjectComponents].[JobName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
	SELECT
	[MssqlAgentProjectComponentId]
    ,[ServerName]
	,[JobName]
	,[ProjectConfig_ProjectConfigId] 
	FROM adm.MssqlAgentProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="333" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetMssqlAgentProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetMssqlAgentProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetMssqlDbProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[MssqlDbProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetMssqlDbProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlDbProjectComponents].[MssqlDbProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlDbProjectComponents].[MssqlDbProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlDbProjectComponents].[ServerName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlDbProjectComponents].[ServerName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlDbProjectComponents].[DbName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlDbProjectComponents].[DbName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetMssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MssqlDbProjectComponentId]
      ,[ServerName]
      ,[DbName]
      ,[ProjectConfig_ProjectConfigId]
	  FROM adm.MssqlDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="333" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetMssqlDbProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetMssqlDbProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetPotentialCacheMatches]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessageHistory]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[InitMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetPotentialCacheMatches].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValidUntil]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPotentialCacheMatches].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT m.[MessageId]
      ,m.[RequestId]
      ,m.[Content]
      ,m.[RequestForCoreType]
      ,m.[RequestProcessingMethod]
      ,m.[MessageFromId]
      ,m.[MessageOriginName]
      ,m.[MessageOriginId]
      ,m.[MessageFromName]
      ,m.[MessageToObjectId]
      ,m.[MessageToProjectId]
      ,m.[MessageToObjectName]
      ,m.[MessageType]
      ,m.[CreatedDateTime]
      --,m.[TypeName]
      ,m.[Project_ProjectConfigId]
  FROM [Adm].[RequestMessageHistory] h
  INNER JOIN [Adm].RequestMessages m ON h.InitMessage_MessageId = m.MessageId
  WHERE m.MessageToProjectId = @projectconfigid AND h.CacheValid = 1 AND h.CacheValidUntil >= GETDATE()
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="819" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetPotentialCacheMatches]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;@coretype NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetPotentialCacheMatches].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetPotentialCacheMatches].[@coretype]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetPowerBiProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[PowerBiProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[RedirectUri]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ApplicationID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[WorkspaceID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ReportServerURL]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ReportServerFolder]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetPowerBiProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[PowerBiProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[PowerBiProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[RedirectUri]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[RedirectUri]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[ApplicationID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[ApplicationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[WorkspaceID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[WorkspaceID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[ReportServerURL]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[ReportServerURL]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[ReportServerFolder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[ReportServerFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetPowerBiProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
	SELECT
	[PowerBiProjectComponentId]
    ,[RedirectUri]
	,[ApplicationID]
	,[WorkspaceID]
	,[ReportServerURL]
	,[ReportServerFolder]
	,[ProjectConfig_ProjectConfigId] 
	FROM adm.PowerBiProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="393" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetPowerBiProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetPowerBiProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetProgressForRequest]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetProgressForRequest].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[customerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProgressForRequest].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[customerCode]
	  ,[RequestFromUserId]
  FROM [Adm].[RequestMessages]
  WHERE RequestId = @requestId AND MessageType = N'Progress'
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="668" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetProgressForRequest]&#xD;&#xA;(&#xD;&#xA;@requestId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetProgressForRequest].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetProjectConfigName]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetProjectConfigName].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetProjectConfigName].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[ProjectConfigs].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [Name] FROM Adm.ProjectConfigs WHERE ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="198" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetProjectConfigName]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetProjectConfigName].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetRequestMessageAttachments]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[AttachmentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[Uri]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments].[OriginalRequestMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetRequestMessageAttachments].[@messageid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[AttachmentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[AttachmentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[Uri]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[Uri]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRequestMessageAttachments].[OriginalRequestMessage_MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[OriginalRequestMessage_MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[(
SELECT 		[AttachmentId]
           ,[Type]
           ,[Name]
           ,[Uri]
           ,[MessageId]
           ,[OriginalRequestMessage_MessageId]
FROM [Adm].[RequestMessageAttachments] WHERE @messageid = MessageId    
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="349" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetRequestMessageAttachments](&#xD;&#xA;&#x9;@messageid UNIQUEIDENTIFIER&#xD;&#xA;&#x9;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetRequestMessageAttachments].[@messageid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetResponseForCachedMessage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessageHistory]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[ResponseMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[InitMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetResponseForCachedMessage].[@initMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValidUntil]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[CustomerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetResponseForCachedMessage].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT m.[MessageId]
      ,m.[RequestId]
      ,m.[Content]
      ,m.[RequestForCoreType]
      ,m.[RequestProcessingMethod]
      ,m.[MessageFromId]
      ,m.[MessageOriginName]
      ,m.[MessageOriginId]
      ,m.[MessageFromName]
      ,m.[MessageToObjectId]
      ,m.[MessageToProjectId]
      ,m.[MessageToObjectName]
      ,m.[MessageType]
      ,m.[CreatedDateTime]
      --,m.[TypeName]
      ,m.[Project_ProjectConfigId]
	  ,m.CustomerCode
	  ,m.RequestFromUserId
  FROM [Adm].[RequestMessageHistory] h
  INNER JOIN [Adm].RequestMessages m ON h.ResponseMessage_MessageId = m.MessageId
  WHERE h.InitMessage_MessageId = @initMessageId AND h.CacheValid = 1 AND h.CacheValidUntil >= GETDATE()
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="845" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetResponseForCachedMessage]&#xD;&#xA;(&#xD;&#xA;@initMessageId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetResponseForCachedMessage].[@initMessageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetRespoonseForRequest]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetRespoonseForRequest].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[RequestForCoreType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[RequestProcessingMethod]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageOriginName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageOriginId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageFromName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageFromName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageToObjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageToProjectId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageToObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[MessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[MessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[Project_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[customerCode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CustomerCode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetRespoonseForRequest].[RequestFromUserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[customerCode]
	  ,[RequestFromUserId]
  FROM [Adm].[RequestMessages]
  WHERE RequestId = @requestId AND MessageType NOT IN (N'RequestAcknowledged', N'RequestCreated', /*N'Progress',*/ N'DbOperationFinished')
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="747" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetRespoonseForRequest]&#xD;&#xA;(&#xD;&#xA;@requestId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetRespoonseForRequest].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetSsasDbProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[SsaslDbProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[SSASType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetSsasDbProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsasDbProjectComponents].[SsaslDbProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[SsaslDbProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsasDbProjectComponents].[ServerName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[ServerName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsasDbProjectComponents].[DbName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[DbName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsasDbProjectComponents].[SSASType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[SSASType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsasDbProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [SsaslDbProjectComponentId]
      ,[ServerName]
      ,[DbName]
	  ,[SSASType]
      ,[ProjectConfig_ProjectConfigId]
FROM adm.SsasDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="344" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetSsasDbProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetSsasDbProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetSsisProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsisProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[SsisProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[FolderName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetSsisProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsisProjectComponents].[SsisProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[SsisProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsisProjectComponents].[ServerName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[ServerName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsisProjectComponents].[FolderName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[FolderName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsisProjectComponents].[ProjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[ProjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsisProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [SsisProjectComponentId]
      ,[ServerName]
      ,[FolderName]
      ,[ProjectName]
      ,[ProjectConfig_ProjectConfigId]
FROM adm.SsisProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="347" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetSsisProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetSsisProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetSsrsProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsProjectComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsMode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsExecutionServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[FolderPath]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SharepointBaseUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SharepointFolder]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetSsrsProjectComponents].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SsrsProjectComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SsrsProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SsrsMode]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SsrsMode]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[ServerName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[ServerName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SsrsServiceUrl]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SsrsServiceUrl]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SsrsExecutionServiceUrl]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SsrsExecutionServiceUrl]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[FolderPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[FolderPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SharepointBaseUrl]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SharepointBaseUrl]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[SharepointFolder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SharepointFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetSsrsProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [SsrsProjectComponentId]
		,[SsrsMode]
      ,[ServerName]
      ,[SsrsServiceUrl]
      ,[SsrsExecutionServiceUrl]
      ,[FolderPath]
	  ,[SharepointBaseUrl]
	  ,[SharepointFolder]
      ,[ProjectConfig_ProjectConfigId]
FROM adm.SsrsProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="448" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetSsrsProjectComponents]&#xD;&#xA;(&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetSsrsProjectComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Adm].[f_GetUserDataByIdentity]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[Identity]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_GetUserDataByIdentity].[@userIdentity]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetUserDataByIdentity].[UserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[Users].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetUserDataByIdentity].[Identity]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[Users].[Identity]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[f_GetUserDataByIdentity].[DisplayName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[Users].[DisplayName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [UserId],
	   [Identity],
	   [DisplayName]
  FROM [Adm].[Users]
  WHERE [Identity] = @userIdentity
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="226" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_GetUserDataByIdentity]&#xD;&#xA;(&#xD;&#xA;@userIdentity NVARCHAR(300)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_GetUserDataByIdentity].[@userIdentity]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[Adm].[f_SimpleJsonValue]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue].[@json]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[item]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[rwn]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[item]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[rwn]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[item]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[rwn]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable].[2]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable].[1]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue].[@key]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable].[key_item]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_splitstring].[rwn]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable].[1]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[f_SimpleJsonValue].[PV1].[PivotTable].[2]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN

IF LEN(@json) < 3
RETURN NULL

DECLARE @trim NVARCHAR(MAX) = REVERSE(LEFT(REVERSE(LEFT(@json, LEN(@json)-1)), LEN(@json)-3))
DECLARE @res NVARCHAR(MAX)

SELECT @res /*key_item ItemNumber, [1] [Key],*/  = [2] -- [Value]
FROM  
(
SELECT spl.rwn key_item, pt.item, pt.rwn FROM adm.f_splitstring(@trim, N',"') spl
OUTER APPLY adm.f_splitstring(spl.item, N'":') pt
) AS src
PIVOT  
(  
MAX(item)  
FOR rwn IN ([1], [2])  
) AS PivotTable  
WHERE [1] = @key

RETURN (REPLACE(@res,'"',''))

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="637" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_SimpleJsonValue]&#xD;&#xA;(&#xD;&#xA;&#x9;@json nvarchar(MAX),&#xD;&#xA;&#x9;@key nvarchar(MAX)&#xD;&#xA;)&#xD;&#xA;RETURNS nvarchar(MAX)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_SimpleJsonValue].[@json]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_SimpleJsonValue].[@key]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[adm].[f_SplitCamelCase]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[adm].[f_SplitCamelCase].[@Temp]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
Begin

    Declare @KeepValues as varchar(50)
    Set @KeepValues = '%[^ ][A-Z][a-z]%'
    While PatIndex(@KeepValues collate Latin1_General_Bin, @Temp) > 0
        Set @Temp = Stuff(@Temp, PatIndex(@KeepValues collate Latin1_General_Bin, @Temp) + 1, 0, ' ')

    Return @Temp
End]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="378" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [adm].[f_SplitCamelCase](@Temp NVARCHAR(MAX))&#xD;&#xA;Returns NVARCHAR(MAX)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[adm].[f_SplitCamelCase].[@Temp]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[Adm].[f_splitstring]">
			<Property Name="ReturnTableVariable" Value="@List" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[@vDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[@vInputList]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[f_splitstring].[item]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[f_splitstring].[rwn]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
begin

 declare @Item varchar(8000);
 declare @i int = 1;

 while CHARINDEX(@vDelimiter,@vInputList,0)<>0
   begin
    Select
     @Item = rtrim(ltrim(substring(@vInputList,1,CHARINDEX(@vDelimiter,@vInputList,0)-1))),
	 @vInputList = ltrim(rtrim(substring(@vInputList,CHARINDEX(@vDelimiter,@vInputList,0)+Len(@vDelimiter),Len(@vInputList))));

	 if len(@Item)>0
	   insert into @List select @Item,@i;
     
	 set @i = @i + 1;

   end

 if len(@vInputList)>0
  insert into @List select @vInputList,@i;

 return;
 
end]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="701" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Adm].[f_splitstring]&#xD;&#xA;(&#x9;&#xD;&#xA;&#x9;@vInputList nvarchar(max),&#xD;&#xA;&#x9;@vDelimiter nvarchar(10) = ';'&#xD;&#xA;)&#xD;&#xA;RETURNS @List TABLE (item varchar(max),rwn int) &#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_splitstring].[@vInputList]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[f_splitstring].[@vDelimiter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[';']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_BroadcastMessages_Adm_ProjectConfigs_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="77" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_MssqlAgentProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="83" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_MssqlDbProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="84" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_PowerBiProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="85" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_RequestMessages_Adm_ProjectConfigs_Project_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="86" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_RolePermissions_Permission]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="87" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_SsasDbProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="88" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_SsisProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsisProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="89" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_SsrsProjectComponents_Adm_ProjectConfigs_ProjectConfig_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="90" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_UserActionLog_UserId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[UserActionLog].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserActionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="91" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_UserPermissions_Role]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="92" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_UserRoles_Role]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="93" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Adm].[FK_Adm_UserRoles_User]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="94" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[GlobalConfig]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[GlobalConfig].[GlobalConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[GlobalConfig].[Key]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[GlobalConfig].[Value]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="95" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Adm].[GlobalConfig].[IX_Adm_GlobalConfig_Project_Key]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[GlobalConfig].[Key]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Adm].[GlobalConfig]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[Log]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Log].[LogId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Log].[CreatedDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="79" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Log].[MessageType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Log].[Message]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Log].[StackTrace]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="96" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[MssqlAgentProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlAgentProjectComponents].[MssqlAgentProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlAgentProjectComponents].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlAgentProjectComponents].[JobName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="97" />
			<AttachedAnnotation Disambiguator="83" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[MssqlDbProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlDbProjectComponents].[MssqlDbProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlDbProjectComponents].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlDbProjectComponents].[DbName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="98" />
			<AttachedAnnotation Disambiguator="84" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[Permissions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Permissions].[PermissionId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Permissions].[PermissionName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Permissions].[PermissionScope]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="99" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_BroadcastMessages]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="78" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_GlobalConfig]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[GlobalConfig].[GlobalConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[GlobalConfig]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="95" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_Log]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Log].[LogId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="96" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_MessageHistory]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestMessageHistory].[MessageHistoryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestMessageHistory]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="100" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_MssqlDbProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[MssqlDbProjectComponents].[MssqlDbProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="98" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_Permissions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Permissions].[PermissionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="99" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_ProjectConfigs]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="101" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_RequestsWaitFor]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestsWaitFor].[RequestsWiaitForItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="102" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_RolePermissions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RolePermissions].[RolePermissionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="103" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_Roles]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Roles].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="104" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_SsisProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[SsisProjectComponents].[SsisProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsisProjectComponents]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="105" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_UserActionLog]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[UserActionLog].[UserActionLogId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserActionLog]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="106" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_UserRoles]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[UserRoles].[UserRoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="107" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_Adm_Users]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Users].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="108" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_dbo.MessageAttachments]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestMessageAttachments].[AttachmentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[RequestMessageAttachments]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="109" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_dbo.MssqlAgentProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[MssqlAgentProjectComponents].[MssqlAgentProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="97" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_dbo.PowerBiProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[PowerBiProjectComponents].[PowerBiProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="110" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_dbo.SsasDbProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[SsasDbProjectComponents].[SsaslDbProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="111" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Adm].[PK_dbo.SsrsProjectComponents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[SsrsProjectComponents].[SsrsProjectComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="112" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[PowerBiProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[PowerBiProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[RedirectUri]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[ApplicationID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[WorkspaceID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[ReportServerURL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[ReportServerFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="110" />
			<AttachedAnnotation Disambiguator="85" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[ProcedureExecutionQueue]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProcedureExecutionQueue].[ProcedureExecutionQueueId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="74" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProcedureExecutionQueue].[ProcedureName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProcedureExecutionQueue].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProcedureExecutionQueue].[RequestId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[ProjectConfigs]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProjectConfigs].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[ProjectConfigs].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="101" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[RequestMessageAttachments]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[AttachmentId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[Type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[Uri]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="800" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[MessageId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageAttachments].[OriginalRequestMessage_MessageId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="109" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[RequestMessageHistory]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[MessageHistoryId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[RequestId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[CacheValid]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[CacheValidUntil]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[InitMessage_MessageId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessageHistory].[ResponseMessage_MessageId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="100" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[RequestMessages]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageDbId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="63" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[RequestId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[Content]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[RequestForCoreType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[RequestProcessingMethod]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageFromId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageOriginName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageOriginId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageFromName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageToObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageToProjectId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageToObjectName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[MessageType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[CreatedDateTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[Project_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[Received]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="80" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[CustomerCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestMessages].[RequestFromUserId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="86" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[RequestsWaitFor]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestsWaitFor].[RequestsWiaitForItemId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestsWaitFor].[RequestId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestsWaitFor].[WaitForRequestId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RequestsWaitFor].[Active]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="82" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="102" />
		</Element>
		<Element Type="SqlIndex" Name="[Adm].[RequestsWaitFor].[IX_Adm_RequestsWaitFor_RequestId]">
			<Property Name="FilterPredicate">
				<Value><![CDATA[[Active] = 1]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
			</Relationship>
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Adm].[RequestsWaitFor].[IX_Adm_RequestsWaitFor_WaitForRequestId]">
			<Property Name="FilterPredicate">
				<Value><![CDATA[[Active] = 1]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
			</Relationship>
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[RolePermissions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RolePermissions].[RolePermissionId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RolePermissions].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[RolePermissions].[PermissionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="103" />
			<AttachedAnnotation Disambiguator="87" />
			<AttachedAnnotation Disambiguator="92" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[Roles]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Roles].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Roles].[RoleName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Roles].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="104" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="113" />
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddRole]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	INSERT INTO [Adm].[Roles] (RoleName,ProjectConfigId)
	VALUES (@roleName, @projectConfigId)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRole].[@roleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRole].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRole].[@roleName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRole].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="196" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddRole]&#xD;&#xA;&#x9;@roleName NVARCHAR(MAX),&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddRoleMember]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [Adm].[UserRoles]
(UserId, RoleId)
VALUES (@userId, @roleId)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRoleMember].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRoleMember].[@roleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRoleMember].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRoleMember].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="152" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddRoleMember]&#xD;&#xA;&#x9;@roleId INT,&#xD;&#xA;&#x9;@userId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddRolePermission]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [Adm].[RolePermissions]
(RoleId, PermissionId)
VALUES
(@roleId, @permissionId)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRolePermission].[@roleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddRolePermission].[@permissionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRolePermission].[@permissionId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddRolePermission].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="181" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddRolePermission]&#xD;&#xA;&#x9;@permissionId INT,&#xD;&#xA;&#x9;@roleId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddUser]">
			<Property Name="BodyScript">
				<Value><![CDATA[
IF NOT EXISTS(SELECT TOP 1 1 FROM adm.Users WHERE [Identity] = @userIdentity)
BEGIN
	INSERT INTO [Adm].[Users] ([Identity]) VALUES(@userIdentity);
END
UPDATE adm.Users SET DisplayName = @displayName WHERE [Identity] = @userIdentity

INSERT INTO adm.UserRoles (UserId, RoleId)
SELECT u.UserId, r.RoleId FROM 
adm.Users u
CROSS JOIN adm.Roles r
LEFT JOIN adm.UserRoles ur ON u.UserId = ur.UserId AND r.RoleId = ur.RoleId
WHERE u.[Identity] = @userIdentity AND r.RoleName = N'CustomerUser' AND ur.UserRoleId IS NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[Identity]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUser].[@userIdentity]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[Identity]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUser].[@displayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[Identity]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserRoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUser].[@userIdentity]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUser].[@displayName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="624" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddUser]&#xD;&#xA;&#x9;@userIdentity NVARCHAR(300),&#xD;&#xA;&#x9;@displayName NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddUserRoles]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	INSERT INTO  [Adm].[UserRoles] (UserId, RoleId)
	VALUES (@userId, @roleId)
RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUserRoles].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUserRoles].[@roleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUserRoles].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUserRoles].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="164" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddUserRoles]&#xD;&#xA;&#x9;@roleId INT,&#xD;&#xA;    @userId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_AddUserToRole]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO adm.UserRoles (UserId, RoleId)
SELECT @userId, r.RoleId
FROM Adm.Roles r
LEFT JOIN adm.UserRoles ex ON ex.RoleId = r.RoleId AND ex.UserId = @userId
WHERE ISNULL(r.ProjectConfigId, N'00000000-0000-0000-0000-000000000000') = ISNULL(@projectconfigid, N'00000000-0000-0000-0000-000000000000')
AND ex.UserRoleId IS NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUserToRole].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_AddUserToRole].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserRoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUserToRole].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUserToRole].[@roleName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_AddUserToRole].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="455" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_AddUserToRole]&#xD;&#xA;@userId INT,&#xD;&#xA;@roleName NVARCHAR(300),&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_ClearProjectGraphs]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  BEGIN

  --DELETE dfn FROM DataFlowGraphInfoNodes dfn
  --INNER JOIN BasicGraphInfoNodes n ON n.BasicGraphInfoNodeId = dfn.BasicGraphInfoNodeId
  --WHERE n.ProjectConfigId = @projectConfigId

  DELETE FROM BasicGraphInfoNodes WHERE ProjectConfigId = @projectConfigId

  DELETE FROM BasicGraphInfoLinks WHERE ProjectConfigId = @projectConfigId

  END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Adm].[sp_ClearProjectGraphs].[@projectConfigId]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_ClearProjectGraphs].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="452" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_ClearProjectGraphs]&#xD;&#xA;  @projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;  AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateDataflowSequences]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @Enumerator CURSOR

SET @Enumerator = CURSOR LOCAL FAST_FORWARD FOR
SELECT REPLACE(CAST(ProjectConfigId AS NVARCHAR(100)),'-','')
FROM Adm.ProjectConfigs

OPEN @Enumerator

DECLARE @id NVARCHAR(100)

WHILE (1=1)
BEGIN
  FETCH NEXT FROM @Enumerator INTO @id
  IF (@@FETCH_STATUS <> 0) BREAK
  
  IF NOT EXISTS (SELECT name FROM sys.schemas WHERE name = N''+@id+'')
  BEGIN
  DECLARE @CreateSQL NVARCHAR(MAX)
  DECLARE @CreateSQL1 NVARCHAR(MAX)
  DECLARE @CreateSQL2 NVARCHAR(MAX)
  DECLARE @CreateSQL3 NVARCHAR(MAX)
  DECLARE @CreateSQL4 NVARCHAR(MAX)
  DECLARE @CreateSQL5 NVARCHAR(MAX)
  DECLARE @CreateSQL6 NVARCHAR(MAX)
  DECLARE @CreateSQL7 NVARCHAR(MAX)
  DECLARE @CreateSQL8 NVARCHAR(MAX)
  DECLARE @CreateSQL8_1 NVARCHAR(MAX)
  DECLARE @CreateSQL9 NVARCHAR(MAX)
  DECLARE @CreateSQL10 NVARCHAR(MAX)
  
  SET @CreateSQL = 
    'CREATE SCHEMA [' + @id  +']'
  
  SET @CreateSQL1 = 	  
 	'CREATE TABLE [' + @id + '].[DataFlowSequences]
     (
     	[SequenceId] INT NOT NULL PRIMARY KEY, --IDENTITY(1,1),
     	[SourceNode] INT NOT NULL,
     	[TargetNode] INT NOT NULL,
     	[DetailLevel] INT NOT NULL,
     	[ProjectConfigid] UNIQUEIDENTIFIER NOT NULL
     )'
  
  SET @CreateSQL2 = 
     'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequences_TargetNode]
     ON ['+ @id +'].[DataFlowSequences] ([TargetNode])
     INCLUDE ([SourceNode])'
  
  SET @CreateSQL3 = 
     'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequences_SourceNode_TargetNode]
     ON ['+ @id +'].[DataFlowSequences] ([DetailLevel] ASC, [SourceNode] ASC, [TargetNode] ASC) INCLUDE([SequenceId])'
  
  SET @CreateSQL4 = 
 	'CREATE TABLE ['+ @id +'].[DataFlowSequenceSteps]
 	 (
 	 	[Id] INT NOT NULL PRIMARY KEY IDENTITY(1,1),
 	 	[SourceNodeId] INT NOT NULL,
 	 	[TargetNodeId] INT NOT NULL,
 	 	[SequenceId] INT NOT NULL,
 	 	[StepNumber] INT NOT NULL
 	 )'
 	
  SET @CreateSQL5 =  
 	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId]
 	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId]) INCLUDE([Id])'
  
  SET @CreateSQL6 = 	 
 	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId_SourceNodeId]
 	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId], [SourceNodeId]) INCLUDE([Id], [TargetNodeId])'
  
  SET @CreateSQL7 = 	 
 	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId_TargetNodeId]
 	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId], [TargetNodeId]) INCLUDE([Id], [SourceNodeId])'
  
    SET @CreateSQL8 = 	  
 	'CREATE TABLE [' + @id + '].[DataFlowSequences_Heap]
     (
     	[SequenceId] INT NOT NULL IDENTITY(1,1),
     	[SourceNode] INT NOT NULL,
     	[TargetNode] INT NOT NULL,
     	[DetailLevel] INT NOT NULL,
     	[ProjectConfigid] UNIQUEIDENTIFIER NOT NULL
     )'

 SET @CreateSQL8_1 = 
 	'CREATE NONCLUSTERED INDEX [IX_Sequences_Heap_Soource_Target_' + @id + ']
ON [' + @id + '].[DataFlowSequences_Heap] ([SourceNode],[TargetNode])
INCLUDE ([SequenceId])'
 
 
 
 SET @CreateSQL9 = 
 	'CREATE TABLE ['+ @id +'].[DataFlowSequenceSteps_Heap]
 	 (
 	 	[Id] INT NOT NULL IDENTITY(1,1),
 	 	[SourceNodeId] INT NOT NULL,
 	 	[TargetNodeId] INT NOT NULL,
 	 	[SequenceId] INT NOT NULL,
 	 	[StepNumber] INT NOT NULL
 	 )'

 SET @CreateSQL10 = 
 	'CREATE NONCLUSTERED INDEX [IX_SequenceSteps_Heap_SequenceId_' + @id + ']
ON [' + @id + '].[DataFlowSequenceSteps_Heap] ([SequenceId]) INCLUDE([StepNumber], [SourceNodeId], [TargetNodeId], [Id])'
 
 

  EXEC sp_executesql @CreateSQL
  EXEC sp_executesql @CreateSQL1
  EXEC sp_executesql @CreateSQL2
  EXEC sp_executesql @CreateSQL3
  EXEC sp_executesql @CreateSQL4
  EXEC sp_executesql @CreateSQL5
  EXEC sp_executesql @CreateSQL6
  EXEC sp_executesql @CreateSQL7
  EXEC sp_executesql @CreateSQL8
  EXEC sp_executesql @CreateSQL8_1
  EXEC sp_executesql @CreateSQL9
  EXEC sp_executesql @CreateSQL10
  
  END
END

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[cursor]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4041" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateDataflowSequences]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateNewProjectSchemaAndTables]">
			<Property Name="BodyScript">
				<Value><![CDATA[
 DECLARE @id NVARCHAR(100)
 DECLARE @CreateSQL NVARCHAR(MAX)
 DECLARE @CreateSQL1 NVARCHAR(MAX)
 DECLARE @CreateSQL2 NVARCHAR(MAX)
 DECLARE @CreateSQL3 NVARCHAR(MAX)
 DECLARE @CreateSQL4 NVARCHAR(MAX)
 DECLARE @CreateSQL5 NVARCHAR(MAX)
 DECLARE @CreateSQL6 NVARCHAR(MAX)
 DECLARE @CreateSQL7 NVARCHAR(MAX)
 DECLARE @CreateSQL8 NVARCHAR(MAX)
 DECLARE @CreateSQL8_1 NVARCHAR(MAX)
 DECLARE @CreateSQL9 NVARCHAR(MAX)
 DECLARE @CreateSQL10 NVARCHAR(MAX)

 SET @id = REPLACE(CAST(@projectconfigid AS NVARCHAR(100)),'-','')

  /*Create Project Schema*/
 SET @CreateSQL = 
   'CREATE SCHEMA [' + @id  +']'

   /* Creata DataFlowSequences*/
 SET @CreateSQL1 = 	  
	'CREATE TABLE [' + @id + '].[DataFlowSequences]
    (
    	[SequenceId] INT NOT NULL PRIMARY KEY, --IDENTITY(1,1),
    	[SourceNode] INT NOT NULL,
    	[TargetNode] INT NOT NULL,
    	[DetailLevel] INT NOT NULL,
    	[ProjectConfigid] UNIQUEIDENTIFIER NOT NULL
    )'

 SET @CreateSQL2 = 
    'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequences_TargetNode]
    ON ['+ @id +'].[DataFlowSequences] ([TargetNode])
    INCLUDE ([SourceNode])'

 SET @CreateSQL3 = 
    'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequences_SourceNode_TargetNode]
    ON ['+ @id +'].[DataFlowSequences] ([SourceNode],[TargetNode])'

	/* Creata DataFlowSequenceSteps*/
 SET @CreateSQL4 = 
	'CREATE TABLE ['+ @id +'].[DataFlowSequenceSteps]
	 (
	 	[Id] INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	 	[SourceNodeId] INT NOT NULL,
	 	[TargetNodeId] INT NOT NULL,
	 	[SequenceId] INT NOT NULL,
	 	[StepNumber] INT NOT NULL
	 )'
	
 SET @CreateSQL5 =  
	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId]
	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId]) INCLUDE([Id])'
 
 SET @CreateSQL6 = 	 
	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId_SourceNodeId]
	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId], [SourceNodeId]) INCLUDE([Id], [TargetNodeId])'
 
 SET @CreateSQL7 = 	 
	 'CREATE NONCLUSTERED INDEX [IX_'+ @id +'_DataFlowSequenceSteps_SequenceId_TargetNodeId]
	 ON ['+ @id +'].[DataFlowSequenceSteps] ([SequenceId], [TargetNodeId]) INCLUDE([Id], [SourceNodeId])'


    SET @CreateSQL8 = 	  
 	'CREATE TABLE [' + @id + '].[DataFlowSequences_Heap]
     (
     	[SequenceId] INT NOT NULL IDENTITY(1,1),
     	[SourceNode] INT NOT NULL,
     	[TargetNode] INT NOT NULL,
     	[DetailLevel] INT NOT NULL,
     	[ProjectConfigid] UNIQUEIDENTIFIER NOT NULL
     )'

 SET @CreateSQL8_1 = 
 	'CREATE NONCLUSTERED INDEX [IX_Sequences_Heap_Soource_Target_' + @id + ']
ON [' + @id + '].[DataFlowSequences_Heap] ([SourceNode],[TargetNode])
INCLUDE ([SequenceId])'
 
 
 
 SET @CreateSQL9 = 
 	'CREATE TABLE ['+ @id +'].[DataFlowSequenceSteps_Heap]
 	 (
 	 	[Id] INT NOT NULL IDENTITY(1,1),
 	 	[SourceNodeId] INT NOT NULL,
 	 	[TargetNodeId] INT NOT NULL,
 	 	[SequenceId] INT NOT NULL,
 	 	[StepNumber] INT NOT NULL
 	 )'

 SET @CreateSQL10 = 
 	'CREATE NONCLUSTERED INDEX [IX_SequenceSteps_Heap_SequenceId_' + @id + ']
ON [' + @id + '].[DataFlowSequenceSteps_Heap] ([SequenceId]) INCLUDE([StepNumber], [SourceNodeId], [TargetNodeId], [Id])'
 
 

 EXEC sp_executesql @CreateSQL
 EXEC sp_executesql @CreateSQL1
 EXEC sp_executesql @CreateSQL2
 EXEC sp_executesql @CreateSQL3
 EXEC sp_executesql @CreateSQL4
 EXEC sp_executesql @CreateSQL5
 EXEC sp_executesql @CreateSQL6
 EXEC sp_executesql @CreateSQL7
 EXEC sp_executesql @CreateSQL8
 EXEC sp_executesql @CreateSQL8_1
 EXEC sp_executesql @CreateSQL9
 EXEC sp_executesql @CreateSQL10]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateNewProjectSchemaAndTables].[@projectconfigid]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateNewProjectSchemaAndTables].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3734" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateNewProjectSchemaAndTables]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateProcedureExecution]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	INSERT INTO adm.ProcedureExecutionQueue(ProcedureName, ProjectConfigId, RequestId) VALUES(@procedureName, @projectConfigId, @requestId)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[ProcedureExecutionQueue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProcedureExecutionQueue].[ProcedureName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProcedureExecutionQueue].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProcedureExecutionQueue].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProcedureExecution].[@procedureName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProcedureExecution].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProcedureExecution].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProcedureExecution].[@procedureName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProcedureExecution].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProcedureExecution].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="293" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateProcedureExecution]&#xD;&#xA;&#x9;@procedureName NVARCHAR(MAX),&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateProjectConfig]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO Adm.ProjectConfigs(ProjectConfigId, Name) VALUES(@projectconfigid, @name)



INSERT INTO BIDoc.ModelElements(ExtendedProperties, RefPath, Definition, Caption, Type, RefPathPrefix, RefPathIntervalStart, RefPathIntervalEnd, ProjectConfigId)
VALUES(N'{}', N'', NULL, N'', N'CD.DLS.Model.SolutionModelElement', N'', 0, 0, @projectconfigid)

DECLARE @solutionElementId INT = (SELECT ModelElementId FROM BIDoc.ModelElements WHERE RefPath = N'' AND ProjectConfigId = @projectconfigid)

INSERT INTO BIDoc.ModelElements(ExtendedProperties, RefPath, Definition, Caption, Type, RefPathPrefix, RefPathIntervalStart, RefPathIntervalEnd, ProjectConfigId)
VALUES(N'{}', N'Business', NULL, N'Business Objects', N'CD.DLS.Model.Business.Organization.BusinessRootElement', N'Business', 0, 0, @projectconfigid)

DECLARE @businessElementId INT = (SELECT ModelElementId FROM BIDoc.ModelElements WHERE RefPath = N'Business' AND ProjectConfigId = @projectconfigid)

INSERT INTO BIDoc.ModelLinks(ElementFromId, ElementToId, [Type], ExtendedProperties)
VALUES (@businessElementId, @solutionElementId, N'parent', N'{}')

INSERT INTO BIDoc.ModelElements(ExtendedProperties, RefPath, Definition, Caption, Type, RefPathPrefix, RefPathIntervalStart, RefPathIntervalEnd, ProjectConfigId)
VALUES(N'{}', N'Business/SharedFolder', NULL, N'Shared Artefacts', N'CD.DLS.Model.Business.Organization.BusinessFolderElement', N'Business/SharedFolder', 0, 0, @projectconfigid)

DECLARE @sharedFolderId INT = (SELECT ModelElementId FROM BIDoc.ModelElements WHERE RefPath = N'Business/SharedFolder' AND ProjectConfigId = @projectconfigid)

INSERT INTO BIDoc.ModelLinks(ElementFromId, ElementToId, [Type], ExtendedProperties)
VALUES (@sharedFolderId, @businessElementId, N'parent', N'{}')]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProjectConfig].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProjectConfig].[@name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProjectConfig].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProjectConfig].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1889" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateProjectConfig]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@name NVARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateProjectRoles]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [Adm].[Roles]([RoleName], [ProjectConfigId])
SELECT N'ProjectAdmin', @projectconfigid


INSERT INTO [Adm].[RolePermissions]([RoleId], [PermissionId])
SELECT r.RoleId, p.PermissionId FROM

(VALUES
	(N'ProjectAdmin', N'ManageProject'),
	(N'ProjectAdmin', N'ViewLineage'),
	(N'ProjectAdmin', N'UpdateLineage'),
	(N'ProjectAdmin', N'ViewAnnotations'),
	(N'ProjectAdmin', N'EditAnnotations')
	) perms(RoleName, PermissionName)
INNER JOIN adm.Roles r ON r.RoleName = perms.RoleName
INNER JOIN adm.Permissions p ON p.PermissionName = perms.PermissionName
WHERE r.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_CreateProjectRoles].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionName]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_CreateProjectRoles].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="707" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateProjectRoles]&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_CreateProjectViews]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @CreateSQL NVARCHAR(MAX)
DECLARE @CreateSQL1 NVARCHAR(MAX)

IF NOT EXISTS (SELECT TOP 1 1 FROM sys.views vw INNER JOIN sys.schemas s ON vw.schema_id = s.schema_id WHERE s.name = N'BIDoc' AND vw.name = N'DataFlowSequences')
	BEGIN
		SET @CreateSQL = 'CREATE VIEW [BIDoc].[DataFlowSequences] 
						  AS '
	END
ELSE
	BEGIN
		SET @CreateSQL = 'ALTER VIEW [BIDoc].[DataFlowSequences] 
						  AS '
	END

IF NOT EXISTS (SELECT TOP 1 1 FROM sys.views vw INNER JOIN sys.schemas s ON vw.schema_id = s.schema_id WHERE s.name = N'BIDoc' AND vw.name = N'DataFlowSequenceSteps')
	BEGIN
		SET @CreateSQL1 = 'CREATE VIEW [BIDoc].[DataFlowSequenceSteps] 
						  AS '
	END
ELSE
	BEGIN
		SET @CreateSQL1 = 'ALTER VIEW [BIDoc].[DataFlowSequenceSteps] 
						  AS '
	END

DECLARE @Enumerator CURSOR

SET @Enumerator = CURSOR LOCAL FAST_FORWARD FOR
SELECT REPLACE(CAST(ProjectConfigId AS NVARCHAR(100)),'-','')
FROM Adm.ProjectConfigs

OPEN @Enumerator

DECLARE @id NVARCHAR(100)

WHILE (1=1)
BEGIN
  FETCH NEXT FROM @Enumerator INTO @id
  IF (@@FETCH_STATUS <> 0) BREAK

  SET @CreateSQL = @CreateSQL + 'SELECT [SequenceId], [SourceNode], [TargetNode], [DetailLevel], [ProjectConfigid] FROM ['+ @id +'].[DataFlowSequences]
					  UNION ALL '

  SET @CreateSQL1 = @CreateSQL1 + 'SELECT [Id], [SourceNodeId], [TargetNodeId], [SequenceId], [StepNumber] FROM ['+ @id +'].[DataFlowSequenceSteps]
					  UNION ALL '
END

SET @CreateSQL = LEFT( @CreateSQL,LEN( @CreateSQL)-10)
SET @CreateSQL1 = LEFT( @CreateSQL1,LEN( @CreateSQL1)-10)


EXEC sp_executesql @CreateSQL
EXEC sp_executesql @CreateSQL1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[cursor]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1686" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_CreateProjectViews]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_DeleteProjectConfig]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE FROM Inspect.HighLevelSolutionTrees WHERE ProjectConfigId = @projectconfigid

DELETE FROM BIDoc.LineageGridHistory WHERE ProjectConfigId = @projectconfigid

DELETE fv FROM Annotate.FieldValues fv
INNER JOIN Annotate.AnnotationElements e ON e.AnnotationElementId = fv.AnnotationElementId
WHERE e.ProjectConfigId = @projectconfigid

DELETE f FROM Annotate.AnnotationViewFields f
INNER JOIN Annotate.AnnotationViews v ON f.AnnotationViewId = v.AnnotationViewId
WHERE v.ProjectConfigId = @projectconfigid

DELETE FROM Annotate.Fields WHERE ProjectConfigId = @projectconfigid

DELETE l FROM Annotate.ElementLinks l
INNER JOIN Annotate.AnnotationElements e ON l.AnnotationElementFromId = e.AnnotationElementId
WHERE e.ProjectConfigId = @projectconfigid

DELETE FROM Annotate.LinkTypes WHERE ProjectConfigId = @projectconfigid

DELETE e FROM Annotate.AnnotationElements e
WHERE e.ProjectConfigId = @projectconfigid



DELETE FROM Annotate.AnnotationViews WHERE ProjectConfigId = @projectconfigid

EXEC BIDoc.sp_ClearModel @projectconfigid

DECLARE @rc INT

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) l FROM [BIDoc].[ModelLinks] l
INNER JOIN [BIDoc].[ModelElements] ef ON l.ElementFromId = ef.ModelElementId
INNER JOIN [BIDoc].[ModelElements] et ON l.ElementToId = et.ModelElementId
WHERE ef.ProjectConfigId = @projectconfigid --AND (ef.Type LIKE N'CD.DLS.Model.Mssql.%' OR et.Type LIKE N'CD.DLS.Model.Mssql.%')
SELECT @rc = @@ROWCOUNT
END


SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) FROM [BIDoc].[ModelElements] 
WHERE ProjectConfigId = @projectconfigid --AND [Type] LIKE N'CD.DLS.Model.Mssql.%'
SELECT @rc = @@ROWCOUNT
END


SET @rc = 1
WHILE @rc > 0
BEGIN
	DELETE TOP (1000) ei FROM stg.ExtractItems ei
	INNER JOIN stg.Extracts e ON ei.ExtractId = e.ExtractId
	WHERE e.ProjectConfigId = @projectconfigid

	SELECT @rc = @@ROWCOUNT
END

DELETE e FROM stg.Extracts e
WHERE e.ProjectConfigId = @projectconfigid


DELETE FROM adm.RequestMessages WHERE Project_ProjectConfigId = @projectconfigid
DELETE FROM Adm.MssqlAgentProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
DELETE FROM Adm.MssqlDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
DELETE FROM Adm.SsasDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
DELETE FROM Adm.SsisProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
DELETE FROM Adm.SsrsProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
DELETE FROM Adm.PowerBiProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid

DELETE FROM adm.BroadcastMessages WHERE ProjectConfigId = @projectconfigid

DELETE FROM Adm.ProjectConfigs WHERE ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteProjectConfig].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearModel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteProjectConfig].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2895" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_DeleteProjectConfig]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_DeleteRole]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE [Adm].[UserRoles] FROM [Adm].[UserRoles] ur
WHERE ur.RoleId = @roleId

DELETE [Adm].[RolePermissions] FROM [Adm].[RolePermissions] rp
WHERE rp.RoleId = @roleId

DELETE [Adm].[Roles] FROM [Adm].[Roles]
WHERE RoleId = @roleId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteRole].[@roleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteRole].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="297" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_DeleteRole]&#xD;&#xA;&#x9;@roleId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_DeleteRoleMember]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE [Adm].[UserRoles] FROM [Adm].[UserRoles] ur
WHERE  ur.UserId = @userId AND ur.RoleId = @roleId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteRoleMember].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteRoleMember].[@roleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteRoleMember].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteRoleMember].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="181" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_DeleteRoleMember]&#xD;&#xA;&#x9;@userId INT,&#xD;&#xA;&#x9;@roleId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_DeleteRolePermission]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE [Adm].[RolePermissions] FROM [Adm].[RolePermissions] rp
WHERE rp.RoleId = @roleId AND rp.PermissionId = @permissionId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteRolePermission].[@roleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_DeleteRolePermission].[@permissionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteRolePermission].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_DeleteRolePermission].[@permissionId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="214" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_DeleteRolePermission]&#xD;&#xA;&#x9;@roleId INT,&#xD;&#xA;&#x9;@permissionId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetAbandonedRequests]">
			<Property Name="BodyScript">
				<Value><![CDATA[WITH candidateRequests AS(
SELECT r.MessageId, r.RequestId, r.CreatedDateTime 
FROM adm.RequestMessages r
-- the request does not have a response
LEFT JOIN adm.RequestMessages resp ON r.RequestId = resp.RequestId AND resp.MessageType <> N'RequestCreated'
-- is not waiting for other requests
LEFT JOIN adm.RequestsWaitFor wf ON wf.RequestId = r.RequestId AND wf.Active = 1
WHERE 
	r.MessageType = N'RequestCreated' 
	AND resp.MessageId IS NULL 
	AND wf.RequestsWiaitForItemId IS NULL
	-- has been received
	AND r.Received = 1
)
-- figure out the "abandon time" - either the creation of the request or the time the last of the requests
-- this request has been waiting for finished
SELECT cr.RequestId, cr.MessageId, ISNULL(MAX(awm.CreatedDateTime), cr.CreatedDateTime) CreatedDateTime
--,DATEDIFF(MINUTE, ISNULL(MAX(awm.CreatedDateTime), cr.CreatedDateTime), GETDATE())
FROM candidateRequests cr
LEFT JOIN Adm.RequestsWaitFor wf ON cr.RequestId = wf.RequestId
LEFT JOIN adm.RequestMessages awm ON awm.RequestId = wf.WaitForRequestId AND awm.MessageType <> N'RequestCreated'
GROUP BY cr.RequestId, cr.CreatedDateTime, cr.MessageId
HAVING DATEDIFF(MINUTE, ISNULL(MAX(awm.CreatedDateTime), cr.CreatedDateTime), GETDATE()) >= 15]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestsWiaitForItemId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_GetAbandonedRequests].[CTE1].[candidateRequests]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetAbandonedRequests].[CTE1].[candidateRequests].[MessageId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestMessages].[MessageId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetAbandonedRequests].[CTE1].[candidateRequests].[RequestId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestMessages].[RequestId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetAbandonedRequests].[CTE1].[candidateRequests].[CreatedDateTime]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1303" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetAbandonedRequests]&#xD;&#xA;AS&#xD;&#xA;&#xD;&#xA;;" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetActiveBroadcastMessages]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT
 BroadcastMessageId,
 BroadcastMessageType,
 ProjectConfigId,
 Active,
 Content
FROM [Adm].[BroadcastMessages] 
WHERE Active = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Content]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="204" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetActiveBroadcastMessages]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetBroadcastMessageById]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT
 BroadcastMessageId,
 BroadcastMessageType,
 ProjectConfigId,
 Active,
 Content
FROM [Adm].[BroadcastMessages] 
WHERE BroadcastMessageId = @BroadcastMessageId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetBroadcastMessageById].[@BroadcastMessageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetBroadcastMessageById].[@BroadcastMessageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="270" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetBroadcastMessageById]&#xD;&#xA;&#x9;@BroadcastMessageId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetCompletedComplexRequests]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

;WITH candidates AS
(
SELECT wf.RequestId, wf.WaitForRequestId, fd.MessageId FROM adm.RequestsWaitFor wf
-- have progress responses (are complex)
INNER JOIN adm.RequestMessages prog ON wf.RequestId = prog.RequestId AND prog.MessageType = N'Progress'
-- are not completed
LEFT JOIN adm.RequestMessages progf ON wf.RequestId = progf.RequestId AND progf.MessageType = N'RequestProcessed'
-- find finished dependencies (if any)
LEFT JOIN adm.RequestMessages fd ON fd.RequestId = wf.WaitForRequestId AND fd.MessageType = N'RequestProcessed'
WHERE progf.MessageId IS NULL
)
-- requests where all dependencies are finished
SELECT DISTINCT RequestId FROM candidates c
WHERE NOT EXISTS(SELECT TOP 1 1 FROM candidates unf WHERE c.RequestId = unf.RequestId AND unf.MessageId IS NULL)

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_GetCompletedComplexRequests].[CTE1].[candidates]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetCompletedComplexRequests].[CTE1].[candidates].[RequestId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetCompletedComplexRequests].[CTE1].[candidates].[WaitForRequestId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Adm].[sp_GetCompletedComplexRequests].[CTE1].[candidates].[MessageId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[RequestMessages].[MessageId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="862" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetCompletedComplexRequests]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetDisplayNameAndRoleName]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT u.DisplayName, r.RoleName FROM [Adm].[UserRoles] ur
	INNER JOIN [Adm].[Users] u ON ur.UserId = u.UserId
	INNER JOIN [Adm].[Roles] r ON r.RoleId = r.RoleId
	WHERE DisplayName IS NOT NULL AND r.RoleName = @roleName 
RETURN]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetDisplayNameAndRoleName].[@roleName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetDisplayNameAndRoleName].[@roleName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="317" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetDisplayNameAndRoleName]&#xD;&#xA;&#x9;@roleName NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetGlobalConfigValue]">
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT [Value] FROM adm.GlobalConfig WHERE [Key] = @key]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[GlobalConfig]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[GlobalConfig].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[GlobalConfig].[Key]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetGlobalConfigValue].[@key]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetGlobalConfigValue].[@key]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="130" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetGlobalConfigValue]&#xD;&#xA;&#x9;@key NVARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetLogSinceId]">
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT LogId, CreatedDate, MessageType, Message, StackTrace FROM adm.Log WHERE LogId > @lastSeenLogId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[LogId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetLogSinceId].[@lastSeenLogId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetLogSinceId].[@lastSeenLogId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="168" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetLogSinceId](@lastSeenLogId INT)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetNewMessagesToObject]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 
BEGIN TRAN


SELECT [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[CustomerCode]
	  ,RequestFromUserId
  FROM [Adm].[RequestMessages]
  WHERE MessageToObjectId = @objectId 
  AND Received = 0

  UPDATE [Adm].RequestMessages SET Received = 1 
	WHERE MessageToObjectId = @objectId
	AND Received = 0

  COMMIT]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetNewMessagesToObject].[@objectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetNewMessagesToObject].[@objectId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="776" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetNewMessagesToObject]&#xD;&#xA;(&#xD;&#xA;@objectId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetRequestsFinishedWaiting]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
BEGIN TRAN

-- those that are waited for but have RequestProcessed will no longer be waited for
DECLARE @finishedRequests Adm.UDTT_GuidList

INSERT INTO @finishedRequests(Id)
SELECT DISTINCT WaitForRequestId
FROM adm.RequestsWaitFor wf
INNER JOIN adm.RequestMessages m ON m.RequestId = wf.WaitForRequestId
WHERE Active = 1 AND m.MessageType = N'RequestProcessed'

UPDATE wf SET Active = 0 
FROM adm.RequestsWaitFor wf
INNER JOIN @finishedRequests f ON f.Id = wf.WaitForRequestId

-- those that were dependent on the newly finished requests and are not dependent on other active requests are done waiting
SELECT DISTINCT wf.RequestId 
FROM adm.RequestsWaitFor wf
INNER JOIN @finishedRequests f ON f.Id = wf.WaitForRequestId
LEFT JOIN RequestsWaitFor others ON others.RequestId = wf.RequestId AND others.Active = 1
WHERE others.RequestsWiaitForItemId IS NULL

COMMIT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UDTT_GuidList]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetRequestsFinishedWaiting].[@finishedRequests].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetRequestsFinishedWaiting].[@finishedRequests].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestsWiaitForItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_GetRequestsFinishedWaiting].[@finishedRequests]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_GetRequestsFinishedWaiting].[@finishedRequests].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="958" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetRequestsFinishedWaiting]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetRoleMembers]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 

SELECT u.DisplayName, u.UserId
FROM [Adm].[UserRoles] ur
INNER JOIN [Adm].[Users] u ON ur.UserId = u.UserId
WHERE ur.RoleId = @roleId AND u.DisplayName IS NOT NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetRoleMembers].[@roleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetRoleMembers].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="232" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetRoleMembers]&#xD;&#xA;&#x9;@roleId INT &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetRolePermissions]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 

SELECT p.PermissionName, p.PermissionId
--, PermissionScope
FROM [Adm].[RolePermissions] rp
INNER JOIN [Adm].[Permissions] p ON rp.PermissionId = p.PermissionId
WHERE rp.RoleId = @roleId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetRolePermissions].[@roleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetRolePermissions].[@roleId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="260" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetRolePermissions]&#xD;&#xA;&#x9;@roleId INT &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_GetUserPermissions]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 

SELECT DISTINCT p.PermissionName, p.PermissionId
--, PermissionScope
FROM [Adm].[RolePermissions] rp
INNER JOIN [Adm].[Roles] r ON rp.RoleId = r.RoleId
INNER JOIN [Adm].[Permissions] p ON rp.PermissionId = p.PermissionId
INNER JOIN adm.UserRoles ur ON ur.RoleId = r.RoleId
WHERE ur.UserId = @userId AND (ProjectConfigId = @projectConfigId OR ProjectConfigId IS NULL)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetUserPermissions].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_GetUserPermissions].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetUserPermissions].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_GetUserPermissions].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="478" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_GetUserPermissions]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@userId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_InvalidateRequestCache]">
			<Property Name="BodyScript">
				<Value><![CDATA[
UPDATE h SET h.CacheValidUntil = GETDATE(), h.CacheValid = 0 
FROM adm.RequestMessageHistory h
INNER JOIN adm.RequestMessages m ON h.InitMessage_MessageId = m.MessageId
WHERE m.RequestForCoreType = ISNULL(@coreType, m.RequestForCoreType) AND m.MessageToProjectId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessageHistory]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[InitMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValidUntil]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_InvalidateRequestCache].[@coretype]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_InvalidateRequestCache].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_InvalidateRequestCache].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_InvalidateRequestCache].[@coretype]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="410" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_InvalidateRequestCache]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER, &#xD;&#xA;&#x9;@coretype NVARCHAR(50) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_ListPermissions]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 

SELECT p.PermissionName, p.PermissionId
--, PermissionScope
FROM [Adm].[Permissions] p]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="140" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_ListPermissions]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_ListRoles]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT RoleId, RoleName, ProjectConfigId FROM Adm.Roles
	WHERE ISNULL(ProjectConfigId, @projectConfigId) = @projectConfigId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_ListRoles].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_ListRoles].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="204" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_ListRoles]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_ListUsers]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT UserId, DisplayName, [Identity] 
	FROM adm.Users 
	WHERE DisplayName IS NOT NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[Identity]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="133" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_ListUsers]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_MarkMessageReceived]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @res INT = 0
BEGIN TRAN
	UPDATE adm.RequestMessages SET Received = 1 WHERE Received = 0 AND MessageId = @messageId
	SET @res = @@ROWCOUNT
COMMIT
SELECT @res]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_MarkMessageReceived].[@messageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_MarkMessageReceived].[@messageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="252" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_MarkMessageReceived]&#xD;&#xA;&#x9;@messageId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_MarkMessageUnreceived]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	UPDATE adm.RequestMessages SET Received = 0 WHERE MessageId = @messageId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_MarkMessageUnreceived].[@messageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_MarkMessageUnreceived].[@messageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="158" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_MarkMessageUnreceived]&#xD;&#xA;&#x9;@messageId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveBroadcastMessage]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [Adm].[BroadcastMessages]
(
 BroadcastMessageId,
 BroadcastMessageType,
 ProjectConfigId,
 Active,
 Content
)
VALUES
(
 @BroadcastMessageId,
 @BroadcastMessageType,
 @ProjectConfigId,
 @Active,
 @Content
)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessage].[@BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessage].[@BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessage].[@ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessage].[@Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessage].[@Content]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessage].[@BroadcastMessageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessage].[@BroadcastMessageType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessage].[@ProjectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessage].[@Active]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessage].[@Content]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="453" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveBroadcastMessage]&#xD;&#xA;&#x9;@BroadcastMessageId UNIQUEIDENTIFIER,&#xD;&#xA;    @BroadcastMessageType NVARCHAR(200),&#xD;&#xA;    @ProjectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;    @Active BIT,&#xD;&#xA;&#x9;@Content NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveBroadcastMessageSingleton]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN TRAN
IF(EXISTS(SELECT TOP 1 1 FROM adm.BroadcastMessages WHERE BroadcastMessageType = @BroadcastMessageType AND Active = 1))
BEGIN
SELECT 0 [Result]
END
ELSE
BEGIN
INSERT INTO [Adm].[BroadcastMessages]
(
 BroadcastMessageId,
 BroadcastMessageType,
 ProjectConfigId,
 Active,
 Content
)
VALUES
(
 @BroadcastMessageId,
 @BroadcastMessageType,
 @ProjectConfigId,
 @Active,
 @Content
)
SELECT 1
END
COMMIT]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@Content]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@BroadcastMessageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@BroadcastMessageType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@ProjectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@Active]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveBroadcastMessageSingleton].[@Content]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="662" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveBroadcastMessageSingleton]&#xD;&#xA;&#x9;@BroadcastMessageId UNIQUEIDENTIFIER,&#xD;&#xA;    @BroadcastMessageType NVARCHAR(200),&#xD;&#xA;    @ProjectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;    @Active BIT,&#xD;&#xA;&#x9;@Content NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveDbOperationFinishedMessage]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @messageId UNIQUEIDENTIFIER = NEWID()

INSERT INTO [Adm].[RequestMessages]
(
	   [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      ,[Project_ProjectConfigId]
	  ,[CustomerCode]
	  ,RequestFromUserId
)
SELECT
	   @messageId
      ,rm.RequestId
      ,N'' [Content]
      ,rm.[RequestForCoreType]
      ,rm.[RequestProcessingMethod]
      ,rm.[MessageFromId]
      ,rm.[MessageOriginName]
      ,rm.[MessageOriginId]
      ,rm.[MessageFromName]
      ,rm.[MessageToObjectId]
      ,rm.[MessageToProjectId]
      ,rm.[MessageToObjectName]
      ,N'DbOperationFinished' [MessageType]
      ,GETDATE() [CreatedDateTime]
      ,rm.[Project_ProjectConfigId]
	  ,rm.[CustomerCode]
	  ,rm.RequestFromUserId
FROM adm.RequestMessages rm WHERE rm.MessageType = N'RequestCreated' AND rm.RequestId = @requestId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveDbOperationFinishedMessage].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveDbOperationFinishedMessage].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1235" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveDbOperationFinishedMessage]&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveRequestMessageHistory]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [Adm].[RequestMessageHistory]
(
	   [RequestId]
      ,[CacheValid]
      ,[CacheValidUntil]
      ,[InitMessage_MessageId]
      ,[ResponseMessage_MessageId]
)
SELECT
	   m.[RequestId]
      ,IIF(@cachevaliduntil > GETDATE(), 1, 0)
      ,@cachevaliduntil
      ,iniRequest.MessageId [InitMessage_MessageId]
      ,m.MessageId [ResponseMessage_MessageId]
FROM @requestmessages m
INNER JOIN [Adm].[RequestMessages] iniRequest ON iniRequest.MessageType = N'RequestCreated' AND iniRequest.RequestId = m.RequestId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessageHistory]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[CacheValidUntil]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[InitMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessageHistory].[ResponseMessage_MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessageHistory].[@cachevaliduntil]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages]" Disambiguator="14">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[RequestId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[Content]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[RequestForCoreType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[RequestProcessingMethod]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageFromId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageOriginName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageOriginId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageFromName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageToObjectId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageToProjectId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageToObjectName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[MessageType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[CreatedDateTime]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[Project_ProjectConfigId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[CustomerCode]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages].[RequestFromUserId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestMessageHistory].[@requestmessages]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_RequestMessages]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestMessageHistory].[@cachevaliduntil]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="693" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveRequestMessageHistory]&#xD;&#xA;&#x9;@requestmessages [Adm].[UDTT_RequestMessages] READONLY,&#xD;&#xA;&#x9;@cachevaliduntil [datetimeoffset](7)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveRequestMessages]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @rc INT

INSERT INTO [Adm].[RequestMessages]
(
	   [MessageId]
      ,[RequestId]
      ,[Content]
      ,[RequestForCoreType]
      ,[RequestProcessingMethod]
      ,[MessageFromId]
      ,[MessageOriginName]
      ,[MessageOriginId]
      ,[MessageFromName]
      ,[MessageToObjectId]
      ,[MessageToProjectId]
      ,[MessageToObjectName]
      ,[MessageType]
      ,[CreatedDateTime]
      --,[TypeName]
      ,[Project_ProjectConfigId]
	  ,[CustomerCode]
	  ,[RequestFromUserId]
)
SELECT
	   a.[MessageId]
      ,a.[RequestId]
      ,a.[Content]
      ,a.[RequestForCoreType]
      ,a.[RequestProcessingMethod]
      ,a.[MessageFromId]
      ,a.[MessageOriginName]
      ,a.[MessageOriginId]
      ,a.[MessageFromName]
      ,a.[MessageToObjectId]
      ,a.[MessageToProjectId]
      ,a.[MessageToObjectName]
      ,a.[MessageType]
      ,a.[CreatedDateTime]
      --,a.[TypeName]
      ,a.[Project_ProjectConfigId]
	  ,a.CustomerCode
	  ,a.RequestFromUserId
FROM @requestmessages a
LEFT JOIN adm.RequestMessages rm ON a.RequestId = rm.RequestId AND a.MessageType = rm.MessageType
WHERE rm.MessageId IS NULL

SELECT @@ROWCOUNT

--INSERT INTO [Adm].[RequestMessageAttachments]
--(
--		   [AttachmentId]
--           ,[Type]
--           ,[Name]
--           ,[Uri]
--           ,[MessageId]
--           ,[OriginalRequestMessage_MessageId]
--)
--SELECT 		[AttachmentId]
--           ,[Type]
--           ,[Name]
--           ,[Uri]
--           ,[MessageId]
--           ,[OriginalRequestMessage_MessageId]
--FROM @attachments   

--RETURN @rc]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestForCoreType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestProcessingMethod]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageFromId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageOriginName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageOriginId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageFromName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToObjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToProjectId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[Project_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[CustomerCode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages]" Disambiguator="15">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[Content]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestForCoreType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestProcessingMethod]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageFromId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageOriginName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageOriginId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageFromName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToObjectId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToProjectId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageToObjectName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[MessageType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[CreatedDateTime]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[Project_ProjectConfigId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[CustomerCode]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages].[RequestFromUserId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SaveRequestMessages].[@attachments]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[AttachmentId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[Type]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[Uri]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="800" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[MessageId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestMessages].[@attachments].[OriginalRequestMessage_MessageId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestMessages].[@requestmessages]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_RequestMessages]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestMessages].[@attachments]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_RequestMessageAttachments]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1796" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveRequestMessages]&#xD;&#xA;&#x9;@requestmessages [Adm].[UDTT_RequestMessages] READONLY,&#xD;&#xA;&#x9;@attachments [Adm].[UDTT_RequestMessageAttachments] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveRequestWaitFors]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [Adm].[RequestsWaitFor]
(
	   [RequestId]
      ,[WaitForRequestId]
)
SELECT
	@requestId
	,w.Id
FROM @waitForRequests w]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitFors].[@waitForRequests]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitFors].[@requestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitFors].[@waitForRequests].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SaveRequestWaitFors].[@waitForRequests]" Disambiguator="26">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestWaitFors].[@waitForRequests].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestWaitFors].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestWaitFors].[@waitForRequests]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_GuidList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="273" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveRequestWaitFors]&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@waitForRequests [Adm].[UDTT_GuidList] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SaveRequestWaitForsInactive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [Adm].[RequestsWaitFor]
(
	   [RequestId]
      ,[WaitForRequestId]
	  ,Active
)
SELECT
	@requestId
	,w.Id
	,0
FROM @waitForRequests w]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestsWaitFor]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[WaitForRequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestsWaitFor].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitForsInactive].[@waitForRequests]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitForsInactive].[@requestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveRequestWaitForsInactive].[@waitForRequests].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SaveRequestWaitForsInactive].[@waitForRequests]" Disambiguator="24">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SaveRequestWaitForsInactive].[@waitForRequests].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestWaitForsInactive].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SaveRequestWaitForsInactive].[@waitForRequests]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_GuidList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="298" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SaveRequestWaitForsInactive]&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@waitForRequests [Adm].[UDTT_GuidList] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SecurityQuery]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	IF @scope IS NULL
	BEGIN
		SET @scope = N''
	END

	IF EXISTS(
		SELECT TOP 1 1 FROM adm.UserRoles r
		INNER JOIN adm.RolePermissions rp ON rp.RoleId = r.RoleId
		INNER JOIN adm.Permissions p ON p.PermissionId = rp.PermissionId
		WHERE r.UserId = @userId AND p.PermissionName = @permission 
			-- the granted permission is global or is a superset (prefix) of the required permission
			AND (p.PermissionScope IS NULL OR LEFT(@scope, LEN(p.PermissionScope)) = p.PermissionScope)
	)
	BEGIN
		SELECT 1 Result, NULL [Message]
	END
	ELSE BEGIN
		SELECT 0 Result, N'The permission has not been granted' [Message]
	END
RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[sp_SecurityQuery].[@scope]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RolePermissions].[PermissionId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SecurityQuery].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SecurityQuery].[@permission]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Permissions].[PermissionScope]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SecurityQuery].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SecurityQuery].[@permission]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SecurityQuery].[@scope]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="753" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SecurityQuery]&#xD;&#xA;&#x9;@userId INT,&#xD;&#xA;&#x9;@permission NVARCHAR(100),&#xD;&#xA;&#x9;@scope NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetBroadcastMessageInactive]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE adm.BroadcastMessages SET Active = 0 WHERE BroadcastMessageId = @BroadcastMessageId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[BroadcastMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[Active]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[BroadcastMessages].[BroadcastMessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetBroadcastMessageInactive].[@BroadcastMessageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetBroadcastMessageInactive].[@BroadcastMessageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="192" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetBroadcastMessageInactive]&#xD;&#xA;&#x9;@BroadcastMessageId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetGlobalConfigValue]">
			<Property Name="BodyScript">
				<Value><![CDATA[
IF(EXISTS (SELECT 1 FROM adm.GlobalConfig WHERE [Key] = @key))
	UPDATE adm.GlobalConfig SET [Value] = @value WHERE [Key] = @key
ELSE
	INSERT INTO adm.GlobalConfig([Key], [Value])
	VALUES(@key, @value)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[GlobalConfig]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[GlobalConfig].[Key]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetGlobalConfigValue].[@key]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[GlobalConfig].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetGlobalConfigValue].[@value]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[GlobalConfig].[Key]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetGlobalConfigValue].[@key]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetGlobalConfigValue].[@value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="303" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetGlobalConfigValue]&#xD;&#xA;&#x9;@key NVARCHAR(200),&#xD;&#xA;&#x9;@value NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetMessageReceived]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	UPDATE [Adm].RequestMessages SET Received = 1 
	WHERE MessageId = @messageId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Received]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetMessageReceived].[@messageId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetMessageReceived].[@messageId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="160" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetMessageReceived]&#xD;&#xA;&#x9;@messageId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectMssqlAgentComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.MssqlAgentProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.MssqlAgentProjectComponents(
			[ServerName]
           ,[JobName]
		   ,[ProjectConfig_ProjectConfigId]
		   )
		   SELECT
		   ServerName
		   ,JobName
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlAgentProjectComponents].[JobName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components].[JobName]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components]" Disambiguator="7">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components].[JobName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectMssqlAgentComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_MssqlAgentProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="484" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectMssqlAgentComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_MssqlAgentProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectMssqlDbComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.MssqlDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.MssqlDbProjectComponents(
			[ServerName]
           ,[DbName]
		   ,[ProjectConfig_ProjectConfigId]
		   )
		   SELECT
		   ServerName
		   ,DbName
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlDbComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[MssqlDbProjectComponents].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components].[DbName]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components]" Disambiguator="8">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components].[DbName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectMssqlDbComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectMssqlDbComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_MssqlDbProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="470" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectMssqlDbComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_MssqlDbProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectPowerBiComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.PowerBiProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.PowerBiProjectComponents(
			[RedirectUri]
			,[ApplicationID]
			,[WorkspaceID]
			,[ReportServerURL]
			,[ReportServerFolder]
			,[ProjectConfig_ProjectConfigId]			
		   )
		   SELECT
		   RedirectUri
		   ,ApplicationID
		   ,WorkspaceID
		   ,ReportServerURL
		   ,ReportServerFolder
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[RedirectUri]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ApplicationID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[WorkspaceID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ReportServerURL]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[PowerBiProjectComponents].[ReportServerFolder]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[RedirectUri]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ApplicationID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[WorkspaceID]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ReportServerURL]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ReportServerFolder]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components]" Disambiguator="31">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[RedirectUri]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ApplicationID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[WorkspaceID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ReportServerURL]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components].[ReportServerFolder]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectPowerBiComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectPowerBiComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_PowerBiProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="615" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectPowerBiComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_PowerBiProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectSsasDbComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.SsasDbProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.SsasDbProjectComponents(
			[ServerName]
           ,[DbName]
		   ,[SSASType]
		   ,[ProjectConfig_ProjectConfigId]
		   )
		   SELECT
		   ServerName
		   ,DbName
		   ,SSASType
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsasDbComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsasDbProjectComponents].[SSASType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsasDbComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[SSASType]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectSsasDbComponents].[@components]" Disambiguator="6">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[DbName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsasDbComponents].[@components].[SSASType]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsasDbComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsasDbComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_SsasDbProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="500" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectSsasDbComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_SsasDbProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectSsisComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.SsisProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.SsisProjectComponents(
			[ServerName]
           ,[FolderName]
		   ,[ProjectName]
		   ,[ProjectConfig_ProjectConfigId]
		   )
		   SELECT
		   ServerName
		   ,FolderName
		   ,ProjectName
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsisProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsisComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[FolderName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsisProjectComponents].[ProjectName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsisComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsisComponents].[@components].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsisComponents].[@components].[FolderName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsisComponents].[@components].[ProjectName]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectSsisComponents].[@components]" Disambiguator="5">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsisComponents].[@components].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsisComponents].[@components].[FolderName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsisComponents].[@components].[ProjectName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsisComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsisComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_SsisProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="506" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectSsisComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_SsisProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_SetProjectSsrsComponents]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM Adm.SsrsProjectComponents WHERE ProjectConfig_ProjectConfigId = @projectconfigid
INSERT INTO Adm.SsrsProjectComponents(
			[SsrsMode]
			,[ServerName]
			,[FolderPath]
			,[SsrsServiceUrl]
			,[SsrsExecutionServiceUrl]
			,[SharepointBaseUrl]
			,[SharepointFolder]
			,[ProjectConfig_ProjectConfigId]
		   )
		   SELECT
		   SsrsMode
		   ,ServerName
		   ,FolderPath
		   ,SsrsServiceUrl
		   ,SsrsExecutionServiceUrl
		   ,SharepointBaseUrl
		   ,SharepointFolder
		   ,@projectconfigid
		   FROM @components]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsMode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[FolderPath]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SsrsExecutionServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SharepointBaseUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[SsrsProjectComponents].[SharepointFolder]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsMode]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[FolderPath]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsExecutionServiceUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SharepointBaseUrl]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SharepointFolder]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_SetProjectSsrsComponents].[@components]" Disambiguator="4">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsMode]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsServiceUrl]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SsrsExecutionServiceUrl]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[FolderPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SharepointBaseUrl]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_SetProjectSsrsComponents].[@components].[SharepointFolder]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsrsComponents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_SetProjectSsrsComponents].[@components]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_SsrsProjectComponents]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="692" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_SetProjectSsrsComponents]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@components Adm.UDTT_SsrsProjectComponents READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_WaitingTest]">
			<Property Name="BodyScript">
				<Value><![CDATA[

	 DECLARE @i INT = 0
	 DECLARE @message NVARCHAR(MAX)
	 WHILE @minutes > @i
	 BEGIN
		WAITFOR DELAY '00:01' 
		SET @i = @i + 1
		SET @message = N'Waited for ' + CONVERT(NVARCHAR(10), @i) + N' minutes'
		PRINT @message
		EXEC [Adm].[sp_WriteLogInfo] @message
	 END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WaitingTest].[@minutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WaitingTest].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WaitingTest].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WaitingTest].[@minutes]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[20]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="407" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_WaitingTest]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@minutes int = 20&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_WriteLog]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO Adm.Log(MessageType, [Message], StackTrace)
VALUES(@messageType, @message, @stackTrace)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLog].[@messageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLog].[@message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLog].[@stackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteLog].[@messageType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteLog].[@message]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteLog].[@stackTrace]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="233" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_WriteLog]&#xD;&#xA;&#x9;@messageType NVARCHAR(100),&#xD;&#xA;&#x9;@message NVARCHAR(MAX),&#xD;&#xA;&#x9;@stackTrace NVARCHAR(MAX) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_WriteLogBatch]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [Adm].[Log]
(
	   [CreatedDate]
      ,[MessageType]
      ,[Message]
      ,[StackTrace]
)
SELECT
	   l.CreatedDate
      ,l.MessageType
      ,l.[Message]
      ,l.StackTrace
FROM @log l]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogBatch].[@log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogBatch].[@log].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogBatch].[@log].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogBatch].[@log].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogBatch].[@log].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_WriteLogBatch].[@log]" Disambiguator="34">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteLogBatch].[@log].[CreatedDate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteLogBatch].[@log].[MessageType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="100" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteLogBatch].[@log].[Message]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteLogBatch].[@log].[StackTrace]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteLogBatch].[@log]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_Log]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="292" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_WriteLogBatch]&#xD;&#xA;&#x9;@log [Adm].[UDTT_Log] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_WriteLogInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO Adm.Log(MessageType, [Message], StackTrace)
VALUES(N'0', @message, NULL)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[Log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Log].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo].[@message]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteLogInfo].[@message]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="156" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_WriteLogInfo]&#xD;&#xA;&#x9;@message NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[sp_WriteUserActionLogBatch]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [Adm].[UserActionLog]
(
		[CreatedDate]
		,[EventType]
		,[UserId]
		,[ApplicationName]
		,[FrameworkElement]
		,[DataContext]
		,[ExtendedProperties]
)
SELECT
	   l.[CreatedDate]
		,l.[EventType]
		,l.[UserId]
		,l.[ApplicationName]
		,l.[FrameworkElement]
		,l.[DataContext]
		,l.[ExtendedProperties]
FROM @log l]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserActionLog]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[EventType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[ApplicationName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[FrameworkElement]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[DataContext]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserActionLog].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[EventType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[ApplicationName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[FrameworkElement]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[DataContext]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Adm].[sp_WriteUserActionLogBatch].[@log]" Disambiguator="33">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[CreatedDate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[EventType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[UserId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[ApplicationName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[FrameworkElement]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[DataContext]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Adm].[sp_WriteUserActionLogBatch].[@log].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[sp_WriteUserActionLogBatch].[@log]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Adm].[UDTT_UserActionLog]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="444" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[sp_WriteUserActionLogBatch]&#xD;&#xA;&#x9;@log [Adm].[UDTT_UserActionLog] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Adm].[spRemovedUserFromRole]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE ur FROM adm.UserRoles ur
INNER JOIN Adm.Roles r ON r.RoleId = ur.RoleId
WHERE ISNULL(r.ProjectConfigId, N'00000000-0000-0000-0000-000000000000') = ISNULL(@projectconfigid, N'00000000-0000-0000-0000-000000000000')
AND ur.UserId = @userId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[UserRoles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Roles].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[spRemovedUserFromRole].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[UserRoles].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[spRemovedUserFromRole].[@userId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[spRemovedUserFromRole].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[spRemovedUserFromRole].[@roleName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Adm].[spRemovedUserFromRole].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="375" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Adm].[spRemovedUserFromRole]&#xD;&#xA;@userId INT,&#xD;&#xA;@roleName NVARCHAR(300),&#xD;&#xA;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[SsasDbProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsasDbProjectComponents].[SsaslDbProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsasDbProjectComponents].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsasDbProjectComponents].[DbName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsasDbProjectComponents].[SSASType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsasDbProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="111" />
			<AttachedAnnotation Disambiguator="88" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[SsisProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsisProjectComponents].[SsisProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsisProjectComponents].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsisProjectComponents].[FolderName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsisProjectComponents].[ProjectName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsisProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="105" />
			<AttachedAnnotation Disambiguator="89" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[SsrsProjectComponents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SsrsProjectComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SsrsMode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="39" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SsrsServiceUrl]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SsrsExecutionServiceUrl]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[FolderPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SharepointBaseUrl]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[SharepointFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[SsrsProjectComponents].[ProjectConfig_ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="112" />
			<AttachedAnnotation Disambiguator="90" />
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_GuidList]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_GuidList].[Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_Log]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_Log].[CreatedDate]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_Log].[MessageType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_Log].[Message]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_Log].[StackTrace]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_MssqlAgentProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_MssqlAgentProjectComponents].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_MssqlAgentProjectComponents].[JobName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_MssqlDbProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_MssqlDbProjectComponents].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_MssqlDbProjectComponents].[DbName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_PowerBiProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_PowerBiProjectComponents].[RedirectUri]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_PowerBiProjectComponents].[ApplicationID]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_PowerBiProjectComponents].[WorkspaceID]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_PowerBiProjectComponents].[ReportServerURL]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_PowerBiProjectComponents].[ReportServerFolder]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_RequestMessageAttachments]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[AttachmentId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[Type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[Name]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[Uri]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="800" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[MessageId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessageAttachments].[OriginalRequestMessage_MessageId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_RequestMessages]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[RequestId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[Content]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[RequestForCoreType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[RequestProcessingMethod]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageFromId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageOriginName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageOriginId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageFromName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageToObjectId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageToProjectId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageToObjectName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[MessageType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[CreatedDateTime]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[Project_ProjectConfigId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[CustomerCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_RequestMessages].[RequestFromUserId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_SsasDbProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsasDbProjectComponents].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsasDbProjectComponents].[DbName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsasDbProjectComponents].[SSASType]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_SsisProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsisProjectComponents].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsisProjectComponents].[FolderName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsisProjectComponents].[ProjectName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_SsrsProjectComponents]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[SsrsMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[SsrsServiceUrl]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[SsrsExecutionServiceUrl]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[FolderPath]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[SharepointBaseUrl]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_SsrsProjectComponents].[SharepointFolder]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Adm].[UDTT_UserActionLog]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[CreatedDate]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[EventType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[UserId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[ApplicationName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[FrameworkElement]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[DataContext]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Adm].[UDTT_UserActionLog].[ExtendedProperties]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Adm].[UI_Adm_Roles_RoleName_ProjectConfigId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Roles].[RoleName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Roles].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Roles]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="113" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Adm].[UI_Adm_Users]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Adm].[Users].[Identity]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="114" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[UserActionLog]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[UserActionLogId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[CreatedDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="81" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[EventType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[UserId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="91" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[ApplicationName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[FrameworkElement]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[DataContext]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserActionLog].[ExtendedProperties]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="106" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Adm].[UserRoles]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserRoles].[UserRoleId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserRoles].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[UserRoles].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="107" />
			<AttachedAnnotation Disambiguator="94" />
			<AttachedAnnotation Disambiguator="93" />
		</Element>
		<Element Type="SqlTable" Name="[Adm].[Users]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Users].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Users].[Identity]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Adm].[Users].[DisplayName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="108" />
			<AttachedAnnotation Disambiguator="114" />
		</Element>
		<Element Type="SqlView" Name="[Adm].[vw_ServiceUsage]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT
r.RequestId, 
r.CreatedDateTime,
REPLACE(REPLACE(JSON_VALUE(r.Content, '$."$type"'), N'CD.DLS.API.', N''), N', CD.DLS.API', N'') RequestType,
u.UserId UserId,
u.DisplayName UserName
FROM adm.RequestMessages r
INNER JOIN adm.Users u ON r.RequestFromUserId = u.UserId
WHERE r.MessageType = N'RequestCreated' AND RequestFromUserId <> 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[vw_ServiceUsage].[RequestId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[RequestId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[vw_ServiceUsage].[CreatedDateTime]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[vw_ServiceUsage].[RequestType]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[vw_ServiceUsage].[UserId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[Users].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Adm].[vw_ServiceUsage].[UserName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Adm].[Users].[DisplayName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[Adm].[RequestMessages]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[MessageType]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[RequestMessages].[RequestFromUserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="389" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [Adm].[vw_ServiceUsage]&#xD;&#xA;&#x9;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlSchema" Name="[Analyst]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Analyst].[DF_Analyst_Objects_Created]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[GETDATE()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Analyst].[Objects].[Created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="115" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Analyst].[DF_Analyst_Objects_IsCurrent]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Analyst].[Objects].[IsCurrent]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="116" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Analyst].[DF_Analyst_Objects_IsDeleted]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Analyst].[Objects].[IsDeleted]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="117" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementAttributes_ModelElementTypeAttributeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes].[ModelElementTypeAttributeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeAttributeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="118" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementAttributes_ObjectId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[Objects].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="119" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementAttributess_ModelElementId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="120" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElements_ModelElementTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ModelElementTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes].[ModelElementTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="121" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElements_ObjectId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[Objects].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="122" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElements_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="123" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementTypeAttributes_ModelElementAttributeTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes].[ModelElementAttributeTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributeTypes].[ModelElementAttributeTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributeTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="124" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementTypeAttributes_ModelElementTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes].[ModelElementTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="125" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelElementTypes_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="126" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinks_ElementFromId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinks].[ElementFromId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="127" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinks_ElementToId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinks].[ElementToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="128" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinks_ModelElementTypeAttributeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinks].[ModelElementTypeAttributeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeAttributeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="129" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinks_ModelLinkTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinks].[ModelLinkTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[ModelLinkTypes].[ModelLinkTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[ModelLinkTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="130" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinks_ObjectId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinks].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[Objects].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="131" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_ModelLinkTypes_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[ModelLinkTypes].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinkTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="132" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_Object_Author]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[Objects].[Author_UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="133" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Analyst].[FK_Analyst_Object_PreviousVersion]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Analyst].[Objects].[PreviousVersion_ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Analyst].[Objects].[ObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="134" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelElementAttributes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[ModelElementAttributeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[RefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[Value]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[ModelElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[ModelElementTypeAttributeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributes].[ObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="135" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="120" />
			<AttachedAnnotation Disambiguator="118" />
			<AttachedAnnotation Disambiguator="119" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelElementAttributeTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributeTypes].[ModelElementAttributeTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributeTypes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementAttributeTypes].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="136" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[ModelElementId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[RefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[ModelElementTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElements].[ObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="137" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="123" />
			<AttachedAnnotation Disambiguator="121" />
			<AttachedAnnotation Disambiguator="122" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelElementTypeAttributes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeAttributeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypeAttributes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypeAttributes].[ModelElementAttributeTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypeAttributes].[ExtendedProperties]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="138" />
			<AttachedAnnotation Disambiguator="125" />
			<AttachedAnnotation Disambiguator="124" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelElementTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypes].[ModelElementTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelElementTypes].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="139" />
			<AttachedAnnotation Disambiguator="126" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ModelLinkId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ElementFromId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ElementToId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ModelLinkTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ModelElementTypeAttributeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinks].[ObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="140" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="127" />
			<AttachedAnnotation Disambiguator="128" />
			<AttachedAnnotation Disambiguator="130" />
			<AttachedAnnotation Disambiguator="129" />
			<AttachedAnnotation Disambiguator="131" />
		</Element>
		<Element Type="SqlIndex" Name="[Analyst].[ModelLinks].[IX_Analyst_ModelLinks_ElementFromId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinks].[ElementFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinks].[ModelLinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Analyst].[ModelLinks].[IX_Analyst_ModelLinks_ElementToId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinks].[ModelLinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[ModelLinkTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinkTypes].[ModelLinkTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinkTypes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinkTypes].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[ModelLinkTypes].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="141" />
			<AttachedAnnotation Disambiguator="132" />
		</Element>
		<Element Type="SqlTable" Name="[Analyst].[Objects]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[ObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[Created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="115" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[ValidTo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[IsCurrent]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="116" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[IsDeleted]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="117" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[Author_UserId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Analyst].[Objects].[PreviousVersion_ObjectId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="142" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="133" />
			<AttachedAnnotation Disambiguator="134" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelElementAttributes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelElementAttributes].[ModelElementAttributeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="135" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelElementAttributeTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelElementAttributeTypes].[ModelElementAttributeTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementAttributeTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="136" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelElements]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElements]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="137" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelElementTypeAttributes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelElementTypeAttributes].[ModelElementTypeAttributeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypeAttributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="138" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelElementTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelElementTypes].[ModelElementTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelElementTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="139" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelLinks]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinks].[ModelLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinks]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="140" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_ModelLinkTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[ModelLinkTypes].[ModelLinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[ModelLinkTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="141" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Analyst].[PK_Analyst_Objects]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Analyst].[Objects].[ObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Analyst].[Objects]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="142" />
		</Element>
		<Element Type="SqlTableType" Name="[Analyst].[UDTT_ModelElementTypeAttributes]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Analyst].[UDTT_ModelElementTypeAttributes].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Analyst].[UDTT_ModelElementTypeAttributes].[ModelElementAttributeTypeCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Analyst].[UDTT_ModelElementTypeAttributes].[ExtendedProperties]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Analyst]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Annotate]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[AnnotationElementDescriptivePaths]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementDescriptivePaths].[AnnotationElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementDescriptivePaths].[DescriptivePath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementDescriptivePaths].[DescriptiveRootPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="143" />
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[AnnotationElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[AnnotationElementId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="64" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="44" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[ModelElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="45" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[RefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="46" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="47" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[VersionNumber]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[IsCurrentVersion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElements].[Date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Annotate].[AnnotationElements].[IX_AnnotationElements_CurrentVersion]">
			<Property Name="FilterPredicate">
				<Value><![CDATA[[IsCurrentVersion] = 1]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[AnnotationElementTypeDescriptions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementTypeDescriptions].[AnnotationElementTypeDescriptionsId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementTypeDescriptions].[ElementType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationElementTypeDescriptions].[TypeDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="144" />
		</Element>
		<Element Type="SqlIndex" Name="[Annotate].[AnnotationElementTypeDescriptions].[IX_AnnotationElementTypeDescriptions_ElementType]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationElementTypeDescriptions].[ElementType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Annotate].[AnnotationElementTypeDescriptions].[TypeDescription]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Annotate].[AnnotationElementTypeDescriptions]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[AnnotationViewFields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViewFields].[AnnotationViewFieldId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="66" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="50" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViewFields].[FieldId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="51" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViewFields].[FieldOrder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="145" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[AnnotationViews]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViews].[AnnotationViewId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="67" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViews].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="52" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[AnnotationViews].[ViewName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Annotate].[DF_AnnotationViewFields_FieldOrder]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="145" />
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[ElementLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[ElementLinks].[ElementLinkId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="75" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[ElementLinks].[LinkTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="54" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[ElementLinks].[AnnotationElementFromId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="55" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[ElementLinks].[AnnotationElementToId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="56" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[ElementLinks].[UpdatedVersion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetBusinessDescriptionByMEId]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetBusinessDescriptionByMEId].[@elementid]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetBusinessDescriptionByMEId].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetBusinessDescriptionByMEId].[FieldName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetBusinessDescriptionByMEId].[Value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT f.FieldName
	  ,fv.Value	
  FROM [Annotate].[AnnotationElements] ae
  INNER JOIN [Annotate].[AnnotationViews] av ON av.ProjectConfigId = ae.ProjectConfigId
  INNER JOIN [Annotate].[AnnotationViewFields] avf ON avf.AnnotationViewId = av.AnnotationViewId
  INNER JOIN [Annotate].[Fields] f ON f.FieldId = avf.FieldId
  INNER JOIN [Annotate].[FieldValues] fv ON fv.FieldId = f.FieldId
  WHERE ae.ModelElementId = @elementid AND ae.ProjectConfigId = @projectConfigId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="628" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Annotate].[f_GetBusinessDescriptionByMEId]&#xD;&#xA;(&#xD;&#xA;&#x9;@elementid INT,&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetBusinessDescriptionByMEId].[@elementid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetBusinessDescriptionByMEId].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[f_GetHistory]">
			<Property Name="BodyScript">
				<Value><![CDATA[
    SELECT f.FieldName AS 'Field Name', fv.Value AS 'Value', cu.[DisplayName] AS 'Created By', uu.[DisplayName] AS 'Updated By',
    ae.Date AS 'Date', iif(ae.IsCurrentVersion = '1', N'Current', N'Old')  AS 'Current Version'
    FROM BIDoc.ModelElements me
    INNER JOIN Annotate.AnnotationElements ae ON ae.ModelElementId = me.ModelElementId
    INNER JOIN Annotate.FieldValues fv ON fv.AnnotationElementId = ae.AnnotationElementId
    INNER JOIN Annotate.Fields f ON f.FieldId = fv.FieldId
    INNER JOIN adm.Users cu ON cu.UserId = ae.CreatedBy
    INNER JOIN adm.Users uu ON uu.UserId = ae.UpdatedBy
    WHERE me.ProjectConfigId = @projectConfigId
    AND ae.ProjectConfigId = @projectConfigId
    AND f.ProjectConfigId = @projectConfigId
    AND me.ModelElementId = @modelElementId
    ORDER BY  Date DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[Users].[DisplayName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Date]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetHistory].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetHistory].[@modelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetHistory].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetHistory].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="930" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[f_GetHistory]&#xD;&#xA;&#x9;@modelElementId INT,&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetListLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinks].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinks].[@elementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinks].[@refPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[ElementLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[LinkTypeName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[LinkTypeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[ModelElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[ModelElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[ElementToCaption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[ElementToDescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinks].[UpdatedVersion]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT l.ElementLinkId ,lt.LinkTypeName, lt.LinkTypeId, ef.ModelElementId AS ModelElementFromId, et.ModelElementId AS ModelElementToId, et.Name AS ElementToCaption,
met.RefPath AS ElementToDescriptivePath, UpdatedVersion
FROM Annotate.ElementLinks l
INNER JOIN Annotate.AnnotationElements et ON l.AnnotationElementToId = et.AnnotationElementId
INNER JOIN BIDoc.ModelElements met ON met.ModelElementId = et.ModelElementId
INNER JOIN Annotate.AnnotationElements ef ON l.AnnotationElementFromId = ef.AnnotationElementId
INNER JOIN BIDoc.ModelElements mef ON mef.ModelElementId = ef.ModelElementId
INNER JOIN Annotate.LinkTypes lt ON l.LinkTypeId = lt.LinkTypeId
WHERE lt.ProjectConfigId = @projectConfigId AND et.IsCurrentVersion = 1 AND ef.IsCurrentVersion = 1 AND mef.Type = @elementType
AND (mef.RefPathIntervalStart >= (SELECT RefPathIntervalStart FROM BIDoc.ModelElements WHERE RefPath = @refPath AND ProjectConfigId = @projectConfigId) AND mef.RefPathIntervalStart <= (SELECT RefPathIntervalEnd FROM BIDoc.ModelElements WHERE RefPath = @refPath AND ProjectConfigId = @projectConfigId))]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1252" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_GetListLinks&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER, @elementType NVARCHAR(MAX),@refPath NVARCHAR(MAX))&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinks].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinks].[@elementType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinks].[@refPath]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetListLinksFrom]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinksFrom].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinksFrom].[@modelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[ElementLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[LinkTypeName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[ElementToCaption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[ElementToDescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[LinkTypeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[ModelElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[ModelElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksFrom].[UpdatedVersion]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT l.ElementLinkId ,lt.LinkTypeName, te.Name AS ElementToCaption, ted.DescriptivePath AS ElementToDescriptivePath, lt.LinkTypeId, te.ModelElementId AS ModelElementToId, fe.ModelElementId AS ModelElementFromId, UpdatedVersion
FROM Annotate.ElementLinks l
INNER JOIN Annotate.AnnotationElements fe ON l.AnnotationElementFromId = fe.AnnotationElementId
INNER JOIN Annotate.AnnotationElements te ON l.AnnotationElementToId = te.AnnotationElementId
INNER JOIN BIDoc.ModelElementDescriptivePaths ted ON te.ModelElementId = ted.ModelElementId
INNER JOIN Annotate.LinkTypes lt ON l.LinkTypeId = lt.LinkTypeId
WHERE lt.ProjectConfigId = @projectConfigId AND fe.ModelElementId = @modelElementId AND te.IsCurrentVersion = 1 AND fe.IsCurrentVersion = 1]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="879" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_GetListLinksFrom&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER, @modelElementId INT)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinksFrom].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinksFrom].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetListLinksTo]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinksTo].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetListLinksTo].[@modelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[ElementLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[LinkTypeName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[ElementFromCaption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[ElementFromDescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[LinkTypeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[ModelElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[ModelElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetListLinksTo].[UpdatedVersion]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT l.ElementLinkId ,lt.LinkTypeName, fe.Name AS ElementFromCaption, fed.DescriptivePath AS ElementFromDescriptivePath, lt.LinkTypeId, fe.ModelElementId AS  ModelElementFromId, te.ModelElementId AS ModelElementToId,  UpdatedVersion
FROM Annotate.ElementLinks l
INNER JOIN Annotate.AnnotationElements te ON l.AnnotationElementToId = te.AnnotationElementId
INNER JOIN Annotate.AnnotationElements fe ON l.AnnotationElementFromId = fe.AnnotationElementId
INNER JOIN BIDoc.ModelElementDescriptivePaths fed ON fe.ModelElementId = fed.ModelElementId
INNER JOIN Annotate.LinkTypes lt ON l.LinkTypeId = lt.LinkTypeId
WHERE lt.ProjectConfigId = @projectConfigId AND te.ModelElementId = @modelElementId AND te.IsCurrentVersion = 1 AND fe.IsCurrentVersion = 1]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="883" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_GetListLinksTo&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER, @modelElementId INT)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinksTo].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetListLinksTo].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetViewFieldValues]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldValueId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetViewFieldValues].[@viewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetViewFieldValues].[@modelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValues].[FieldValueId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldValueId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValues].[AnnotationElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValues].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValues].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValues].[Value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT vals.FieldValueId, vals.AnnotationElementId, vals.FieldId, e.ModelElementId, vals.Value
FROM Annotate.AnnotationViewFields vf
INNER JOIN Annotate.FieldValues vals ON vals.FieldId = vf.FieldId
INNER JOIN Annotate.AnnotationElements e ON e.AnnotationElementId = vals.AnnotationElementId
WHERE vf.AnnotationViewId = @viewId AND ISNULL(@modelElementId, e.ModelElementId) = e.ModelElementId
AND e.IsCurrentVersion = 1]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="540" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_GetViewFieldValues&#xD;&#xA;(@viewId INT, @modelElementId INT = NULL)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetViewFieldValues].[@viewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetViewFieldValues].[@modelElementId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_GetViewFieldValuesUnderPath]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldValueId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@viewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[FieldValueId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldValueId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[AnnotationElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[Value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT vals.FieldValueId, vals.AnnotationElementId, vals.FieldId, e.ModelElementId, vals.Value
FROM Annotate.AnnotationViewFields vf
INNER JOIN Annotate.FieldValues vals ON vals.FieldId = vf.FieldId
INNER JOIN Annotate.AnnotationElements e ON e.AnnotationElementId = vals.AnnotationElementId
INNER JOIN BIDoc.ModelElements me ON me.ModelElementId = e.ModelElementId
WHERE vf.AnnotationViewId = @viewId
AND e.IsCurrentVersion = 1

AND
  me.RefPathPrefix >= LEFT(@path, 300) AND me.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  me.RefPath >= @path AND me.RefPath <= @path + N'~'
  AND me.[Type] = @type]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="752" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_GetViewFieldValuesUnderPath&#xD;&#xA;(@viewId INT, @path NVARCHAR(MAX), @type NVARCHAR(200))&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@viewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_GetViewFieldValuesUnderPath].[@type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ListFields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ListFields].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListFields].[Deleted]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[Deleted]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListFields].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListFields].[FieldName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListFields].[UsedInViews]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT f.Deleted, f.FieldId, f.FieldName, IIF((EXISTS (SELECT TOP 1 1 FROM Annotate.AnnotationViewFields vf WHERE vf.FieldId = f.FieldId)), 1, 0) UsedInViews
FROM Annotate.Fields f 
WHERE f.ProjectConfigId = @projectConfigId
AND Deleted = 0]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="345" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ListFields&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ListFields].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ListLinkTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ListLinkTypes].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[Deleted]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListLinkTypes].[Deleted]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[Deleted]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListLinkTypes].[LinkTypeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListLinkTypes].[LinkTypeName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListLinkTypes].[UsedInLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT l.Deleted, l.LinkTypeId, l.LinkTypeName, IIF((EXISTS (SELECT TOP 1 1 FROM Annotate.ElementLinks el WHERE el.LinkTypeId = l.LinkTypeId)), 1, 0) UsedInLinks
FROM Annotate.LinkTypes l
WHERE l.ProjectConfigId = @projectConfigId
AND DELETED = 0]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="354" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ListLinkTypes&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ListLinkTypes].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ListProjectViews]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ListProjectViews].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListProjectViews].[AnnotationViewId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListProjectViews].[ViewName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViews].[ViewName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListProjectViews].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListProjectViews].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT AnnotationViewId, ViewName, dsc.ElementType, dsc.TypeDescription
FROM Annotate.AnnotationViews vw
LEFT JOIN BIDoc.ModelElementTypeDescriptions dsc ON N'Type_' + dsc.ElementType = vw.ViewName
WHERE vw.ProjectConfigId = @projectConfigId]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="352" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ListProjectViews&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ListProjectViews].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ListViewFields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ListViewFields].[@viewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListViewFields].[AnnotationViewId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListViewFields].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListViewFields].[FieldName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ListViewFields].[FieldOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT vf.AnnotationViewId, f.FieldId, f.FieldName, vf.FieldOrder 
FROM Annotate.Fields f 
INNER JOIN Annotate.AnnotationViewFields vf ON f.FieldId = vf.FieldId
--LEFT JOIN BIDoc.ModelElementTypeDescriptions dsc ON N'Type_' + dsc.ElementType = 
WHERE vf.AnnotationViewId = @viewId]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="368" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ListViewFields&#xD;&#xA;(@viewId INT)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ListViewFields].[@viewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ProjectDictionaryFieldsMapping]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[FieldName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[FieldOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[ElementType]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[AnnotationViewId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT f.FieldId, f.FieldName, vf.FieldOrder, REPLACE(v.ViewName, N'Type_', N'') ElementType, v.AnnotationViewId
FROM Annotate.Fields f 
INNER JOIN Annotate.AnnotationViewFields vf ON f.FieldId = vf.FieldId
INNER JOIN Annotate.AnnotationViews v ON vf.AnnotationViewId = v.AnnotationViewId
WHERE v.ProjectConfigId = @projectconfigid AND f.Deleted = 0]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="475" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ProjectDictionaryFieldsMapping&#xD;&#xA;(@projectconfigid UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ProjectDictionaryFieldsMapping].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ProjectDictionaryValues]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldValueId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ProjectDictionaryValues].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[AnnotationElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[FieldName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[FieldId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[Fields].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[Value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectDictionaryValues].[FieldValueId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Annotate].[FieldValues].[FieldValueId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT ae.AnnotationElementId 
      ,ae.ModelElementId
	  ,f.FieldName
	  ,f.FieldId
	  ,fv.Value
	  ,fv.FieldValueId
  FROM [Annotate].[AnnotationElements] ae
  INNER JOIN [Annotate].[FieldValues] fv ON fv.AnnotationElementId = ae.AnnotationElementId
  INNER JOIN [Annotate].[Fields] f ON f.FieldId = fv.FieldId
  WHERE ae.ProjectConfigId = @projectconfigid AND ae.IsCurrentVersion = 1 AND ae.ModelElementId IS NOT NULL]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="545" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ProjectDictionaryValues&#xD;&#xA;(@projectconfigid UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ProjectDictionaryValues].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ProjectOlapAttributesLookupTable]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[CubeAttributeElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[DimensionAttributeElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[AttributeName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[CubeDimensionName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[DatabaseDimensionName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[HierarchyName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[HierarchyLevelName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT DISTINCT

e.RefPath, e.ModelElementId CubeAttributeElementId, da.ModelElementId DimensionAttributeElementId,
	e.Caption AttributeName, cde.Caption CubeDimensionName, dde.Caption DatabaseDimensionName, dhe.Caption HierarchyName, hle.Caption HierarchyLevelName, da.Type ElementType

FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks dal ON dal.ElementFromId = e.ModelElementId AND dal.Type = N'DatabaseDimensionAttribute'
INNER JOIN BIDoc.ModelElements da ON da.ModelElementId = dal.ElementToId
INNER JOIN BIDoc.ModelLinks cdl ON cdl.ElementFromId = e.ModelElementId AND cdl.Type = N'parent'
INNER JOIN BIDoc.ModelElements cde ON cde.ModelElementId = cdl.ElementToId
INNER JOIN BIDoc.ModelLinks ddl ON ddl.ElementFromId = cde.ModelElementId AND ddl.Type = N'DatabaseDimension'
INNER JOIN BIDoc.ModelElements dde ON ddl.ElementToId = dde.ModelElementId
-- hierarchies
LEFT JOIN BIDoc.ModelLinks dhl ON dhl.ElementToId = dde.ModelElementId AND dhl.Type = N'parent'
LEFT JOIN BIDoc.ModelElements dhe ON dhe.ModelElementId = dhl.ElementFromId AND dhe.Type = N'CD.DLS.Model.Mssql.Ssas.HierarchyElement'
-- hierarchy levels
LEFT JOIN BIDoc.ModelLinks hll ON hll.ElementToId = dhe.ModelElementId AND hll.Type = N'parent'
LEFT JOIN BIDoc.ModelElements hle ON hle.ModelElementId = hll.ElementFromId
-- level attributes
LEFT JOIN BIDoc.ModelLinks hlal ON hlal.ElementFromId = hle.ModelElementId AND hlal.Type = N'Attribute'

WHERE e.ProjectConfigId = @projectconfigid
AND e.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement')
AND ISNULL(hlal.ElementToId, da.ModelElementId) = da.ModelElementId]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1755" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ProjectOlapAttributesLookupTable&#xD;&#xA;(@projectconfigid UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ProjectOlapAttributesLookupTable].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[MeasureElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[MeasureName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT
e.RefPath, e.ModelElementId MeasureElementId, e.Caption MeasureName, e.Type ElementType
FROM BIDoc.ModelElements e
WHERE e.ProjectConfigId = @projectconfigid
AND e.Type IN (N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement', N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement')
AND e.RefPath NOT LIKE 'SSRS%']]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="445" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Annotate.f_ProjectOlapMeasuresLookupTable&#xD;&#xA;(@projectconfigid UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[f_ProjectOlapMeasuresLookupTable].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[Fields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[Fields].[FieldId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="68" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[Fields].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="53" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[Fields].[FieldName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[Fields].[Deleted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="40" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[FieldValues]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[FieldValues].[FieldValueId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="65" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[FieldValues].[FieldId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="48" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[FieldValues].[AnnotationElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="49" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[FieldValues].[Value]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[FieldValues].[UpdatedVersion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Annotate].[LinkTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[LinkTypes].[LinkTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="76" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[LinkTypes].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="57" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[LinkTypes].[LinkTypeName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Annotate].[LinkTypes].[Deleted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="43" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Annotate].[PK_Annotate.AnnotationElementTypeDescriptions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationElementTypeDescriptions].[AnnotationElementTypeDescriptionsId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElementTypeDescriptions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="144" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Annotate].[PK_Annotate_AnnotationElementDescriptivePaths]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Annotate].[AnnotationElementDescriptivePaths].[AnnotationElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Annotate].[AnnotationElementDescriptivePaths]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="143" />
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_CreateField]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF EXISTS(SELECT TOP 1 1 FROM Annotate.Fields WHERE FieldName = @fieldName AND ProjectConfigId = @projectConfigId)
BEGIN
	UPDATE Annotate.Fields SET Deleted = 0 WHERE FieldName = @fieldName AND ProjectConfigId = @projectConfigId
END
ELSE
BEGIN
	INSERT INTO Annotate.Fields(FieldName, ProjectConfigId, Deleted) VALUES(@fieldName, @projectConfigId, 0)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateField].[@fieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateField].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_CreateField].[@fieldName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_CreateField].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="476" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_CreateField]&#xD;&#xA;&#x9;@fieldName NVARCHAR(MAX),&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_CreateLinkType]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF EXISTS(SELECT TOP 1 1 FROM Annotate.LinkTypes WHERE LinkTypeName = @linkTypeName AND ProjectConfigId = @projectConfigId)
BEGIN
	UPDATE Annotate.LinkTypes SET Deleted = 0 WHERE LinkTypeName = @linkTypeName AND ProjectConfigId = @projectConfigId
END
ELSE
BEGIN
	INSERT INTO Annotate.LinkTypes(LinkTypeName, ProjectConfigId, Deleted) VALUES(@linkTypeName, @projectConfigId, 0)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateLinkType].[@linkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateLinkType].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_CreateLinkType].[@linkTypeName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_CreateLinkType].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="509" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_CreateLinkType]&#xD;&#xA;&#x9;@linkTypeName NVARCHAR(MAX),&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_CreateViews]">
			<Property Name="BodyScript">
				<Value><![CDATA[WITH viewNames AS
(
	SELECT CONVERT(NVARCHAR(255), N'Default') AS ViewName

	UNION 
	
	SELECT N'Type_' + hld.DescendantType FROM [BIDoc].[HighLevelTypeDescendants] hld
	WHERE hld.ParentType = N'CD.DLS.Model.Mssql.SolutionModelElement'
)
SELECT ViewName 
INTO #viewNames
FROM viewNames

INSERT INTO Annotate.AnnotationViews
(ProjectConfigId, ViewName)
SELECT @projectConfigId, vn.ViewName
FROM #viewNames vn
LEFT JOIN Annotate.AnnotationViews vw ON vw.ProjectConfigId = @projectConfigId AND vw.ViewName = vn.ViewName
WHERE vw.ViewName IS NULL

-- IN FIELDS
IF NOT EXISTS(SELECT TOP 1 1 FROM Annotate.Fields f WHERE f.ProjectConfigId = @projectConfigId AND f.FieldName = N'Name')
BEGIN
	INSERT INTO Annotate.Fields
	(ProjectConfigId, FieldName)
	VALUES (@projectConfigId, N'Name')
END

IF NOT EXISTS(SELECT TOP 1 1 FROM Annotate.Fields f WHERE f.ProjectConfigId = @projectConfigId AND f.FieldName = N'Description')
BEGIN
	INSERT INTO Annotate.Fields
	(ProjectConfigId, FieldName)
	VALUES (@projectConfigId, N'Description')
END

--IN ANNTOTATIONVIEWFIELDS
INSERT INTO Annotate.AnnotationViewFields
(AnnotationViewId, FieldId, FieldOrder)
SELECT vw.AnnotationViewId, f.FieldId, IIF(f.FieldName = N'Name', 1, 2)
FROM Annotate.AnnotationViews vw
INNER JOIN Annotate.Fields f ON f.ProjectConfigId = vw.ProjectConfigId
LEFT JOIN Annotate.AnnotationViewFields vf ON vf.FieldId = f.FieldId AND vf.AnnotationViewId = vw.AnnotationViewId
WHERE vw.ProjectConfigId = @projectConfigId AND f.FieldName IN (N'Name', N'Description') AND vf.AnnotationViewFieldId IS NULL

DROP TABLE #viewNames]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[DescendantType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[ParentType]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateViews].[#viewNames]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateViews].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_CreateViews].[#viewNames].[ViewName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViews].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewFieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_CreateViews].[CTE1].[viewNames]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Annotate].[sp_CreateViews].[CTE1].[viewNames].[ViewName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_CreateViews].[#viewNames]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Annotate].[sp_CreateViews].[#viewNames].[ViewName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_CreateViews].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1727" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_CreateViews]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS&#xD;&#xA;-- IN ANNOTATIONVIEW&#xD;&#xA;;" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_DeleteField]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE  Annotate.Fields
SET Deleted = 1 WHERE FieldId = @fieldId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_DeleteField].[@fieldId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_DeleteField].[@fieldId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="132" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_DeleteField]&#xD;&#xA;&#x9;@fieldId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_DeleteLink]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE  Annotate.ElementLinks
SET UpdatedVersion = 1 WHERE ElementLinkId = @linkId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[ElementLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_DeleteLink].[@linkId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_DeleteLink].[@linkId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="148" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_DeleteLink]&#xD;&#xA;&#x9;@linkId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_DeleteLinkType]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE  Annotate.LinkTypes
SET Deleted = 1 WHERE LinkTypeId = @linkTypeId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[LinkTypes]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[LinkTypes].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_DeleteLinkType].[@linkTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_DeleteLinkType].[@linkTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="147" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_DeleteLinkType]&#xD;&#xA;&#x9;@linkTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_UpdateElementFields]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT DISTINCT ae.AnnotationElementId, ae.ModelElementId
INTO #copiedElementIds
FROM Annotate.AnnotationElements ae
INNER JOIN @modifiedModelElementIds me ON me.Id = ae.ModelElementId
WHERE ae.IsCurrentVersion = 1
/*
LEFT JOIN @fieldValues v ON ae.ModelElementId = v.ModelElementId
LEFT JOIN @links l ON l.ModelElementFromId = v.ModelElementId
WHERE ae.IsCurrentVersion = 1 AND (l.ModelElementFromId IS NOT NULL OR v.ModelElementId IS NOT NULL)
*/

-- copy existing elements with new versions
CREATE TABLE #insertedElements
(
[ModelElementId] INT,
[AnnotationElementId] INT
)

INSERT INTO Annotate.AnnotationElements(
	ProjectConfigId
	,ModelElementId
	,[RefPath]
	,[Name]
	,[CreatedBy]
	,[UpdatedBy]
	,[VersionNumber]
	,[IsCurrentVersion]
	,[Date]
	)

OUTPUT
inserted.ModelElementId
,inserted.AnnotationElementId
INTO #insertedElements

SELECT
ee.ProjectConfigId
,ee.ModelElementId
,ee.RefPath
,ee.Name
,ee.CreatedBy
,@userId UpdatedBy
,VersionNumber + 1
,1 IsCurrentVersion
,GETDATE()
FROM Annotate.AnnotationElements ee
INNER JOIN #copiedElementIds ce ON ee.AnnotationElementId = ce.AnnotationElementId
WHERE ee.IsCurrentVersion = 1

-- copy field values
INSERT INTO Annotate.FieldValues(
	FieldId
	,AnnotationElementId
	,[Value]
	,UpdatedVersion
	)
SELECT
	fv.FieldId
	,ie.AnnotationElementId
	,fv.Value
	,fv.UpdatedVersion
FROM FieldValues fv
INNER JOIN Annotate.Fields f ON f.FieldId = fv.FieldId
INNER JOIN #copiedElementIds cid ON cid.AnnotationElementId = fv.AnnotationElementId
INNER JOIN #insertedElements ie ON ie.ModelElementId = cid.ModelElementId AND f.Deleted = 0

-- copy links
/*
INSERT INTO Annotate.ElementLinks(
	LinkTypeId,
	AnnotationElementFromId,
	AnnotationElementToId,
	UpdatedVersion
	)
SELECT
	l.LinkTypeId,
	ie.AnnotationElementId,
	l.AnnotationElementToId,
	l.UpdatedVersion
FROM Annotate.ElementLinks l
INNER JOIN #copiedElementIds cid ON cid.AnnotationElementId = l.AnnotationElementFromId
INNER JOIN #insertedElements ie ON ie.ModelElementId = cid.ModelElementId
*/

-- set old elements as not current
UPDATE ae SET IsCurrentVersion = 0 
FROM  Annotate.AnnotationElements ae
INNER JOIN #copiedElementIds ce ON ae.AnnotationElementId = ce.AnnotationElementId

-- add annotation elements if no previous version exists
INSERT INTO Annotate.AnnotationElements(ProjectConfigId, RefPath, ModelElementId, Name, VersionNumber, IsCurrentVersion, CreatedBy, UpdatedBy, Date)
SELECT @projectConfigId, e.RefPath, e.ModelElementId, e.Caption, 1, 1, @userId, @userId, GETDATE()
FROM (
	SELECT DISTINCT ModelElementId FROM @fieldValues
	UNION
	SELECT DISTINCT ModelElementFromId FROM @links
	UNION
	SELECT DISTINCT ModelElementToId FROM @links
	) v
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = v.ModelElementId
LEFT JOIN Annotate.AnnotationElements existent ON existent.ProjectConfigId = @projectConfigId AND existent.RefPath = e.RefPath
WHERE existent.AnnotationElementId IS NULL

-- merge field values
MERGE Annotate.FieldValues AS t 
USING (
	SELECT  e.AnnotationElementId, fv.FieldId, fv.Value, e.VersionNumber
	FROM @fieldValues fv
	INNER JOIN Annotate.AnnotationElements e ON fv.ModelElementId = e.ModelElementId AND e.IsCurrentVersion = 1
	) AS s
ON t.AnnotationElementId = s.AnnotationElementId AND t.FieldId = s.FieldId
WHEN NOT MATCHED THEN INSERT([AnnotationElementId], [FieldId], [Value], [UpdatedVersion])
VALUES(
[AnnotationElementId], [FieldId], [Value], VersionNumber
)
WHEN MATCHED THEN UPDATE SET t.[Value] = s.[Value], t.[UpdatedVersion] = s.[VersionNumber];

-- merge links
MERGE Annotate.ElementLinks AS t 
USING (
	SELECT  ef.AnnotationElementId AnnotationElementFromId, et.AnnotationElementId AnnotationElementToId, l.LinkTypeId, ef.VersionNumber
	FROM @links l
	INNER JOIN Annotate.AnnotationElements ef ON l.ModelElementFromId = ef.ModelElementId AND ef.IsCurrentVersion = 1
	INNER JOIN Annotate.AnnotationElements et ON l.ModelElementToId = et.ModelElementId AND et.IsCurrentVersion = 1
	) AS s
ON t.AnnotationElementFromId = s.AnnotationElementFromId AND t.AnnotationElementToId = s.AnnotationElementToId AND t.LinkTypeId = s.LinkTypeId
WHEN NOT MATCHED THEN INSERT([LinkTypeId], [AnnotationElementFromId], [AnnotationElementToId],  [UpdatedVersion])
VALUES(
[LinkTypeId], [AnnotationElementFromId], [AnnotationElementToId], VersionNumber
);
--WHEN NOT MATCHED BY SOURCE THEN DELETE;

DROP TABLE #insertedElements
DROP TABLE #copiedElementIds]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@modifiedModelElementIds]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@modifiedModelElementIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Date]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#insertedElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#insertedElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[Deleted]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[#insertedElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[FieldId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[UpdatedVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateElementFields].[@links].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[LinkTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[AnnotationElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[ElementLinks].[UpdatedVersion]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[VersionNumber]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateElementFields].[#insertedElements]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[#insertedElements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[#insertedElements].[AnnotationElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds].[AnnotationElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Annotate].[sp_UpdateElementFields].[#copiedElementIds].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateElementFields].[@fieldValues]" Disambiguator="18">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[FieldId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@fieldValues].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateElementFields].[@links]" Disambiguator="19">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementFromId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@links].[ModelElementToId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@links].[LinkTypeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateElementFields].[@modifiedModelElementIds]" Disambiguator="20">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateElementFields].[@modifiedModelElementIds].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateElementFields].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateElementFields].[@fieldValues]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Annotate].[UDTT_FieldValues]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateElementFields].[@links]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Annotate].[UDTT_ElementLinks]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateElementFields].[@modifiedModelElementIds]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateElementFields].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4808" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_UpdateElementFields]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@fieldValues  [Annotate].[UDTT_FieldValues] READONLY,&#xD;&#xA;&#x9;@links [Annotate].[UDTT_ElementLinks] READONLY,&#xD;&#xA;&#x9;@modifiedModelElementIds [BIDoc].[UDTT_IdList] READONLY,&#xD;&#xA;&#x9;@userId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_UpdateModelElememntReferences]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE  Annotate.AnnotationElements 
SET     ModelElementId = m.ModelElementId
FROM    Annotate.AnnotationElements a
INNER JOIN    BIDoc.ModelElements m ON m.RefPath = a.RefPath AND m.ProjectConfigId = @projectconfigId  AND a.ProjectConfigId = @projectconfigId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateModelElememntReferences].[@projectconfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateModelElememntReferences].[@projectconfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="369" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_UpdateModelElememntReferences]&#xD;&#xA;&#x9;@projectconfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Annotate].[sp_UpdateViewFields]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE FROM Annotate.AnnotationViewFields WHERE @annotationViewId = AnnotationViewId

INSERT INTO Annotate.AnnotationViewFields(AnnotationViewId, FieldId, FieldOrder)
SELECT @annotationViewId, f.Id, f.[Order]
FROM @fields f]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateViewFields].[@annotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[AnnotationViewId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationViewFields].[FieldOrder]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateViewFields].[@fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateViewFields].[@fields].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateViewFields].[@fields].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Annotate].[sp_UpdateViewFields].[@fields]" Disambiguator="27">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateViewFields].[@fields].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Annotate].[sp_UpdateViewFields].[@fields].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateViewFields].[@annotationViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Annotate].[sp_UpdateViewFields].[@fields]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_OrderedIdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="357" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Annotate].[sp_UpdateViewFields]&#xD;&#xA;&#x9;@annotationViewId INT,&#xD;&#xA;&#x9;@fields [BIDoc].[UDTT_OrderedIdList] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[Annotate].[UDTT_ElementLinks]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_ElementLinks].[ModelElementFromId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_ElementLinks].[ModelElementToId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_ElementLinks].[LinkTypeId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Annotate].[UDTT_FieldValues]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_FieldValues].[ModelElementId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_FieldValues].[FieldId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Annotate].[UDTT_FieldValues].[Value]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Annotate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[BIDoc]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[BasicGraphLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphLinks].[LinkType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphLinks].[NodeFromId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphLinks].[NodeToId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="146" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="147" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="148" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphLinks].[IX_BIDoc_BasicGraphLinks_LinkType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphLinks].[IX_BIDoc_BasicGraphLinks_NodeFromId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphLinks].[IX_BIDoc_BasicGraphLinks_NodeToId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[BIDoc].[BasicGraphLinksSequence]">
			<Property Name="CacheSize" Value="10" />
			<Property Name="Increment" Value="1" />
			<Property Name="StartValue" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bigint]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[BasicGraphNodes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[NodeType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[ParentId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[GraphKind]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[SourceElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="35" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="36" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="149" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="150" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="151" />
		</Element>
		<Element Type="SqlIndex" Name="[BIdoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_GraphKind_SourceElement]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_GrphKind_NodeType_ProjectConfigId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_GrphKind_ProjectConfigId_NodeType_RefPathIntervalStart]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_GrphKind_ProjectConfigId_RefPathIntervalStart]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_ParentId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[BIDoc].[BasicGraphNodesSequence]">
			<Property Name="CacheSize" Value="10" />
			<Property Name="Increment" Value="1" />
			<Property Name="StartValue" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bigint]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[DataMessages]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessages].[MessageId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessages].[SourceElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessages].[TargetElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessages].[Message]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessages].[DataMessagesTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="152" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="153" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="154" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="155" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[DataMessagesType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessagesType].[DataMessagesTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessagesType].[DataMessageType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataMessagesType].[DataMessageCode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="156" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[DataTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataTypes].[DataTypesId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[DataTypes].[DataTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="157" />
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphDocuments]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphDocumentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[Content]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphDocuments].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphDocuments].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphDocuments].[@documenttype]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocuments].[GraphDocumentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[GraphDocumentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocuments].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocuments].[DocumentType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocuments].[GraphNode_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [GraphDocumentId]
      ,[Content]
      ,[DocumentType]
      ,[GraphNode_Id]
  FROM [BIDoc].[GraphDocuments] d
INNER JOIN BasicGraphNodes n ON d.GraphNode_Id = n.BasicGraphNodeId
WHERE n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid AND ISNULL(@documenttype, d.DocumentType) = d.DocumentType
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="508" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphDocuments]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@documenttype NVARCHAR(50) = NULL&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphDocuments].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphDocuments].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphDocuments].[@documenttype]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphDocumentsForNode]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphDocumentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[Content]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphDocumentsForNode].[@documenttype]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphDocumentsForNode].[@nodeid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocumentsForNode].[GraphDocumentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[GraphDocumentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocumentsForNode].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocumentsForNode].[DocumentType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphDocumentsForNode].[GraphNode_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [GraphDocumentId]
      ,[Content]
      ,[DocumentType]
      ,[GraphNode_Id]
  FROM [BIDoc].[GraphDocuments] d
  --INNER JOIN [BIDoc].f_GetModelElements e ON d.NodeRefPath = e.RefPath 
  WHERE ISNULL(@documenttype, d.DocumentType) = d.DocumentType AND d.GraphNode_Id = @nodeid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="433" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphDocumentsForNode]&#xD;&#xA;(&#xD;&#xA;&#x9;@nodeid INT,&#xD;&#xA;&#x9;@documenttype NVARCHAR(50) = NULL&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphDocumentsForNode].[@nodeid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphDocumentsForNode].[@documenttype]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinks].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinks].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinks].[@linktype]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinks].[BasicGraphLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinks].[LinkType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinks].[NodeFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinks].[NodeToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinks].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT BasicGraphLinkId,LinkType,NodeFromId ,NodeToId,ExtendedProperties 
FROM   
(
SELECT *,Row_number() OVER(PARTITION BY nodeFromId,NodeToID ORDER BY nodeFromId,NodeToID) rn 
FROM [BIDoc].[BasicGraphLinks] l
INNER JOIN BIDoc.BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
where n.GraphKind = @graphkind and n.ProjectConfigId = @projectconfigid  AND ISNULL(@linktype, l.LinkType) = l.LinkType
) t 
WHERE  rn = 1 

)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="608" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphLinks]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@linktype NVARCHAR(50) = NULL&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinks].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinks].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinks].[@linktype]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphLinksUnderPath]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinksUnderPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinksUnderPath].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinksUnderPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphLinksUnderPath].[@linktype]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinksUnderPath].[BasicGraphLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinksUnderPath].[LinkType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinksUnderPath].[NodeFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinksUnderPath].[NodeToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphLinksUnderPath].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [BasicGraphLinkId]
      ,[LinkType]
      ,[NodeFromId]
      ,[NodeToId]
	  ,l.ExtendedProperties
FROM [BIDoc].[BasicGraphLinks] l
INNER JOIN BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
INNER JOIN ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE 
e.RefPathPrefix >= LEFT(@path, 300) AND e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND
n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid AND ISNULL(@linktype, l.LinkType) = l.LinkType
AND e.RefPath >= @path AND e.RefPath <= @path + N'~'

--LEFT(e.RefPath, LEN(@path)) = @path -- e.RefPath LIKE Adm.f_EscapeForLike(@path) + '%'  ESCAPE '\'
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="56" />
							<Property Name="Length" Value="911" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="/*&#xD;&#xA;Includes only links originating under the path&#xD;&#xA;*/&#xD;&#xA;CREATE FUNCTION [BIDoc].[f_GetGraphLinksUnderPath]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@linktype NVARCHAR(50) = NULL&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinksUnderPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinksUnderPath].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinksUnderPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphLinksUnderPath].[@linktype]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphNodeIdByElementId]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByElementId].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByElementId].[@elementid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodeIdByElementId].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId 
WHERE GraphKind = @graphkind AND e.ModelElementId = @elementid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="332" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphNodeIdByElementId]&#xD;&#xA;(&#xD;&#xA;&#x9;@elementid INT,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodeIdByElementId].[@elementid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodeIdByElementId].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphNodeIdByRefPath]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@refpath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId 
WHERE GraphKind = @graphkind AND e.ProjectConfigId = @projectconfigid AND e.RefPathPrefix = CONVERT(NVARCHAR(300), LEFT(@refpath, 300)) AND e.RefPath = @refPath
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="473" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphNodeIdByRefPath]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@refpath NVARCHAR(MAX)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[@refpath]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetGraphNodes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodes].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodes].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetGraphNodes].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [BasicGraphNodeId]
      ,[Name]
      ,[NodeType]
      ,[Description]
      ,[ParentId]
      ,[GraphKind]
      ,[ProjectConfigId]
      ,[SourceElementId]
      ,[TopologicalOrder]
FROM BIDoc.BasicGraphNodes 
WHERE GraphKind = @graphkind AND ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="440" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetGraphNodes]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodes].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetGraphNodes].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetMessages]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[TargetElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType].[DataMessagesTypeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[DataMessagesTypeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[TargetElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType].[DataMessageType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[Message]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetMessages].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[SourceName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[SourcePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[TargetName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[TargetPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[DataMessageType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[DataMessagesType].[DataMessageType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetMessages].[Message]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[DataMessages].[Message]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT 
se.[Caption] AS 'SourceName'
,sed.[DescriptiveRootPath] AS 'SourcePath'
,te.[Caption]	AS'TargetName'
,ted.[DescriptiveRootPath] AS 'TargetPath'
,dmt.[DataMessageType]
,dm.[Message]
FROM BIDoc.DataMessages dm
INNER JOIN BIDoc.ModelElements se ON se.ModelElementId = dm.SourceElementId
INNER JOIN BIDoc.ModelElements te ON te.ModelElementId = dm.TargetElementId
INNER JOIN BIDoc.DataMessagesType dmt ON dmt.DataMessagesTypeId = dm.DataMessagesTypeId
INNER JOIN BIDoc.ModelElementDescriptivePaths sed ON sed.ModelElementId = dm.SourceElementId
INNER JOIN BIDoc.ModelElementDescriptivePaths ted ON Ted.ModelElementId = dm.TargetElementId
WHERE se.ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="812" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetMessages]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetMessages].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementById]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementById].[@elementid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[Definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementById].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] WHERE ModelElementId = @elementid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="319" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementById]&#xD;&#xA;(&#xD;&#xA;&#x9;@elementid INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementById].[@elementid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementByNodeId]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementByNodeId].[@nodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[Definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementByNodeId].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,e.[Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e
  INNER JOIN BIDoc.BasicGraphNodes n ON n.SourceElementId = e.ModelElementId 
  WHERE n.BasicGraphNodeId = @nodeId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="419" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementByNodeId]&#xD;&#xA;(&#xD;&#xA;&#x9;@nodeId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementByNodeId].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[BIDoc].[f_GetModelElementDescriptivePath]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementDescriptivePath].[@modelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN (SELECT DescriptivePath FROM BIDoc.ModelElementDescriptivePaths WHERE ModelElementId = @modelElementId)
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="238" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementDescriptivePath]&#xD;&#xA;(&#xD;&#xA;&#x9;@modelElementId int&#xD;&#xA;)&#xD;&#xA;RETURNS NVARCHAR(MAX)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementDescriptivePath].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementIdByRefPath]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [ModelElementId]
FROM [BIDoc].[ModelElements] WHERE ProjectConfigId = @projectconfigid AND RefPathPrefix = CONVERT(NVARCHAR(300), LEFT(@path, 300))
	AND RefPath = @path
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="329" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementIdByRefPath]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementIdByRefPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementIdByRefPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElements].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[Definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElements].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] WHERE ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="342" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElements]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElements].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementsByIds]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsByIds].[@idList]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsByIds].[@idList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsByIds].[@idList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsByIds].[@idList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[Definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsByIds].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[f_GetModelElementsByIds].[@idList]" Disambiguator="17">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[f_GetModelElementsByIds].[@idList].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e
  INNER JOIN @idList l ON e.ModelElementId = l.Id

  UNION ALL

SELECT DISTINCT
		e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,e.[Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM @idList l
  INNER JOIN BIDoc.ModelLinks lnk ON lnk.ElementFromId = l.Id
  INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = lnk.ElementToId
  LEFT JOIN @idList ld ON ld.Id = e.ModelElementId
  WHERE lnk.Type <> N'parent' AND ld.Id IS NULL
  
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="819" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementsByIds]&#xD;&#xA;(&#xD;&#xA;&#x9;@idList [BIDoc].[UDTT_IdList] READONLY&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementsByIds].[@idList]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementsNoDef]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsNoDef].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[Definition]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsNoDef].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,NULL [Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] WHERE ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="352" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementsNoDef]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementsNoDef].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[@rootId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[Definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT DISTINCT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e 
  INNER JOIN BIDoc.HigherLevelElementAncestors a ON a.AncestorElementId = @rootId AND a.DetailLevel = 2 AND a.SouceElementId = e.ModelElementId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="455" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementsSecondLevelAncestor]&#xD;&#xA;(&#xD;&#xA;&#x9;@rootId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementsSecondLevelAncestor].[@rootId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelElementType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementType].[@modelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelElementType].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
	SELECT Type FROM BIDoc.ModelElements WHERE ModelElementId = @modelElementId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="186" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelElementType]&#xD;&#xA;(&#x9;&#xD;&#xA;&#x9;@modelElementId INT &#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelElementType].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelLinks].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinks].[ModelLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinks].[ElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinks].[ElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinks].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinks].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN [BIDoc].ModelElements e ON l.ElementFromId = e.ModelElementId
  WHERE e.ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="389" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelLinks]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelLinks].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelLinksFromElementIds]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelLinksFromElementIds].[@idList]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelLinksFromElementIds].[@idList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[ModelLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[ElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[ElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[f_GetModelLinksFromElementIds].[@idList]" Disambiguator="16">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[f_GetModelLinksFromElementIds].[@idList].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN @idList lst ON l.ElementFromId = lst.Id
  WHERE l.Type <> N'parent'
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="369" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelLinksFromElementIds]&#xD;&#xA;(&#xD;&#xA;&#x9;@idList [BIDoc].[UDTT_IdList] READONLY&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelLinksFromElementIds].[@idList]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[@rootId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[ModelLinkId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[ElementFromId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[ElementToId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[ExtendedProperties]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT DISTINCT l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN [BIDoc].ModelElements ef ON l.ElementFromId = ef.ModelElementId
  INNER JOIN [BIDoc].ModelElements et ON l.ElementToId = et.ModelElementId
  INNER JOIN BIDoc.HigherLevelElementAncestors afrom ON afrom.AncestorElementId = @rootId AND afrom.DetailLevel = 2 AND afrom.SouceElementId = ef.ModelElementId
  INNER JOIN BIDoc.HigherLevelElementAncestors ato ON ato.AncestorElementId = @rootId AND ato.DetailLevel = 2 AND ato.SouceElementId = et.ModelElementId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="744" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [BIDoc].[f_GetModelLinksSecondLevelAncestors]&#xD;&#xA;(&#xD;&#xA;&#x9;@rootId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[f_GetModelLinksSecondLevelAncestors].[@rootId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_BasciGraphLinks_NodeFromId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="147" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_BasciGraphLinks_NodeToId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="148" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_BasciGraphNodes_ProjectConfig]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="151" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_BasciGraphNodes_SourceElement]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="150" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_DataMessages_DataMessagesTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[DataMessages].[DataMessagesTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[DataMessagesType].[DataMessagesTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[DataMessagesType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="155" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_DataMessages_SourceId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="153" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_DataMessages_TargetId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[DataMessages].[TargetElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="154" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_GraphDocuments_BIDoc_BasicGraphInfoNodes_GraphNode_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="158" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_LineageGridHistory_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="159" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_LineageGridHistory_SourceElementId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="160" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_LineageGridHistory_TargetElementId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="161" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_LineageGridHistory_UserId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[Users].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[Users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="162" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_ModelElements_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="163" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_ModelLinks_ElementFromId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="164" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_ModelLinks_ElementToId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="165" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_BIDoc_SourceDataTypes_DataTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes].[DataTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[DataTypes].[DataTypesId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[DataTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="166" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_HigherLevelElementAncestors_AncestorElement]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="167" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_HigherLevelElementAncestors_AncestorNode]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="168" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_HigherLevelElementAncestors_SourceElement]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="169" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[BIDoc].[FK_HigherLevelElementAncestors_SourceNode]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="170" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[GraphDocuments]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[GraphDocuments].[GraphDocumentId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[GraphDocuments].[Content]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[GraphDocuments].[DocumentType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[GraphDocuments].[GraphNode_Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="171" />
			<AttachedAnnotation Disambiguator="158" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[HigherLevelElementAncestors]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[HigherLevelElementAncestorsId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="172" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="169" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="167" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="170" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="168" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[HigherLevelElementAncestors].[IX_HigherLevelElementAncestors_AncestorElementId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[HigherLevelElementAncestors].[IX_HigherLevelElementAncestors_SouceModelElementId_DetailLevel]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[HighLevelTypeDescendants]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HighLevelTypeDescendants].[HighLevelTypeDescendantId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="73" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HighLevelTypeDescendants].[ParentType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HighLevelTypeDescendants].[DescendantType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[HighLevelTypeDescendants].[NodeType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[LineageGridHistory]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[LineageGridHistoryId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[SourceRootElementPath]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[TargetRootElementPath]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[SourceElementType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[TargetElementType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[CreatedDateTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[LineageGridHistory].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="173" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="159" />
			<AttachedAnnotation Disambiguator="162" />
			<AttachedAnnotation Disambiguator="160" />
			<AttachedAnnotation Disambiguator="161" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[LineageGridHistory].[IX_BIDoc_LineageGridHistory_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[LineageGridHistory].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelElementDescriptivePaths]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="174" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[ModelElementId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[ExtendedProperties]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[RefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[Definition]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[Caption]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[Type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[RefPathPrefix]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[RefPathIntervalStart]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="37" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="38" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[RefPathSuffix]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElements].[SubtreeContent]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="175" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="163" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElements].[IX_BIDoc_ModelElements_ModelElementId_Type]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElements].[IX_BIDoc_ModelElements_ProjectConfigId_RefPathIntervalStart]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElements].[IX_ModelElements_Project_Type]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElements].[IX_ModelElements_ProjectConfigId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElements].[ModelElements_RefPath]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[BIDoc].[ModelElementsSequence]">
			<Property Name="CacheSize" Value="10" />
			<Property Name="Increment" Value="1" />
			<Property Name="StartValue" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bigint]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelElementTypeClasses]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeClasses].[ModelElementTypeClassId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeClasses].[ElementType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeClasses].[ClassCode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="176" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElementTypeClasses].[IX_ModelElementTypeClasses_ElementType_ClassCode]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeClasses].[ElementType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeClasses].[ClassCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeClasses]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelElementTypeDescriptions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDescriptions].[ModelElementTypeDescriptionsId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="177" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElementTypeDescriptions].[IX_ModelElementTypeDescriptions_ElementType]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelElementTypeDetailLevels]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDetailLevels].[ModelElementTypeDetailLevelId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="178" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelElementTypeDetailLevels].[IX_ModelElementTypeDetailLevels_ElementType]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[ModelLinks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelLinks].[ModelLinkId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelLinks].[ElementFromId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelLinks].[ElementToId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelLinks].[Type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[ModelLinks].[ExtendedProperties]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="179" />
			<AttachedAnnotation Disambiguator="164" />
			<AttachedAnnotation Disambiguator="165" />
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelLinks].[IX_BIDoc_ModelLinks_ElementFromId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[BIDoc].[ModelLinks].[IX_BIDoc_ModelLinks_ElementToId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSequence" Name="[BIDoc].[ModelLinksSequence]">
			<Property Name="CacheSize" Value="10" />
			<Property Name="Increment" Value="1" />
			<Property Name="StartValue" Value="1" />
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Relationship Name="TypeSpecifier">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bigint]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_Adm_BasicGraphNodes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="149" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc.ModelElementTypeClasses]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeClasses].[ModelElementTypeClassId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeClasses]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="176" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc.ModelElementTypeDescriptions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[ModelElementTypeDescriptionsId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="177" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc.ModelElementTypeDetailLevels]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ModelElementTypeDetailLevelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="178" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_BIDocDataTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[DataTypes].[DataTypesId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="157" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_BIDocModelLinks]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="179" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_BIDocSourceDataTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[SourceDataTypes].[SourceDataTypesId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="180" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_DataMessages]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[DataMessages].[MessageId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="152" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_DataMessagesType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[DataMessagesType].[DataMessagesTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[DataMessagesType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="156" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_LineageGridHistory]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[LineageGridHistory].[LineageGridHistoryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="173" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_ModelElementDescriptivePaths]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="174" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_BIDoc_SequenceEndpointTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[SequenceEndpointTypes].[SequenceEndpointTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[SequenceEndpointTypes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="181" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_dbo.BasicGraphLinks]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="146" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_dbo.BIDocModelElements]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="175" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_dbo.GraphDocuments]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[GraphDocuments].[GraphDocumentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="171" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[BIDoc].[PK_HigherLevelElementAncestors]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[BIDoc].[HigherLevelElementAncestors].[HigherLevelElementAncestorsId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="172" />
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[SequenceEndpointTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SequenceEndpointTypes].[SequenceEndpointTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SequenceEndpointTypes].[TypeName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="181" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[BIDoc].[SourceDataTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SourceDataTypes].[SourceDataTypesId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SourceDataTypes].[SourceName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SourceDataTypes].[SourceDataTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[BIDoc].[SourceDataTypes].[DataTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="180" />
			<AttachedAnnotation Disambiguator="166" />
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddDocumentsToGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [BIDoc].[GraphDocuments]
(
	[Content],
	[DocumentType],
	[GraphNode_Id]
)
SELECT
	[Content],
	[DocumentType],
	[GraphNode_Id]
FROM @documents]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[Content]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[Content]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[GraphNode_Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents]" Disambiguator="13">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[Content]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[DocumentType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents].[GraphNode_Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddDocumentsToGraph].[@documents]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_GraphDocuments]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="271" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddDocumentsToGraph]&#xD;&#xA;&#x9;@documents  [BIDoc].[UDTT_GraphDocuments] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddElementsToModel]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [BIDoc].[ModelElements]
(
	  --[ModelElementId]
      --,
	  [ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
	  ,[RefPathPrefix]
	  ,[RefPathSuffix]
)
SELECT
	--[ModelElementId]
      --,
	  [ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
	  ,@projectconfigid
	  ,LEFT([RefPath], 300)
	  ,LEFT(RefPathSuffix, 300)
FROM @elements

SELECT oe.ModelElementId SequentialId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN @elements oe ON oe.RefPath = e.RefPath COLLATE SQL_Latin1_General_CP1_CS_AS
WHERE e.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddElementsToModel].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddElementsToModel].[@elements]" Disambiguator="12">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Caption]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="255" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddElementsToModel].[@elements].[RefPathSuffix]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="300" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddElementsToModel].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddElementsToModel].[@elements]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_ModelElements]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="832" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddElementsToModel]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@elements [BIDoc].[UDTT_ModelElements] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddLinksToGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [BIDoc].[BasicGraphLinks]
(
	--[BasicGraphLinkId]
      --,
	  [LinkType]
      ,[NodeFromId]
      ,[NodeToId]
)
SELECT
--[BasicGraphLinkId]
      --,
	  [LinkType]
      ,[NodeFromId]
      ,[NodeToId]
	  FROM 
@links]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToGraph].[@links]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToGraph].[@links].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToGraph].[@links].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToGraph].[@links].[NodeToId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddLinksToGraph].[@links]" Disambiguator="9">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToGraph].[@links].[BasicGraphLinkId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToGraph].[@links].[LinkType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="50" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToGraph].[@links].[NodeFromId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToGraph].[@links].[NodeToId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddLinksToGraph].[@links]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_BasicGraphLinks]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="347" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddLinksToGraph]&#xD;&#xA;&#x9;@links  [BIDoc].[UDTT_BasicGraphLinks] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddLinksToModel]">
			<Property Name="BodyScript">
				<Value><![CDATA[	 
	INSERT INTO [BIDoc].[ModelLinks]
	 (
	 		[ElementFromId]
	       ,[ElementToId]
	       ,[Type]
	       ,[ExtendedProperties]
	 )
	 SELECT
	 		l.[ElementFromId]
	       ,l.[ElementToId]
	       ,l.[Type]
	       ,l.[ExtendedProperties]
	 FROM @links l
	 LEFT JOIN BIDoc.ModelLinks el ON el.ElementFromId = l.ElementFromId AND el.ElementToId = l.ElementToId AND el.Type = l.Type
	 WHERE el.ModelLinkId IS NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToModel].[@links]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToModel].[@links].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToModel].[@links].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToModel].[@links].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddLinksToModel].[@links].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddLinksToModel].[@links]" Disambiguator="10">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToModel].[@links].[ModelLinkId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToModel].[@links].[ElementFromId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToModel].[@links].[ElementToId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToModel].[@links].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="255" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddLinksToModel].[@links].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddLinksToModel].[@links]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_ModelLinks]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="520" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddLinksToModel]&#xD;&#xA;&#x9;@links [BIDoc].[UDTT_ModelLinks] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddNodesToGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO [BIDoc].[BasicGraphNodes]
(
	--[BasicGraphNodeId]
      --,
	  [Name]
      ,[NodeType]
      ,[Description]
      ,[ParentId]
      ,[GraphKind]
      ,[ProjectConfigId]
      ,[SourceElementId]
      ,[TopologicalOrder]
)
SELECT
--[BasicGraphNodeId]
      --,
	  [Name]
      ,[NodeType]
      ,[Description]
      ,NULL --[ParentId]
      ,@graphkind
      ,@projectconfigid
      ,[SourceElementId]
      ,[TopologicalOrder]
FROM @nodes


SELECT o.BasicGraphNodeId SequentialGraphNodeId, n.BasicGraphNodeId 
INTO #nodeIdMap
FROM BIDoc.BasicGraphNodes n
INNER JOIN @nodes o ON o.SourceElementId = n.SourceElementId AND o.NodeType = n.NodeType AND @graphkind = n.GraphKind


-- map new nodes to their sequential sources, map parents of those to the new IDs and assign new parent IDs
UPDATE n SET n.ParentId = pmap.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes n
INNER JOIN #nodeIdMap map ON map.BasicGraphNodeId = n.BasicGraphNodeId
INNER JOIN @nodes o ON o.BasicGraphNodeId = map.SequentialGraphNodeId
INNER JOIN @nodes po ON po.BasicGraphNodeId = o.ParentId
INNER JOIN #nodeIdMap pmap ON pmap.SequentialGraphNodeId = po.BasicGraphNodeId

SELECT SequentialGraphNodeId, BasicGraphNodeId FROM #nodeIdMap

DROP TABLE #nodeIdMap]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[SequentialGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[SequentialGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[SequentialGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[BasicGraphNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[SequentialGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_AddNodesToGraph].[#nodeIdMap].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes]" Disambiguator="11">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[BasicGraphNodeId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[NodeType]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[Description]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[ParentId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[SourceElementId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes].[TopologicalOrder]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddNodesToGraph].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddNodesToGraph].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddNodesToGraph].[@nodes]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_BasicGraphNodes]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1445" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddNodesToGraph]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@nodes  [BIDoc].[UDTT_BasicGraphNodes] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_AddOrUpdateElements]">
			<Property Name="BodyScript">
				<Value><![CDATA[


UPDATE e 
SET
	e.ExtendedProperties = ne.ExtendedProperties,
	e.Definition = ne.Definition,
	e.Caption = ne.Caption
FROM [BIDoc].[ModelElements] e
INNER JOIN @elements ne ON e.RefPath = ne.RefPath AND e.ProjectConfigId = @projectconfigid

DECLARE @newElements [BIDoc].[UDTT_ModelElements]
INSERT INTO @newElements
(
	[ModelElementId]
	  ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
	  ,[RefPathSuffix]
)
SELECT
	e.ModelElementId
	  ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,e.[Definition]
      ,e.[Caption]
      ,e.[Type]
	  ,LEFT(e.RefPathSuffix, 300)
FROM @elements e
LEFT JOIN BIDoc.ModelElements me ON me.ProjectConfigId = @projectconfigid AND me.RefPath = e.RefPath
WHERE me.ModelElementId IS NULL


INSERT INTO [BIDoc].[ModelElements]
(
	  --[ModelElementId]
      --,
	  [ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
	  ,[RefPathPrefix]
	  ,RefPathSuffix
)
SELECT
	--[ModelElementId]
      --,
	  [ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
	  ,@projectconfigid
	  ,LEFT([RefPath], 300)
	  ,LEFT(RefPathSuffix, 300)
FROM @newElements
--LEFT JOIN BIDoc.ModelElements me ON me.RefPath = @elements.RefPath AND me.ProjectConfigId = @projectconfigid
--WHERE me.ModelElementId IS NULL

SELECT oe.ModelElementId SequentialId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN @elements oe ON oe.RefPath = e.RefPath COLLATE SQL_Latin1_General_CP1_CS_AS
WHERE e.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[UDTT_ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Caption]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="255" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@newElements].[RefPathSuffix]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="300" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements]" Disambiguator="25">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Caption]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="255" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements].[RefPathSuffix]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="300" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddOrUpdateElements].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_AddOrUpdateElements].[@elements]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_ModelElements]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1775" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_AddOrUpdateElements]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@elements [BIDoc].[UDTT_ModelElements] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_BuildAggregations]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	PRINT N'Clearing aggregations'
	EXEC [Adm].[sp_WriteLogInfo] N'Clearing aggregations'
	EXEC [BIDoc].[sp_ClearAggregations] @projectConfigId

	/*
	PRINT N'Rebuilding indexes'
	EXEC [Adm].[sp_WriteLogInfo] N'Rebuilding indexes'
	ALTER INDEX ALL ON BIDoc.ModelElements  
	REBUILD ;
	ALTER INDEX ALL ON BIDoc.ModelLinks
	REBUILD ;   
	*/

	PRINT N'Building dependency graph'
	EXEC [Adm].[sp_WriteLogInfo] N'Building dependency graph'

	EXEC BIDoc.sp_CreateDataFlowGraph @projectconfigid

	PRINT N'Propagating dataflow vertically'
	EXEC [Adm].[sp_WriteLogInfo] N'Propagating dataflow vertically'
	EXEC BIDoc.sp_PropagateDataFlowVertically @projectconfigid
	/*
	PRINT N'Building transitive dependency graph'
	EXEC [Adm].[sp_WriteLogInfo] N'Building transitive dependency graph'
	EXEC BIDoc.sp_BuildTransitiveGraph @projectconfigid, N'DataFlow', N'DataFlowTransitive', 'DataFlow'
	*/
	PRINT N'Building dataflow sequences'
	EXEC [Adm].[sp_WriteLogInfo] N'Building dataflow sequences'
	EXEC BIDoc.sp_BuildDataFlowSequences @projectconfigid

	PRINT N'Propagating nodes to higher level nodes'
	EXEC [Adm].[sp_WriteLogInfo] N'Propagating nodes to higher level nodes'
	EXEC BIDoc.sp_FillHigherLevelElementAncestors @projectconfigid

	PRINT N'Clensing dataflow sequences'
	EXEC [Adm].[sp_WriteLogInfo] N'Clensing dataflow sequences'
	EXEC BIDoc.sp_ClenseDataFlowSequences @projectconfigid

	PRINT N'Building high level dataflow graph'
	EXEC [Adm].[sp_WriteLogInfo] N'Building high level dataflow graph'
	EXEC BIDoc.sp_BuildHighLevelGraph @projectconfigid

	PRINT N'Setting descriptive element paths'
	EXEC [Adm].[sp_WriteLogInfo] N'Setting descriptive element paths'
	EXEC BIDoc.sp_SetModelElementDescriptivePaths @projectconfigid

	PRINT N'Propagating dataflow sequences to higher level nodes'
	EXEC [Adm].[sp_WriteLogInfo] N'Propagating dataflow sequences to higher level nodes'
	EXEC BIDoc.sp_BuildHigherDataFlowSequences @projectconfigid

	PRINT N'Creating medium level dataflow graph'
	EXEC [Adm].[sp_WriteLogInfo] N'Creating medium level dataflow graph'
	EXEC [BIDoc].[sp_CreateDataFlowMediumDetailGraph] @projectconfigid

	PRINT N'Creating low level dataflow graph'
	EXEC [Adm].[sp_WriteLogInfo] N'Creating low level dataflow graph'
	EXEC [BIDoc].[sp_CreateDataFlowLowDetailGraph] @projectconfigid

	PRINT N'Creating links betweeen Elements and Annotations'
	EXEC [Adm].[sp_WriteLogInfo] N'Creating links betweeen Elements and Annotations'
	EXEC Annotate.sp_UpdateModelElememntReferences @projectconfigid
	
	PRINT N'Building fulltext indexes'
	EXEC [Adm].[sp_WriteLogInfo] N'Building fulltext indexes'
	EXEC Search.sp_FindRootElements @projectconfigid
	EXEC Search.sp_IndexFulltext @projectconfigid

	/**/
	PRINT N'Finding and saving errors in dataflow'
	EXEC [Adm].[sp_WriteLogInfo] N'Finding and saving errors in dataflow'
	EXEC BIDoc.sp_FillDataMessages @projectconfigid
	/**/
	
	--UPDATE bm SET bm.Active = 0 
	--FROM adm.BroadcastMessages bm WHERE bm.Active = 1 AND bm.ProjectConfigId = @projectconfigid AND bm.BroadcastMessageType = N'ProjectUpdateStarted'

	PRINT N'Setting RefPath intervals'
	EXEC [Adm].[sp_WriteLogInfo] N'Setting RefPath intervals'
	
	EXEC [BIDOc].[sp_SetRefPathIntervals] @projectConfigId

	UPDATE n
	SET RefPathIntervalStart = e.RefPathIntervalStart, RefPathIntervalEnd = e.RefPathIntervalEnd
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
	WHERE e.ProjectConfigId = @projectconfigid

	PRINT N'Building high level solution tree'
	EXEC [Adm].[sp_WriteLogInfo] N'Building high level solution tree'
	
	EXEC [Inspect].[sp_FillHighLevelSolutionTree] @projectconfigid

	PRINT N'Building high level solution tree'
	EXEC [Adm].[sp_WriteLogInfo] N'Building high level solution tree'
	
	/*
	PRINT N'Setting subtree contents for comparison'
	EXEC [Adm].[sp_WriteLogInfo] N'Setting subtree contents for comparison'
	
	EXEC [BIDoc].[sp_SetElementSubtreeContents] @projectconfigid
	*/

	PRINT N'Relinking lineage grid history'
	EXEC [Adm].[sp_WriteLogInfo] N'Relinking lineage grid history'
	
	UPDATE h SET SourceRootElementId = e.ModelElementId
	FROM BIDoc.LineageGridHistory h
	INNER JOIN BIDoc.ModelElements e ON h.SourceRootElementPath = e.RefPath
	WHERE h.ProjectConfigId = @projectconfigid

	UPDATE h SET TargetRootElementId = e.ModelElementId
	FROM BIDoc.LineageGridHistory h
	INNER JOIN BIDoc.ModelElements e ON h.TargetRootElementPath = e.RefPath
	WHERE h.ProjectConfigId  = @projectconfigid

	DELETE FROM BIDoc.LineageGridHistory
	WHERE ProjectConfigId = @projectconfigid AND (SourceRootElementId IS NULL OR TargetRootElementId IS NULL)
	
	/*
	PRINT N'Rebuilding indexes'
	EXEC [Adm].[sp_WriteLogInfo] N'Rebuilding indexes'
	ALTER INDEX ALL ON BIDoc.BasicGraphNodes  
	REBUILD ;
	ALTER INDEX ALL ON BIDoc.BasicGraphLinks
	REBUILD ;
	*/
	
	EXEC [Adm].[sp_SaveDbOperationFinishedMessage] @requestId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearAggregations]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildAggregations].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[sp_UpdateModelElememntReferences]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindRootElements]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FillHighLevelSolutionTree]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveDbOperationFinishedMessage]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildAggregations].[@requestId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildAggregations].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildAggregations].[@requestId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5163" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_BuildAggregations]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;&#x9;,@requestId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_BuildDataFlowSequences]">
			<Property Name="BodyScript">
				<Value><![CDATA[

--DECLARE @id NVARCHAR(100)
--	SET @id = REPLACE(CAST(@projectconfigid AS NVARCHAR(100)),'-','')
	

--	DECLARE @IdentityInsert1 NVARCHAR(MAX)
--	SET @IdentityInsert1 = '
--		SET IDENTITY_INSERT  [' + @id + '].DataFlowSequences ON'
--	EXEC sp_executesql @IdentityInsert1	

--GO

------------------------------------------------------------------------

	--DECLARE @projectconfigid UNIQUEIDENTIFIER = N'8BEDB75E-5D79-449F-9480-F26FEC6A1BE1'

	DECLARE @id NVARCHAR(100)
	SET @id = REPLACE(CAST(@projectconfigid AS NVARCHAR(100)),'-','')
	
	DECLARE @message NVARCHAR(MAX)

	/**/
	-- clear sequences
	DECLARE @SQLTask2 NVARCHAR(MAX)
	SET @SQLTask2 = 'TRUNCATE TABLE [' + @id + '].[DataFlowSequenceSteps]
					 TRUNCATE TABLE [' + @id + '].[DataFlowSequences]
					 TRUNCATE TABLE [' + @id + '].[DataFlowSequenceSteps_Heap]
					 TRUNCATE TABLE [' + @id + '].[DataFlowSequences_Heap]'
	EXEC sp_executesql  @SQLTask2
	
	--ALTER INDEX [IX_BIDoc_DataFlowSequenceSteps_SequenceId] ON [BIDoc].[DataFlowSequenceSteps]
	--DISABLE

	-- init structures
	DECLARE @graphKind NVARCHAR(50) = N'DataFlow'
	DECLARE @linkType NVARCHAR(50) = N'DataFlow'

	CREATE TABLE #usedLinks
	(
		SourceNodeId INT NOT NULL,
		LinkId INT NOT NULL 
		--CONSTRAINT PK_UsedLinks PRIMARY KEY(SourceNodeId, LinkId)
	)


	CREATE TABLE #waitingLinks
	(
		SourceNodeId INT NOT NULL,
		LinkId INT NOT NULL
		--CONSTRAINT PK_WaitingLinks PRIMARY KEY(SourceNodeId, LinkId)
	)

	CREATE TABLE #sequenceCopyTargets
	(
		SourceSequenceId INT NOT NULL,
		TargetSequenceId INT NOT NULL,
		NextSequenceStepNo INT NOT NULL,
		FinalLinkId INT NOT NULL
	)

	---- find initial front nodes
	
	SELECT DISTINCT n.BasicGraphNodeId SourceNodeId, n.BasicGraphNodeId NodeId INTO #frontNodes
	FROM BIDoc.BasicGraphNodes n 
	INNER JOIN BIDoc.BasicGraphLinks lf ON lf.NodeFromId = n.BasicGraphNodeId AND lf.LinkType = @linkType
	--LEFT JOIN BIDoc.BasicGraphLinks lt ON lt.NodeToId = n.BasicGraphNodeId AND lt.LinkType = @linkType
	WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphKind --AND lt.BasicGraphLinkId IS NULL

	SET @message = CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' initial front nodes'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message

	-- find initial links

	SELECT l.NodeFromId SourceNodeId, l.BasicGraphLinkId LinkId INTO #newReachableLinks
	FROM BIDoc.BasicGraphLinks l
	INNER JOIN #frontNodes n ON n.NodeId = l.NodeFromId
	WHERE l.LinkType = @linkType

	SET @message = CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' initial front links'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message

	-- create new one-step sequences from the new links
		DECLARE @InsertSQL NVARCHAR(MAX)
		SET @InsertSQL = 'INSERT INTO [' + @id + '].[DataFlowSequences_Heap] WITH(TABLOCK)
		(
		SourceNode,
		TargetNode,
		DetailLevel,
		ProjectConfigid--,
		--LastLinkId
		)
		SELECT DISTINCT
		l.NodeFromId,
		l.NodeToId,
		1,
		@projectconfigid--,
		--l.BasicGraphLinkId
		FROM #newReachableLinks ll
		INNER JOIN BIDoc.BasicGraphLinks l ON ll.LinkId = l.BasicGraphLinkId
		--INNER JOIN BIDoc.BasicGraphNodes sn ON sn.BasicGraphNodeId = s.SourceNode
INNER JOIN BIDoc.BasicGraphNodes sn ON sn.BasicGraphNodeId = l.NodeFromId
INNER JOIN BIDoc.ModelElements se ON se.ModelElementId = sn.SourceElementId
INNER JOIN [BIDoc].[SequenceEndpointTypes] stp ON stp.TypeName = se.Type
		LEFT JOIN [' + @id + '].DataFlowSequences_Heap s ON s.SourceNode = l.NodeFromId AND s.TargetNode = l.NodeToId
		WHERE s.SequenceId IS NULL'
		EXEC sp_executesql  @InsertSQL, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid

		-- insert one-step sequence steps using the newly discovered links
		
		DECLARE @InsertSQL2 NVARCHAR(MAX)
		SET @InsertSQL2 = 'INSERT INTO ['  + @id + '].[DataFlowSequenceSteps_Heap] WITH(TABLOCK)
		(
		SourceNodeId,
		TargetNodeId,
		StepNumber,
		SequenceId
		)
		SELECT DISTINCT
		l.NodeFromId
		,l.NodeToId
		,0
		,s.SequenceId
		FROM #newReachableLinks ll
		INNER JOIN BIDoc.BasicGraphLinks l ON ll.LinkId = l.BasicGraphLinkId
		INNER JOIN [' + @id + '].DataFlowSequences_Heap s ON s.SourceNode = l.NodeFromId AND s.TargetNode = l.NodeToId
		-- only if the one-step sequence isnt filled already
		LEFT JOIN [' + @id + '].DataFlowSequenceSteps_Heap st ON st.SequenceId = s.SequenceId
		WHERE st.Id IS NULL'
		EXEC sp_executesql  @InsertSQL2

	DECLARE @iteration INT = 1

	CREATE NONCLUSTERED INDEX [IX_NewReachableLinks]
ON [#newReachableLinks] ([SourceNodeId],[LinkId])

	CREATE NONCLUSTERED INDEX [IX_temp_SequenceCopyTargets]
ON [#sequenceCopyTargets] ([SourceSequenceId]) INCLUDE([TargetSequenceId])

	-- while new unused links are being discovered (such that all other links with the same target node are also available)
	WHILE (EXISTS(SELECT TOP 1 1 FROM #newReachableLinks))
	BEGIN

		
		-- create new sequences from those that end in the front nodes (and such sequence does not exist already)
		DECLARE @InsertSQL3 NVARCHAR(MAX)
		SET @InsertSQL3 = 'INSERT INTO [' + @id + '].[DataFlowSequences_Heap] WITH(TABLOCK)
		(
		SourceNode,
		TargetNode,
		DetailLevel,
		ProjectConfigid--,
		--LastLinkId
		)
		SELECT DISTINCT
		s.SourceNode
		,l.NodeToId
		,1
		,@projectconfigid
		--,l.BasicGraphLinkId
		FROM #newReachableLinks ll
		INNER JOIN BIDoc.BasicGraphLinks l ON l.BasicGraphLinkId = ll.LinkId
		INNER JOIN [' + @id + '].DataFlowSequences_Heap s ON s.TargetNode = l.NodeFromId AND s.SourceNode = ll.SourceNodeId
		LEFT JOIN [' + @id + '].DataFlowSequences_Heap es ON es.SourceNode = s.SourceNode AND es.TargetNode = l.NodeToId
		WHERE es.SequenceId IS NULL'
		EXEC sp_executesql  @InsertSQL3, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid

		SET @message = CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' extended sequences in iteration ' + CONVERT(NVARCHAR(10), @iteration)
		PRINT @message
		EXEC [Adm].[sp_WriteLogInfo] @message

		DECLARE @InsertSQL10 NVARCHAR(MAX)
		
		SET @InsertSQL10 = 
		-- find copied sequences (sequences ending in the source node of the new links are copied to the sequences ending in the links' target)
		N'
		INSERT INTO #sequenceCopyTargets WITH(TABLOCK)
		(
		SourceSequenceId,
		TargetSequenceId,
		NextSequenceStepNo,
		FinalLinkId
		)
		SELECT DISTINCT
		s.SequenceId,
		ts.SequenceId,
		@iteration + 1,
		l.BasicGraphLinkId
		FROM #newReachableLinks ll
		INNER JOIN BIDoc.BasicGraphLinks l ON l.BasicGraphLinkId = ll.LinkId
		INNER JOIN [' + @id + '].DataFlowSequences_Heap s ON s.TargetNode = l.NodeFromId AND s.SourceNode = ll.SourceNodeId
		INNER JOIN [' + @id + '].DataFlowSequences_Heap ts ON ts.SourceNode = s.SourceNode AND ts.TargetNode = l.NodeToId
		--LEFT JOIN [' + @id + '].DataFlowSequenceSteps_Heap stp ON stp.SequenceId = ts.SequenceId
		--WHERE stp.Id IS NULL	-- not ideal...
		'
		EXEC sp_executesql  @InsertSQL10, N'@projectconfigid UNIQUEIDENTIFIER, @iteration INT', @projectconfigid = @projectconfigid, @iteration = @iteration

		SET @message = CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' sequence copy targets'
		PRINT @message
		EXEC [Adm].[sp_WriteLogInfo] @message

					ALTER INDEX [IX_temp_SequenceCopyTargets]
ON [#sequenceCopyTargets] --([SourceNodeId],[LinkId])
REBUILD

		
		
		--SELECT * FROM #sequenceCopyTargets

		-- insert copied sequence steps
		DECLARE @InsertSQL4 NVARCHAR(MAX)
		SET @InsertSQL4 = '
		INSERT INTO [' + @id + '].DataFlowSequenceSteps_Heap WITH(TABLOCK)
		(
		SourceNodeId,
		TargetNodeId,
		StepNumber,
		SequenceId
		)
		SELECT DISTINCT
		st.SourceNodeId
		,st.TargetNodeId
		,st.StepNumber
		,ct.TargetSequenceId
		FROM #sequenceCopyTargets ct
		INNER JOIN [' + @id + '].DataFlowSequenceSteps_Heap st ON st.SequenceId = ct.SourceSequenceId
		LEFT JOIN [' + @id + '].DataFlowSequenceSteps_Heap est ON est.SequenceId = ct.TargetSequenceId AND est.SourceNodeId = st.SourceNodeId AND est.TargetNodeId = st.TargetNodeId
		WHERE est.Id IS NULL'
		EXEC sp_executesql  @InsertSQL4 
		SET @message = CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' copied steps'

		PRINT @message
		EXEC [Adm].[sp_WriteLogInfo] @message

		-- add final links to copied sequences
		DECLARE @InsertSQL5 NVARCHAR(MAX)
		SET @InsertSQL5 = 'INSERT INTO [' + @id + '].DataFlowSequenceSteps_Heap WITH(TABLOCK)
		(
		SourceNodeId,
		TargetNodeId,
		StepNumber,
		SequenceId
		)
		SELECT DISTINCT
		l.NodeFromId
		,l.NodeToId
		,ct.NextSequenceStepNo
		,ct.TargetSequenceId
		FROM #sequenceCopyTargets ct
		--INNER JOIN [' + @id + '].DataFlowSequenceSteps_Heap stp ON stp.SequenceId = ct.SourceSequenceId
		INNER JOIN BIDoc.BasicGraphLinks l ON l.BasicGraphLinkId = ct.FinalLinkId
		LEFT JOIN [' + @id + '].DataFlowSequenceSteps_Heap stp ON l.NodeFromId = stp.SourceNodeId AND l.NodeToId = stp.TargetNodeId AND stp.SequenceId = ct.TargetSequenceId
		WHERE stp.Id IS NULL'
		EXEC sp_executesql  @InsertSQL5

			ALTER INDEX [IX_temp_SequenceCopyTargets]
ON [#sequenceCopyTargets] --([SourceNodeId],[LinkId])
DISABLE


		-- prepare for the next iteration
		TRUNCATE TABLE #sequenceCopyTargets

		INSERT INTO #usedLinks WITH(TABLOCK)
		(
			SourceNodeId,
			LinkId
		)
		SELECT SourceNodeId, LinkId FROM #newReachableLinks

		TRUNCATE TABLE #frontNodes

		-- new front nodes - step towards new discovered links
		INSERT INTO #frontNodes WITH(TABLOCK)
		(
			SourceNodeId,
			NodeId
		)
		SELECT DISTINCT ll.SourceNodeId, l.NodeToId 
		FROM #newReachableLinks ll
		INNER JOIN BIDoc.BasicGraphLinks l ON l.BasicGraphLinkId = ll.LinkId

			ALTER INDEX [IX_NewReachableLinks]
ON [#newReachableLinks] --([SourceNodeId],[LinkId])
DISABLE

		TRUNCATE TABLE #newReachableLinks

		-- candidate new found links - not used links from the source nodes
		INSERT INTO #newReachableLinks WITH(TABLOCK)
		(
			SourceNodeId,
			LinkId
		)
		SELECT DISTINCT fn.SourceNodeId, l.BasicGraphLinkId 
		FROM #frontNodes fn
		INNER JOIN BIDoc.BasicGraphLinks l ON fn.NodeId = l.NodeFromId
		LEFT JOIN #usedLinks ul ON ul.LinkId = l.BasicGraphLinkId AND ul.SourceNodeId = fn.SourceNodeId
		WHERE l.LinkType = @linkType AND ul.LinkId IS NULL

			ALTER INDEX [IX_NewReachableLinks]
ON [#newReachableLinks] --([SourceNodeId],[LinkId])
REBUILD

		-- this is slow and only influences the topological order assignment
		
		SET @iteration = @iteration + 1

	END

	DROP TABLE #waitingLinks
	DROP TABLE #sequenceCopyTargets
	DROP TABLE #frontNodes
	DROP TABLE #newReachableLinks
	DROP TABLE #usedLinks

	--insert filtered sequences to std. tables

	DECLARE @InsertSQL11 NVARCHAR(MAX)
		SET @InsertSQL11 = N'INSERT INTO [' + @id + '].[DataFlowSequences] WITH(TABLOCK)
		(
		[SequenceId],
		SourceNode,
		TargetNode,
		DetailLevel,
		ProjectConfigid--,
		--LastLinkId
		)
		SELECT
		s.[SequenceId],
		s.SourceNode,
		s.TargetNode,
		s.DetailLevel,
		s.ProjectConfigid

		FROM [' + @id + '].[DataFlowSequences_Heap] s
INNER JOIN BIDoc.BasicGraphNodes sn ON sn.BasicGraphNodeId = s.SourceNode
INNER JOIN BIDoc.BasicGraphNodes tn ON tn.BasicGraphNodeId = s.TargetNode
INNER JOIN BIDoc.ModelElements se ON se.ModelElementId = sn.SourceElementId
INNER JOIN BIDoc.ModelElements te ON te.ModelElementId = tn.SourceElementId
INNER JOIN [BIDoc].[SequenceEndpointTypes] stp ON stp.TypeName = se.Type
INNER JOIN [BIDoc].[SequenceEndpointTypes] ttp ON ttp.TypeName = te.Type
WHERE s.DetailLevel = 1
'
		EXEC sp_executesql  @InsertSQL11, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid




	
	DECLARE @InsertSQL12 NVARCHAR(MAX)
		SET @InsertSQL12 = N'INSERT INTO [' + @id + '].DataFlowSequenceSteps WITH(TABLOCK)
		(
		SourceNodeId,
		TargetNodeId,
		StepNumber,
		SequenceId
		)
		
SELECT 
		st.SourceNodeId,
		st.TargetNodeId,
		st.StepNumber,
		st.SequenceId

FROM [' + @id + '].[DataFlowSequences_Heap] s
INNER JOIN [' + @id + '].DataFlowSequenceSteps_Heap st ON st.SequenceId = s.SequenceId
INNER JOIN BIDoc.BasicGraphNodes sn ON sn.BasicGraphNodeId = s.SourceNode
INNER JOIN BIDoc.BasicGraphNodes tn ON tn.BasicGraphNodeId = s.TargetNode
INNER JOIN BIDoc.ModelElements se ON se.ModelElementId = sn.SourceElementId
INNER JOIN BIDoc.ModelElements te ON te.ModelElementId = tn.SourceElementId
INNER JOIN [BIDoc].[SequenceEndpointTypes] stp ON stp.TypeName = se.Type
INNER JOIN [BIDoc].[SequenceEndpointTypes] ttp ON ttp.TypeName = te.Type
WHERE s.DetailLevel = 1
'

EXEC sp_executesql  @InsertSQL12, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid


	

	PRINT N'Rebuilding indexes...'
	EXEC [Adm].[sp_WriteLogInfo] N'Rebuilding indexes...'

	DECLARE @SQLTask1 NVARCHAR(MAX)
	SET @SQLTask1 = 'ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD
	ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId_SourceNodeId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD
	ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId_TargetNodeId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD'
	EXEC sp_executesql  @SQLTask1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[@projectconfigid]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[LinkId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[SourceSequenceId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[TargetSequenceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[LinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[LinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[LinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildDataFlowSequences].[#waitingLinks]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[SourceNodeId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#usedLinks].[LinkId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildDataFlowSequences].[#waitingLinks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#waitingLinks].[SourceNodeId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#waitingLinks].[LinkId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[SourceSequenceId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[TargetSequenceId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[NextSequenceStepNo]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#sequenceCopyTargets].[FinalLinkId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#frontNodes].[NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildDataFlowSequences].[#newReachableLinks].[LinkId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildDataFlowSequences].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="13323" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_BuildDataFlowSequences]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_BuildHigherDataFlowSequences]">
			<Property Name="BodyScript">
				<Value><![CDATA[


DECLARE @id NVARCHAR(100)
SET @id = REPLACE(CAST(@projectconfigid AS NVARCHAR(100)),'-','')	
DECLARE @graphkind NVARCHAR(50) = N'DataFlow'

--DECLARE @SQLTask3 NVARCHAR(MAX)
--	SET @SQLTask3 = 'TRUNCATE TABLE [' + @id + '].[DataFlowSequenceSteps_Heap]
--					 TRUNCATE TABLE [' + @id + '].[DataFlowSequences_Heap]'
--	EXEC sp_executesql  @SQLTask3
	

DECLARE @SQLTask2 NVARCHAR(MAX)

SELECT hla.SouceElementId, hla.DetailLevel, hla.AncestorElementId, n.BasicGraphNodeId, ancn.BasicGraphNodeId AncestorNodeId, ae.[Type] AncestorElementType, ae.Caption AncestorElementName
INTO #upperLevels
FROM BIDoc.HigherLevelElementAncestors hla
INNER JOIN BIDoc.BasicGraphNodes n ON n.SourceElementId = hla.SouceElementId
INNER JOIN BIDoc.ModelElements ae ON ae.ModelElementId = hla.AncestorElementId
INNER JOIN BIDoc.BasicGraphNodes ancn ON ancn.SourceElementId = hla.AncestorElementId
WHERE n.GraphKind = @graphkind AND ancn.GraphKind = @graphkind AND ae.ProjectConfigId = @projectconfigid


;WITH nodes as
(
SELECT n.BasicGraphNodeId OriginalNodeId, n.BasicGraphNodeId, n.ParentId, e.ModelElementId, e.Caption, e.Type, lvl.DetailLevel
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.ModelElementTypeDetailLevels lvl ON lvl.ElementType = e.Type
WHERE n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid
)
SELECT dl.*, 
cls1.AncestorNodeId Detail_1_NodeId, cls1.AncestorElementType Detail_1_Type, cls1.AncestorElementName Detail_1_Name,
cls2.AncestorNodeId Detail_2_NodeId, cls2.AncestorElementType Detail_2_Type, cls2.AncestorElementName Detail_2_Name,
cls3.AncestorNodeId Detail_3_NodeId, cls3.AncestorElementType Detail_3_Type, cls3.AncestorElementName Detail_3_Name
INTO #upperLevelNodeMapping
FROM nodes dl
LEFT JOIN #upperLevels cls1 ON cls1.BasicGraphNodeId = dl.OriginalNodeId AND cls1.DetailLevel = 1
LEFT JOIN #upperLevels cls2 ON cls2.BasicGraphNodeId = dl.OriginalNodeId AND cls2.DetailLevel = 2
LEFT JOIN #upperLevels cls3 ON cls3.BasicGraphNodeId = dl.OriginalNodeId AND cls3.DetailLevel = 3




CREATE TABLE #higherLevelSequences
(
	SourceSequenceId INT,
	StepFromNodeId INT,
	StepToNodeId INT,
	StepNumber INT,
	DetailLevel INT
)


DECLARE @higherLevelSequencesSQL NVARCHAR(MAX)
		SET @higherLevelSequencesSQL = 'INSERT INTO #higherLevelSequences

SELECT DISTINCT sq.SequenceId SourceSequenceId,
ul2sf.AncestorNodeId StepSourceNodeId,
ul2st.AncestorNodeId StepTargetNodeId,
stp.StepNumber,
2 DetailLevel
FROM [' + @id + '].DataFlowSequences sq
INNER JOIN [' + @id + '].DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
INNER JOIN #upperLevels ul2sf ON ul2sf.DetailLevel = 2 AND ul2sf.BasicGraphNodeId = stp.SourceNodeId
INNER JOIN #upperLevels ul2st ON ul2st.DetailLevel = 2 AND ul2st.BasicGraphNodeId = stp.TargetNodeId
WHERE sq.ProjectConfigid = @projectconfigid AND sq.DetailLevel = 1
' 
EXEC sp_executesql  @higherLevelSequencesSQL, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid

/*
INSERT INTO #higherLevelSequences

SELECT DISTINCT sq.SequenceId SourceSequenceId,
ul2sf.AncestorNodeId StepSourceNodeId,
ul2st.AncestorNodeId StepTargetNodeId,
stp.StepNumber,
2 DetailLevel
FROM BIDoc.DataFlowSequences sq
INNER JOIN BIDoc.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
INNER JOIN #upperLevels ul2sf ON ul2sf.DetailLevel = 2 AND ul2sf.BasicGraphNodeId = stp.SourceNodeId
INNER JOIN #upperLevels ul2st ON ul2st.DetailLevel = 2 AND ul2st.BasicGraphNodeId = stp.TargetNodeId
WHERE sq.ProjectConfigid = @projectconfigid AND sq.DetailLevel = 1
*/


DECLARE @higherLevelSequences3SQL NVARCHAR(MAX)
		SET @higherLevelSequences3SQL = 'INSERT INTO #higherLevelSequences

SELECT DISTINCT sq.SequenceId SourceSequenceId,
ul2sf.AncestorNodeId StepSourceNodeId,
ul2st.AncestorNodeId StepTargetNodeId,
stp.StepNumber,
3 DetailLevel
FROM [' + @id + '].DataFlowSequences sq
INNER JOIN [' + @id + '].DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
INNER JOIN #upperLevels ul2sf ON ul2sf.DetailLevel = 3 AND ul2sf.BasicGraphNodeId = stp.SourceNodeId
INNER JOIN #upperLevels ul2st ON ul2st.DetailLevel = 3 AND ul2st.BasicGraphNodeId = stp.TargetNodeId
WHERE sq.ProjectConfigid = @projectconfigid AND sq.DetailLevel = 1
'
EXEC sp_executesql  @higherLevelSequences3SQL, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid

/*
INSERT INTO #higherLevelSequences

SELECT DISTINCT sq.SequenceId SourceSequenceId,
ul2sf.AncestorNodeId StepSourceNodeId,
ul2st.AncestorNodeId StepTargetNodeId,
stp.StepNumber,
3 DetailLevel
FROM BIDoc.DataFlowSequences sq
INNER JOIN BIDoc.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
INNER JOIN #upperLevels ul2sf ON ul2sf.DetailLevel = 3 AND ul2sf.BasicGraphNodeId = stp.SourceNodeId
INNER JOIN #upperLevels ul2st ON ul2st.DetailLevel = 3 AND ul2st.BasicGraphNodeId = stp.TargetNodeId
WHERE sq.ProjectConfigid = @projectconfigid AND sq.DetailLevel = 1
*/

-- delete the steps (and sequences that only span one higher level node)
DELETE FROM #higherLevelSequences WHERE StepFromNodeId = StepToNodeId


--SELECT COUNT(*) FROM #higherLevelSequences

--------

-- insert distinct sequence
DECLARE @InsertSQL NVARCHAR(MAX)
		SET @InsertSQL = 'INSERT INTO [' + @id + '].[DataFlowSequences_Heap] WITH(TABLOCK)
		(SourceNode, TargetNode, DetailLevel, ProjectConfigid)
SELECT DISTINCT 
sq.SourceNode, 
sq.TargetNode,
hls.DetailLevel,
sq.ProjectConfigid
FROM #higherLevelSequences hls
INNER JOIN [' + @id + '].[DataFlowSequences] sq ON sq.SequenceId = hls.SourceSequenceId'
EXEC sp_executesql  @InsertSQL

-- insert higher level steps
DECLARE @InsertSQL1 NVARCHAR(MAX)
		SET @InsertSQL1 = 'INSERT INTO [' + @id + '].[DataFlowSequenceSteps_Heap] WITH(TABLOCK)(
SourceNodeId, TargetNodeId, SequenceId, StepNumber
)
SELECT 
hls.StepFromNodeId, 
hls.StepToNodeId, 
tgts.SequenceId, 
MIN(hls.StepNumber)
FROM #higherLevelSequences hls
INNER JOIN [' + @id + '].[DataFlowSequences] orgs ON orgs.SequenceId = hls.SourceSequenceId
INNER JOIN [' + @id + '].[DataFlowSequences_Heap] tgts ON tgts.DetailLevel = hls.DetailLevel AND tgts.SourceNode = orgs.SourceNode AND tgts.TargetNode = orgs.TargetNode
GROUP BY
hls.StepFromNodeId, 
hls.StepToNodeId, 
tgts.SequenceId'
EXEC sp_executesql  @InsertSQL1


	DECLARE @InsertSQL11 NVARCHAR(MAX)
		SET @InsertSQL11 = N'INSERT INTO [' + @id + '].[DataFlowSequences] WITH(TABLOCK)
		(
		[SequenceId],
		SourceNode,
		TargetNode,
		DetailLevel,
		ProjectConfigid--,
		--LastLinkId
		)
		SELECT
		s.[SequenceId],
		s.SourceNode,
		s.TargetNode,
		s.DetailLevel,
		s.ProjectConfigid

		FROM [' + @id + '].[DataFlowSequences_Heap] s
WHERE s.DetailLevel > 1
'
		EXEC sp_executesql  @InsertSQL11, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid

			DECLARE @InsertSQL12 NVARCHAR(MAX)
		SET @InsertSQL12 = N'INSERT INTO [' + @id + '].DataFlowSequenceSteps WITH(TABLOCK)
		(
		SourceNodeId,
		TargetNodeId,
		StepNumber,
		SequenceId
		)
		
SELECT 
		st.SourceNodeId,
		st.TargetNodeId,
		st.StepNumber,
		st.SequenceId

FROM [' + @id + '].[DataFlowSequences_Heap] s
INNER JOIN [' + @id + '].DataFlowSequenceSteps_Heap st ON st.SequenceId = s.SequenceId
WHERE s.DetailLevel > 1
'

EXEC sp_executesql  @InsertSQL12, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid


DROP TABLE #higherLevelSequences
DROP TABLE #upperLevelNodeMapping
DROP TABLE #upperLevels

PRINT N'Removing backward steps'

DECLARE @DeleteSQL NVARCHAR(MAX)
		SET @DeleteSQL = '
DELETE st FROM [' + @id + '].[DataFlowSequenceSteps] st
INNER JOIN [' + @id + '].DataFlowSequenceSteps prvsrc ON st.SequenceId = prvsrc.SequenceId AND prvsrc.StepNumber < st.StepNumber AND st.TargetNodeId = prvsrc.SourceNodeId'
EXEC sp_executesql @DeleteSQL

PRINT N'Rebilding indexes'
	
DECLARE @SQLTask NVARCHAR(MAX)
	SET @SQLTask = 'ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD
ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId_SourceNodeId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD
ALTER INDEX [IX_' + @id + '_DataFlowSequenceSteps_SequenceId_TargetNodeId] ON [' + @id + '].[DataFlowSequenceSteps]
	REBUILD'
EXEC sp_executesql  @SQLTask]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[StepFromNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[StepToNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[SourceSequenceId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[StepFromNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[StepToNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[StepNumber]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#higherLevelSequences].[DetailLevel]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[SouceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[CTE1].[nodes].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_1_NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_1_Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_1_Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_2_NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_2_Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_2_Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_3_NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_3_Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevelNodeMapping].[Detail_3_Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[#upperLevels].[AncestorElementName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildHigherDataFlowSequences].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="8561" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_BuildHigherDataFlowSequences]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_BuildHighLevelGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @grphDf NVARCHAR(50) = N'DataFlow'
DECLARE @grphHigh NVARCHAR(50) = N'DFHigh'
DECLARE @grphMid NVARCHAR(50) = N'DFMedium'


DECLARE @highNodes TABLE
(
 SourceGraphNodeId INT,
 [Name] NVARCHAR(MAX),
 NodeType NVARCHAR(MAX),
 Description NVARCHAR(MAX),
 ParentId INT NULL,
 SourceElementId INT
)


DELETE l 
FROM BIDoc.BasicGraphLinks l
INNER JOIN BIDoc.BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind IN (@grphHigh/*, @grphMid*/)

DELETE FROM BIDoc.BasicGraphNodes
WHERE ProjectConfigId = @projectconfigid AND GraphKind IN (@grphHigh/*, @grphMid*/)

-- the nodes to be included

INSERT INTO @highNodes(SourceGraphNodeId, [Name], NodeType, Description, ParentId, SourceElementId) 
SELECT n.BasicGraphNodeId, n.Name, n.NodeType, n.Name, NULL ParentId, n.SourceElementId
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE e.Type = N'CD.DLS.Model.Mssql.Db.DatabaseElement' AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphDf


INSERT INTO @highNodes(SourceGraphNodeId, [Name], NodeType, Description, ParentId, SourceElementId) 
SELECT n.BasicGraphNodeId, n.Name, n.NodeType, fld.Name + N'/' + n.Name, NULL ParentId, n.SourceElementId
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.BasicGraphNodes fld ON fld.BasicGraphNodeId = n.ParentId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssis.ProjectElement' AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphDf

INSERT INTO @highNodes(SourceGraphNodeId, [Name], NodeType, Description, ParentId, SourceElementId) 
SELECT n.BasicGraphNodeId, n.Name, n.NodeType, n.Name Description, NULL ParentId, n.SourceElementId
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.BasicGraphNodes fld ON fld.BasicGraphNodeId = n.ParentId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.CubeElement' AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphDf

INSERT INTO @highNodes(SourceGraphNodeId, [Name], NodeType, Description, ParentId, SourceElementId) 
SELECT n.BasicGraphNodeId, n.Name, n.NodeType, n.Name Description, NULL ParentId, n.SourceElementId
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.BasicGraphNodes fld ON fld.BasicGraphNodeId = n.ParentId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE e.Type = N'CD.DLS.Model.Mssql.Pbi.TenantElement' AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphDf


;WITH ssrsFolders AS
(
SELECT n.BasicGraphNodeId, n.Name, n.NodeType, n.Name Description, NULL ParentId, n.SourceElementId, n.ParentId CurrentParent
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
LEFT JOIN BIDoc.BasicGraphNodes chf ON chf.ParentId = n.BasicGraphNodeId AND chf.NodeType = N'FolderElement'
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssrs.FolderElement' AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphDf AND chf.BasicGraphNodeId IS NULL

UNION ALL

SELECT f.BasicGraphNodeId, f.Name, f.NodeType, p.Name + N'/' + f.Description, f.ParentId, f.SourceElementId, p.ParentId
FROM ssrsFolders f
INNER JOIN BIDoc.BasicGraphNodes p ON p.BasicGraphNodeId = f.CurrentParent
)
INSERT INTO @highNodes(SourceGraphNodeId, [Name], NodeType, Description, ParentId, SourceElementId) 
SELECT BasicGraphNodeId, Name, NodeType, REPLACE(Description, N'//', N'') Description,ParentId, SourceElementId 
FROM ssrsFolders WHERE Description LIKE '/%'


INSERT INTO BIDoc.BasicGraphNodes(Name, NodeType, Description, ParentId, GraphKind, ProjectConfigId, SourceElementId)
SELECT DISTINCT Name, NodeType, Description, ParentId, @grphHigh, @projectconfigid, SourceElementId FROM @highNodes


;WITH descendantMap AS
(
SELECT hn.SourceGraphNodeId HighNode, hn.SourceGraphNodeId LowNode FROM @highNodes hn

UNION ALL

SELECT m.HighNode, c.BasicGraphNodeId LowNode FROM descendantMap m
INNER JOIN BIDoc.BasicGraphNodes c ON c.ParentId = m.LowNode
)
,links AS(
SELECT src.HighNode SrcSrcNode, tgt.HighNode TgtSrcNode, COUNT(*) Strength 
FROM descendantMap src
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = src.LowNode
INNER JOIN descendantMap tgt ON l.NodeToId = tgt.LowNode
WHERE l.LinkType = N'DataFlow' AND src.HighNode <> tgt.HighNode
GROUP BY src.HighNode, tgt.HighNode

)
INSERT INTO BIDoc.BasicGraphLinks
(NodeFromId, NodeToId, LinkType, ExtendedProperties)
SELECT 
--*
srcn.BasicGraphNodeId, tgtn.BasicGraphNodeId, N'DataFlow', N'{"Strength":' + CONVERT(NVARCHAR(20), l.Strength) + N'}'
FROM links l
INNER JOIN @highNodes srcHn ON srcHn.SourceGraphNodeId = l.SrcSrcNode
INNER JOIN @highNodes tgtHn ON tgtHn.SourceGraphNodeId = l.TgtSrcNode
INNER JOIN BIDoc.BasicGraphNodes srcn ON srcn.SourceElementId = srcHn.SourceElementId AND srcn.GraphKind = @grphHigh
INNER JOIN BIDoc.BasicGraphNodes tgtn ON tgtn.SourceElementId = tgtHn.SourceElementId AND tgtn.GraphKind = @grphHigh
OPTION(MAXRECURSION 10000)

--SELECT * FROM @highNodes

-- delete nodes without links
DELETE n FROM BIDoc.BasicGraphNodes n
LEFT JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = n.BasicGraphNodeId
LEFT JOIN BIDoc.BasicGraphLinks l2 ON l2.NodeToId = n.BasicGraphNodeId
WHERE l.BasicGraphLinkId IS NULL AND l2.BasicGraphLinkId IS NULL AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @grphHigh

--SELECT src.Description, tgt.Description, l.ExtendedProperties FROM BIDoc.BasicGraphNodes src
--INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = src.BasicGraphNodeId
--INNER JOIN BIDoc.BasicGraphNodes tgt ON l.NodeToId = tgt.BasicGraphNodeId
--WHERE src.GraphKind = N'DFHigh']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[CurrentParent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[descendantMap].[LowNode]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[descendantMap].[HighNode]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[NodeType]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[Description]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[ParentId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[ParentId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE1].[ssrsFolders].[CurrentParent]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[descendantMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[descendantMap].[HighNode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[descendantMap].[LowNode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[links]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[links].[SrcSrcNode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[links].[TgtSrcNode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_BuildHighLevelGraph].[@highNodes].[SourceGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_BuildHighLevelGraph].[CTE2].[links].[Strength]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildHighLevelGraph].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5959" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_BuildHighLevelGraph]&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_BuildTransitiveGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[


---------------------- clear graph

EXEC BIDoc.sp_ClearGraph @projectconfigid, @targetgraphkind

------------------------ replicate graph

CREATE TABLE #nodeIdMap
(
OldNodeId INT,
NewNodeid INT,
)


INSERT INTO BIDoc.BasicGraphNodes
           (--[BasicGraphNodeId]
           --,
		   [Name]
           ,[NodeType]
           ,[Description]
           ,[ParentId]
           ,[GraphKind]
           ,[ProjectConfigId]
           ,[SourceElementId]
           ,[TopologicalOrder])
SELECT 
			--mid.NewNodeid
			--,
			n.Name
			,n.NodeType
			,n.Description
			,NULL --pid.NewNodeid
			,@targetgraphkind
			,@projectconfigid
			,n.SourceElementId
			,0 TopologicalOrder
FROM BIDoc.BasicGraphNodes n
--INNER JOIN #nodeIdMap mid ON mid.OldNodeId = n.BasicGraphNodeId
--LEFT JOIN #nodeIdMap pid ON pid.OldNodeId = n.ParentId
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind  = @sourcegraphkind

INSERT INTO #nodeIdMap(OldNodeId, NewNodeid)
SELECT o.BasicGraphNodeId, n.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes o
INNER JOIN BIDoc.BasicGraphNodes n ON o.SourceElementId = n.SourceElementId
WHERE o.ProjectConfigId = @projectconfigid AND n.ProjectConfigId = @projectconfigid
	AND o.GraphKind = @sourcegraphkind AND n.GraphKind = @targetgraphkind

CREATE NONCLUSTERED INDEX TIX_nodeIdMap_OldNodeId ON #nodeIdMap(OldNodeId ASC)
CREATE NONCLUSTERED INDEX TIX_nodeIdMap_NewNodeId ON #nodeIdMap(NewNodeId ASC)

UPDATE n SET ParentId = np.NewNodeid FROM BIDoc.BasicGraphNodes n
INNER JOIN #nodeIdMap m ON n.BasicGraphNodeId = m.NewNodeid
INNER JOIN BIDoc.BasicGraphNodes o ON o.BasicGraphNodeId = m.OldNodeId
INNER JOIN #nodeIdMap np ON np.OldNodeId = o.ParentId

INSERT INTO BIDoc.BasicGraphLinks
(
	--BasicGraphLinkId, 
	LinkType, 
	NodeFromId, 
	NodeToId
)
SELECT --ROW_NUMBER() OVER(ORDER BY l.NodeFromId) + @linkSequenceStart - 1,
l.LinkType,
mf.NewNodeid,
mt.NewNodeid
FROM BIDoc.BasicGraphLinks l 
INNER JOIN BIDoc.BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
INNER JOIN #nodeIdMap mf ON mf.OldNodeId = l.NodeFromId
INNER JOIN #nodeIdMap mt ON mt.OldNodeId = l.NodeToId
WHERE /*l.LinkType <> @linktype AND*/ n.ProjectConfigId = @projectconfigid AND n.GraphKind = @sourcegraphkind


---------------------------------------------------------------------------------------------
------------------------------------ ensure transitivity

DECLARE @rc INT = 1
WHILE (@rc > 0)
BEGIN
	INSERT INTO BIDoc.BasicGraphLinks
	(NodeFromId, NodeToId, LinkType)
	SELECT  
	DISTINCT --TOP 1000000
	sl.NodeFromId
	,tl.NodeToId
	,@linktype
	FROM BIDoc.BasicGraphNodes sn
	INNER JOIN BIDoc.BasicGraphLinks sl ON sl.NodeFromId = sn.BasicGraphNodeId
	INNER JOIN BIDoc.BasicGraphLinks tl ON tl.NodeFromId = sl.NodeToId
	LEFT JOIN BIDoc.BasicGraphLinks dl ON dl.LinkType = @linktype 
		AND dl.NodeFromId = sl.NodeFromId AND dl.NodeToId = tl.NodeToId
	WHERE sn.GraphKind = @targetgraphkind AND sl.LinkType = @linktype AND tl.LinkType = @linktype
	AND dl.BasicGraphLinkId IS NULL AND sn.ProjectConfigId = @projectconfigid
	
	SET @rc = @@ROWCOUNT
	PRINT CONVERT(NVARCHAR(100), @rc) + ' new transitive links'
END


----------------------------------------------------------------------------------------------
-------------------------------------- cleanup

DROP TABLE #nodeIdMap]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[@targetgraphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[@sourcegraphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_BuildTransitiveGraph].[@linktype]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[OldNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_BuildTransitiveGraph].[#nodeIdMap].[NewNodeid]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildTransitiveGraph].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildTransitiveGraph].[@sourcegraphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildTransitiveGraph].[@targetgraphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_BuildTransitiveGraph].[@linktype]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3712" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_BuildTransitiveGraph]&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;,@sourcegraphkind NVARCHAR(50) --= N'DataFlow'&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;,@targetgraphkind NVARCHAR(50) --= N'DataFlowTransitive'&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;,@linktype NVARCHAR(50) --= N'DataFlow'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_CalculateTopologicalDataFlowOrder]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @linktype NVARCHAR(50) = N'DataFlow'
DECLARE @graphkind NVARCHAR(50) = N'DataFlow'
DECLARE @topol INT = 2
DECLARE @rc INT

UPDATE BIDoc.BasicGraphNodes SET TopologicalOrder = 0 WHERE GraphKind = @graphkind AND ProjectConfigId = @projectconfigid

-- set the topological order 1 to nodes that contribute the links from another node to itself (e.g. merge statemtnts, updates that read and modify the same column)

UPDATE dfn SET TopologicalOrder = 1
FROM BIDoc.BasicGraphLinks l 
INNER JOIN BIDoc.BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphLinks lfr ON lfr.NodeFromId = l.NodeFromId AND lfr.LinkType = @linktype AND lfr.NodeToId <> l.NodeToId
INNER JOIN BIDoc.BasicGraphLinks lto ON lto.NodeToId = l.NodeFromId AND lto.LinkType = @linktype AND lto.NodeFromId <> l.NodeFromId
INNER JOIN BIDoc.BasicGraphNodes midn ON midn.BasicGraphNodeId = lfr.NodeToId AND midn.BasicGraphNodeId = lto.NodeFromId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = midn.SourceElementId
INNER JOIN BIDoc.BasicGraphNodes dfn ON dfn.SourceElementId = e.ModelElementId AND dfn.GraphKind = @graphkind
WHERE l.NodeFromId = l.NodeToId AND l.LinkType = @linktype
AND n.GraphKind = N'DataFlowTransitive' AND midn.NodeType <> N'ColumnElement' AND n.ProjectConfigId = @projectconfigid


-- while there is a node with incoming link(s) without an ordwer assigned
WHILE EXISTS(
SELECT TOP 1 1 FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = n.BasicGraphNodeId
WHERE n.TopologicalOrder = 0 AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND l.LinkType = @linktype
)
BEGIN
	
	-- assign new topological order to all nodes for which all incoming links come from nodes that already have their number assigned
	UPDATE n SET n.TopologicalOrder = @topol
	FROM BIDoc.BasicGraphNodes n
	LEFT JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = n.BasicGraphNodeId AND l.LinkType = @linktype
	LEFT JOIN BIDoc.BasicGraphNodes srcN ON srcN.BasicGraphNodeId = l.NodeFromId AND srcN.TopologicalOrder = 0
	WHERE n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid AND srcN.BasicGraphNodeId IS NULL AND n.TopologicalOrder = 0

	SET @rc = @@ROWCOUNT

	PRINT CONVERT(NVARCHAR(255), @rc) + N' nodes assigned topological order of ' + CONVERT(NVARCHAR(255), @topol)

	IF @rc = 0 BEGIN
		IF EXISTS(
			SELECT TOP 1 1 FROM BIDoc.BasicGraphNodes n 
			INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = n.BasicGraphNodeId
			WHERE n.TopologicalOrder = 0 AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND l.LinkType = @linktype
			)
			BEGIN
			SELECT n.* FROM BIDoc.BasicGraphNodes n 
			INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = n.BasicGraphNodeId
			WHERE n.TopologicalOrder = 0 AND n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND l.LinkType = @linktype

			RAISERROR(N'Unreachable nodes detected', 16, 1)
			RETURN
			END
	END

	SET @topol = @topol + 1
END


-- set parent topology as the max of child topological orders
WHILE EXISTS(
	SELECT TOP 1 1 FROM BIDoc.BasicGraphNodes n
	INNER JOIN BIDoc.BasicGraphNodes cn ON cn.ParentId = n.BasicGraphNodeId
	WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.TopologicalOrder < cn.TopologicalOrder
)
BEGIN
	UPDATE n SET TopologicalOrder = cn.TopologicalOrder
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN BIDoc.BasicGraphNodes cn ON cn.ParentId = n.BasicGraphNodeId
	WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.TopologicalOrder < cn.TopologicalOrder
	
END

-- copy the order from to DataFlowTransitive
UPDATE n SET TopologicalOrder = dfn.TopologicalOrder FROM
BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphNodes dfn ON dfn.GraphKind = @graphkind AND dfn.SourceElementId = n.SourceElementId
WHERE n.GraphKind = N'DataFlowTransitive' AND n.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CalculateTopologicalDataFlowOrder].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_CalculateTopologicalDataFlowOrder].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4132" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_CalculateTopologicalDataFlowOrder]&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClearAggregations]">
			<Property Name="BodyScript">
				<Value><![CDATA[

EXEC [Adm].[sp_WriteLogInfo] N'Clearing machine learning'

DELETE p FROM Learning.OlapRulePremises p
INNER JOIN Learning.OlapRules r ON p.OlapRuleId = r.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid

DELETE c FROM Learning.OlapRuleConclusions c
INNER JOIN Learning.OlapRules r ON c.OlapRuleId = r.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid

DELETE FROM Learning.OlapRules WHERE ProjectConfigId = @projectconfigid

DELETE FROM Learning.OlapQueryFields WHERE ProjectConfigId = @projectconfigid

DELETE FROM Learning.OlapFields WHERE ProjectConfigId = @projectconfigid

DELETE FROM Learning.OlapFieldReferences WHERE ProjectConfigId = @projectconfigid

------

EXEC [Adm].[sp_WriteLogInfo] N'Clearing high level ancestors'

DECLARE @rc INT = 1

WHILE @rc > 0
BEGIN
DELETE TOP (10000) ea FROM BIDoc.HigherLevelElementAncestors ea
INNER JOIN BIDoc.ModelElements e ON ea.SouceElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing documents'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) d FROM [BIDoc].GraphDocuments d
INNER JOIN [BIDoc].[BasicGraphNodes] n ON d.GraphNode_Id = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid --AND n.GraphKind = @graphkind
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing graph links'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) l FROM [BIDoc].[BasicGraphLinks] l
INNER JOIN [BIDoc].[BasicGraphNodes] n ON l.NodeFromId = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid --AND n.GraphKind = @graphkind
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing graph nodes'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) FROM [BIDoc].[BasicGraphNodes] WHERE ProjectConfigId = @projectconfigid --AND GraphKind = @graphkind
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing data messages'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) dm FROM [BIDoc].[DataMessages] dm
INNER JOIN [BIDoc].[ModelElements] e ON dm.SourceElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectconfigid
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing fulltext'

DELETE fts FROM Search.FullTextSearch fts
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = fts.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId

UPDATE Annotate.AnnotationElements SET ModelElementId = NULL WHERE ProjectConfigId = @projectconfigid


UPDATE BIDoc.LineageGridHistory 
SET SourceRootElementId = NULL, TargetRootElementId = NULL 
WHERE ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearAggregations].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearAggregations].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2781" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClearAggregations]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClearGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--DELETE d FROM [BIDoc].GraphDocuments d
--INNER JOIN [BIDoc].[BasicGraphNodes] n ON d.GraphNode_Id = n.BasicGraphNodeId
--WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind

/*
WHILE ((SELECT COUNT(*) FROM [BIDoc].[BasicGraphLinks] l
INNER JOIN [BIDoc].[BasicGraphNodes] n ON l.NodeFromId = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind
)> 0
)
*/

DECLARE @rc INT = 1

WHILE @rc > 0
BEGIN

DELETE TOP (100000) l FROM [BIDoc].[BasicGraphLinks] l WITH(tablock)
INNER JOIN [BIDoc].[BasicGraphNodes] n ON l.NodeFromId = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind

SET @rc = @@ROWCOUNT
END

SET @rc = 1

WHILE @rc > 0
BEGIN

DELETE TOP (100000) FROM [BIDoc].[BasicGraphNodes] WHERE ProjectConfigId = @projectconfigid AND GraphKind = @graphkind

SET @rc = @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearGraph].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearGraph].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1020" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClearGraph]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClearGraphDocuments]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE d FROM [BIDoc].GraphDocuments d
INNER JOIN [BIDoc].[BasicGraphNodes] n ON d.GraphNode_Id = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind
AND d.DocumentType = ISNULL(@documentType, d.DocumentType)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraphDocuments].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraphDocuments].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[DocumentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraphDocuments].[@documentType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearGraphDocuments].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearGraphDocuments].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearGraphDocuments].[@documentType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="405" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClearGraphDocuments]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@documentType NVARCHAR(50) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClearModel]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @rc INT = 1

EXEC [BIDoc].[sp_ClearAggregations] @projectConfigId

--SET @rc = 1
--WHILE @rc > 0
--BEGIN
--DELETE TOP (10000) FROM [BIDoc].[BasicGraphNodes] WHERE ProjectConfigId = @projectconfigid --AND GraphKind = @graphkind
--SELECT @rc = @@ROWCOUNT
--END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing model links'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) l FROM [BIDoc].[ModelLinks] l
INNER JOIN [BIDoc].[ModelElements] ef ON l.ElementFromId = ef.ModelElementId
INNER JOIN [BIDoc].[ModelElements] et ON l.ElementToId = et.ModelElementId
WHERE ef.ProjectConfigId = @projectconfigid AND (ef.Type LIKE N'CD.DLS.Model.Mssql.%' OR et.Type LIKE N'CD.DLS.Model.Mssql.%')
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing model elements'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) FROM [BIDoc].[ModelElements] 
WHERE ProjectConfigId = @projectconfigid AND [Type] LIKE N'CD.DLS.Model.Mssql.%'
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Done clearing model'

IF @requestId IS NOT NULL
BEGIN
-- notify the WF followup
EXEC [Adm].[sp_SaveDbOperationFinishedMessage] @requestId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearAggregations]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearModel].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearModel].[@requestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveDbOperationFinishedMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearModel].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearModel].[@requestId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1292" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClearModel]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClearModelPartWithAggregations]">
			<Property Name="BodyScript">
				<Value><![CDATA[


--EXEC [BIDOc].[sp_SetRefPathIntervals] @projectconfigid
	
--DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
--DECLARE 
--	@intervalFrom INT,
--	@intervalTo INT

--SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId


--EXEC [Adm].[sp_WriteLogInfo] N'Clearing machine learning'

--DELETE p FROM Learning.OlapRulePremises p
--INNER JOIN Learning.OlapRules r ON p.OlapRuleId = r.OlapRuleId
--WHERE r.ProjectConfigId = @projectconfigid

--DELETE c FROM Learning.OlapRuleConclusions c
--INNER JOIN Learning.OlapRules r ON c.OlapRuleId = r.OlapRuleId
--WHERE r.ProjectConfigId = @projectconfigid

--DELETE FROM Learning.OlapRules WHERE ProjectConfigId = @projectconfigid

--DELETE FROM Learning.OlapQueryFields WHERE ProjectConfigId = @projectconfigid

--DELETE FROM Learning.OlapFields WHERE ProjectConfigId = @projectconfigid

--DELETE FROM Learning.OlapFieldReferences WHERE ProjectConfigId = @projectconfigid

---------------

EXEC [Adm].[sp_WriteLogInfo] N'Clearing high level ancestors'

DECLARE @rc INT = 1

WHILE @rc > 0
BEGIN
DELETE TOP (10000) ea FROM BIDoc.HigherLevelElementAncestors ea
INNER JOIN BIDoc.ModelElements e ON ea.SouceElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing documents'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) d FROM [BIDoc].GraphDocuments d
INNER JOIN [BIDoc].[BasicGraphNodes] n ON d.GraphNode_Id = n.BasicGraphNodeId
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE n.ProjectConfigId = @projectconfigid 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND n.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing graph links'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) l FROM [BIDoc].[BasicGraphLinks] l
INNER JOIN [BIDoc].[BasicGraphNodes] n ON l.NodeFromId = n.BasicGraphNodeId
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE n.ProjectConfigId = @projectconfigid 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND n.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing graph nodes'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) n FROM [BIDoc].[BasicGraphNodes] n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE n.ProjectConfigId = @projectconfigid 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END


EXEC [Adm].[sp_WriteLogInfo] N'Clearing data messages'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) dm FROM [BIDoc].[DataMessages] dm
INNER JOIN [BIDoc].[ModelElements] e ON dm.SourceElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectconfigid
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing fulltext'

DELETE fts FROM Search.FullTextSearch fts
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = fts.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo

UPDATE ae  SET ModelElementId = NULL 
FROM Annotate.AnnotationElements ae
INNER JOIN BIDoc.ModelElements e ON ae.ModelElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectconfigid 
AND LEFT(e.RefPath, LEN(@path)) = @path
--AND e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo

EXEC [Adm].[sp_WriteLogInfo] N'Clearing model links'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) l FROM [BIDoc].[ModelLinks] l
INNER JOIN [BIDoc].[ModelElements] ef ON l.ElementFromId = ef.ModelElementId
INNER JOIN [BIDoc].[ModelElements] et ON l.ElementToId = et.ModelElementId
WHERE ef.ProjectConfigId = @projectconfigid 
AND LEFT(ef.RefPath, LEN(@path)) = @path
--AND ef.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END

EXEC [Adm].[sp_WriteLogInfo] N'Clearing model elements'

SET @rc = 1
WHILE @rc > 0
BEGIN
DELETE TOP (10000) FROM [BIDoc].[ModelElements] 
WHERE ProjectConfigId = @projectconfigid
AND LEFT(RefPath, LEN(@path)) = @path
--AND RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
SELECT @rc = @@ROWCOUNT
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearModelPartWithAggregations].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearModelPartWithAggregations].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[GraphDocuments].[GraphNode_Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearModelPartWithAggregations].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClearModelPartWithAggregations].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4906" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClearModelPartWithAggregations]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ClenseDataFlowSequences]">
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @id NVARCHAR(100)
SET @id = REPLACE(CAST(@projectconfigid AS NVARCHAR(100)),'-','')

DECLARE @message NVARCHAR(MAX)

-- firstTableSource
SELECT st.Id, st.SequenceId, st.SourceNodeId, pst.TargetNodeId AS 'pstTargetNodeId', st.TargetNodeId
INTO #firstStepSource
FROM BIDoc.DataFlowSequenceSteps st
INNER JOIN BIDoc.DataFlowSequenceSteps pst ON st.SequenceId = pst.SequenceId AND st.SourceNodeId = pst.SourceNodeId
INNER JOIN BIDoc.DataFlowSequences s ON s.SequenceId = st.SequenceId
INNER JOIN BIDoc.BasicGraphNodes n ON st.SourceNodeId = n.BasicGraphNodeId
WHERE s.ProjectConfigid = @projectconfigid AND n.ProjectConfigId = @projectconfigid

-- firtstTableTarget
SELECT st.Id, st.SequenceId, st.TargetNodeId, st.SourceNodeId, pst.SourceNodeId AS 'pstSourceNodeId'
INTO #firstStepTarget
FROM BIDoc.DataFlowSequenceSteps st
INNER JOIN BIDoc.DataFlowSequenceSteps pst ON st.SequenceId = pst.SequenceId AND st.TargetNodeId = pst.TargetNodeId
INNER JOIN BIDoc.DataFlowSequences s ON s.SequenceId = st.SequenceId
INNER JOIN BIDoc.BasicGraphNodes n ON st.SourceNodeId = n.BasicGraphNodeId
WHERE s.ProjectConfigid = @projectconfigid AND n.ProjectConfigId = @projectconfigid


-- delete lower level duplicate targets
SELECT st.Id
INTO #viewDuplicateTargets
FROM #firstStepSource st
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = st.TargetNodeId AND n.ParentId = st.pstTargetNodeId
-- do not delete child nodes (st) if there is a grandchild (chn) with the same source
LEFT JOIN BIDoc.BasicGraphNodes chn ON chn.ParentId = n.BasicGraphNodeId
LEFT JOIN BIDoc.DataFlowSequenceSteps chst ON st.SequenceId = chst.SequenceId AND chst.SourceNodeId = st.SourceNodeId AND chst.TargetNodeId = chn.BasicGraphNodeId
WHERE chst.Id IS NULL

DECLARE @rc INT = 1
WHILE @rc > 0
BEGIN
	DECLARE @DeleteSQL NVARCHAR(MAX)
	SET @DeleteSQL = 
	'DELETE TOP (100000) st FROM [' + @id + '].[DataFlowSequenceSteps] st
	INNER JOIN #viewDuplicateTargets vdt ON vdt.Id = st.Id'
	EXEC sp_executesql @DeleteSQL

	SET @rc = @@ROWCOUNT
	SET @message = N'Clensed ' + CONVERT(NVARCHAR(20), @rc) + N' duplicate targets'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message

END

DROP TABLE #viewDuplicateTargets


-- delete lower level duplicate sources

SELECT st.Id
INTO #viewDuplicateSources
FROM #firstStepTarget st
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = st.SourceNodeId AND n.ParentId = pstSourceNodeId
-- do not delete child nodes (st) if there is a grandchild (chn) with the same target
LEFT JOIN BIDoc.BasicGraphNodes chn ON chn.ParentId = n.BasicGraphNodeId
LEFT JOIN BIDoc.DataFlowSequenceSteps chst ON st.SequenceId = chst.SequenceId AND chst.TargetNodeId = st.TargetNodeId AND chst.SourceNodeId = chn.BasicGraphNodeId
WHERE chst.Id IS NULL

SET @rc = 1
WHILE @rc > 0
BEGIN
	DECLARE @DeleteSQL1 NVARCHAR(MAX)
	SET @DeleteSQL1 = 
	'
	DELETE TOP (100000) st FROM [' + @id + '].[DataFlowSequenceSteps] st
	INNER JOIN #viewDuplicateSources vds ON vds.Id = st.Id'
	EXEC sp_executesql @DeleteSQL1
	
	SET @rc = @@ROWCOUNT
	SET @message = N'Clensed ' + CONVERT(NVARCHAR(20), @rc) + N' duplicate sources'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message

END

DROP TABLE #viewDuplicateSources

---------------------------------------------------

-- delete lower level duplicate targets - 2 step skip

SELECT st.Id
INTO #viewLowerTargets
FROM #firstStepSource st
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = pstTargetNodeId
INNER JOIN BIDoc.BasicGraphNodes n2 ON n2.BasicGraphNodeId = st.TargetNodeId AND n2.ParentId = n.BasicGraphNodeId

SET @rc = 1
WHILE @rc > 0
BEGIN
	DECLARE @DeleteSQL2 NVARCHAR(MAX)
	SET @DeleteSQL2 = 
	'
	DELETE TOP (100000) st FROM [' + @id + '].[DataFlowSequenceSteps] st
	INNER JOIN #viewLowerTargets vlt ON vlt.Id = st.Id'
	EXEC sp_executesql @DeleteSQL2

	SET @rc = @@ROWCOUNT
	SET @message = N'Clensed ' + CONVERT(NVARCHAR(20), @rc) + N' duplicate targets'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message
END

DROP TABLE #firstStepSource
DROP TABLE #viewLowerTargets

-- delete lower level duplicate sources - 2 step skip

SELECT st.Id
INTO #viewLowerSources
FROM #firstStepTarget st
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = pstSourceNodeId
INNER JOIN BIDoc.BasicGraphNodes n2 ON n2.BasicGraphNodeId = st.SourceNodeId AND n2.ParentId = n.BasicGraphNodeId

SET @rc = 1
WHILE @rc > 0
BEGIN
	DECLARE @DeleteSQL3 NVARCHAR(MAX)
	SET @DeleteSQL3 = 
	'
	DELETE TOP (100000) st FROM [' + @id + '].[DataFlowSequenceSteps] st
	INNER JOIN #viewLowerSources vls ON vls.Id = st.Id'
	EXEC sp_executesql @DeleteSQL3

	SET @rc = @@ROWCOUNT
	SET @message = N'Clensed ' + CONVERT(NVARCHAR(20), @rc) + N' duplicate sources'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message
END

DROP TABLE #firstStepTarget
DROP TABLE #viewLowerSources

----------------------------------------------

-- delete transitive steps
SELECT st.Id
INTO #viewTransitiveSteps
FROM BIDoc.DataFlowSequenceSteps st
INNER JOIN BIDoc.DataFlowSequenceSteps fst ON st.SequenceId = fst.SequenceId AND st.SourceNodeId = fst.SourceNodeId
INNER JOIN BIDoc.DataFlowSequenceSteps tst ON st.SequenceId = tst.SequenceId AND st.TargetNodeId = tst.TargetNodeId
INNER JOIN BIDoc.DataFlowSequences s ON s.SequenceId = st.SequenceId AND s.ProjectConfigId = @projectconfigid
INNER JOIN BIDoc.BasicGraphNodes n ON st.SourceNodeId = n.BasicGraphNodeId

WHERE s.ProjectConfigid = @projectconfigid AND fst.TargetNodeId = tst.SourceNodeId AND n.ProjectConfigId = @projectconfigid

SET @rc = 1
WHILE @rc > 0
BEGIN
	DECLARE @DeleteSQL4 NVARCHAR(MAX)
	SET @DeleteSQL4 = 
	'
	DELETE TOP (100000) st FROM [' + @id + '].[DataFlowSequenceSteps] st
	INNER JOIN #viewTransitiveSteps vst ON vst.Id = st.Id'
	EXEC sp_executesql @DeleteSQL4

	SET @rc = @@ROWCOUNT
	SET @message = N'Deleted '+ CONVERT(NVARCHAR(20), @rc) + N' transitive steps'
	PRINT @message
	EXEC [Adm].[sp_WriteLogInfo] @message
END

DROP TABLE #viewTransitiveSteps

--------------------------------------------

PRINT N'Simplifying view targets'

--FirstStepTargets/Scripts
SELECT st.TargetNodeId, st.Id StepId, st.SequenceId, viewNode.SourceElementId,st.SourceNodeId
INTO #firstStepScript
FROM BIDoc.DataFlowSequenceSteps st
INNER JOIN BIDoc.BasicGraphNodes colNode ON colNode.BasicGraphNodeId = st.TargetNodeId
INNER JOIN BIDoc.BasicGraphNodes viewNode ON viewNode.BasicGraphNodeId = colNode.ParentId
WHERE colNode.NodeType = N'ColumnElement' AND viewNode.NodeType = N'ViewElement'
  AND colNode.ProjectConfigId = @projectConfigId


SELECT pst.SourceNodeId, pst.TargetNodeId MidNodeid, st.TargetNodeId, pst.StepNumber, pst.Id PreStepId, st.StepId, st.SequenceId
INTO #viewTargets
FROM #firstStepScript st
INNER JOIN BIDoc.BasicGraphNodes preColNode ON preColNode.BasicGraphNodeId = st.SourceNodeId
INNER JOIN BIDoc.ModelElements preColElement ON preColNode.SourceElementId = preColElement.ModelElementId
INNER JOIN BIDoc.ModelElements viewElement ON viewElement.ModelElementId = st.SourceElementId
INNER JOIN BIDoc.DataFlowSequenceSteps pst ON pst.SequenceId = st.SequenceId AND pst.TargetNodeId = st.SourceNodeId
WHERE LEFT(preColElement.RefPath, LEN(viewElement.RefPath)) = viewElement.RefPath

DECLARE @DeleteSQL5 NVARCHAR(MAX)
	SET @DeleteSQL5 = 
	'INSERT INTO [' + @id + '].[DataFlowSequenceSteps](SourceNodeId, TargetNodeId, SequenceId, StepNumber)
SELECT SourceNodeId, TargetNodeId, SequenceId, StepNumber FROM #viewTargets

DELETE st FROM [' + @id + '].[DataFlowSequenceSteps] st
INNER JOIN #viewTargets vt ON vt.PreStepId = st.Id

DELETE st FROM [' + @id + '].[DataFlowSequenceSteps] st
INNER JOIN #viewTargets vt ON vt.StepId = st.Id'
EXEC sp_executesql @DeleteSQL5

DROP TABLE #viewTargets

SELECT st.StepId
INTO #viewFirstScriptSteps
FROM #firstStepScript st
LEFT JOIN BIDoc.DataFlowSequenceSteps pst ON pst.SequenceId = st.SequenceId AND pst.TargetNodeId = st.SourceNodeId
INNER JOIN BIDoc.BasicGraphNodes scrNode ON scrNode.BasicGraphNodeId = st.SourceNodeId
WHERE pst.Id IS NULL AND scrNode.NodeType = N'SqlScriptElement'

DECLARE @DeleteSQL6 NVARCHAR(MAX)
	SET @DeleteSQL6 = 
	'DELETE st FROM [' + @id + '].[DataFlowSequenceSteps] st
INNER JOIN #viewFirstScriptSteps vfs ON vfs.StepId = st.Id'
EXEC sp_executesql @DeleteSQL6

DROP TABLE #firstStepScript
DROP TABLE #viewFirstScriptSteps]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[@projectconfigid]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[TargetNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[pstTargetNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[SequenceId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[SourceNodeId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_WriteLogInfo]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateTargets]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[pstSourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[SequenceId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[TargetNodeId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[Id]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateSources]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[pstTargetNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerTargets]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerSources]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTransitiveSteps]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceElementId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SequenceId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[TargetNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[StepId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SequenceId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[StepId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewFirstScriptSteps]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[SequenceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[pstTargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[SequenceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[pstSourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateTargets].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateSources]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewDuplicateSources].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerTargets].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepSource].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerSources]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewLowerSources].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepTarget].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTransitiveSteps]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTransitiveSteps].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[StepId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SequenceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[MidNodeid]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[TargetNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[StepNumber]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[PreStepId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[StepId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[StepId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewTargets].[SequenceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[SequenceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewFirstScriptSteps]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_ClenseDataFlowSequences].[#viewFirstScriptSteps].[StepId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_ClenseDataFlowSequences].[#firstStepScript].[StepId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ClenseDataFlowSequences].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="8625" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ClenseDataFlowSequences]&#xD;&#xA;&#x9;--DECLARE&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'FD1312FC-1182-4B9C-82D9-2089F3468BFB'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_CreateDataFlowGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[

----------------------
-- clear higher ancestors (reference nodes)

DECLARE @rc INT = 1
WHILE @rc > 0
BEGIN
	DELETE TOP (10000) a FROM [BIDoc].[HigherLevelElementAncestors] a
	INNER JOIN BIDoc.ModelElements e ON a.SouceElementId = e.ModelElementId
	WHERE e.ProjectConfigId = @projectConfigId

	SELECT @rc = @@ROWCOUNT
END

CREATE TABLE #dataflowLinks
(
RuleName NVARCHAR(MAX),
ElementFromId INT,
ElementToId INT,
)


-------------------------

DECLARE @graphKind NVARCHAR(50) = N'DataFlow'

---------------------- clear graph

EXEC BIDoc.sp_ClearGraph @projectconfigid, @graphKind

------------------------ replicate graph

INSERT INTO BIDoc.BasicGraphNodes
(
Name, 
NodeType, 
ParentId, 
GraphKind, 
ProjectConfigId, 
SourceElementId, 
TopologicalOrder
)
SELECT
e.Caption,
REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(e.Type,
N'CD.DLS.Model.Mssql', N''), N'.Db.', N''), N'.Ssis.', N''), N'.Ssas.', N''), N'.Ssrs.', N''), N'.Agent.', N''), N'.Tabular.', N''), N'.Pbi.', N'') NodeType,
NULL,
@graphKind,
e.ProjectConfigId,
e.ModelElementId,
0 TopologicalOrder
FROM BIDoc.ModelElements e
WHERE e.ProjectConfigId = @projectconfigid

UPDATE en 
SET ParentId = pen.BasicGraphNodeId 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.Type = N'parent'
INNER JOIN BIDoc.ModelElements pe ON pe.ModelElementId = l.ElementToId
INNER JOIN BIDoc.BasicGraphNodes en ON en.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.BasicGraphNodes pen ON pen.SourceElementId = pe.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId
AND pe.ProjectConfigId = @projectConfigId
AND en.GraphKind = @graphKind

INSERT INTO BIDoc.BasicGraphLinks
(LinkType, NodeFromId, NodeToId)
SELECT 
N'Parent', n.BasicGraphNodeId, n.ParentId
FROM BIDoc.BasicGraphNodes n 
WHERE n.ProjectConfigId = @projectConfigId
AND n.ParentId IS NOT NULL

--------------------------- 
-- MssqlReferenceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'MssqlReferenceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Reference'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type <> N'CD.DLS.Model.Mssql.Db.SqlDmlTargetReferenceElement'

-----------------
-- MssqlDmlTargetReferenceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'MssqlDmlTargetReferenceDataFlowRule', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Reference'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Db.SqlDmlTargetReferenceElement'


-----------------
-- MssqlDmlSourceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'MssqlDmlSourceDataFlowRule', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'TargetReference'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Db.SqlDmlSourceElement'


-----------------
-- MssqlNAryOperationOperandRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'MssqlNAryOperationOperandRule', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'OperationOutputColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Db.SqlNAryOperationOperandColumnElement'


-----------------
-- SsisDfExternalColumnsDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfExternalColumnsDataFlowRule_ExternalDestinationColumn', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'ExternalDestinationColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfColumnElement'

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfExternalColumnsDataFlowRule_ExternalSourceColumn', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'ExternalSourceColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfColumnElement'

-----------------
-- SsisDfTransformationDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfTransformationDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'SourceDfColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type IN(N'CD.DLS.Model.Mssql.Ssis.DfColumnElement', N'CD.DLS.Model.Mssql.Ssis.DfUnpivotSourceReferenceElement', N'CD.DLS.Model.Mssql.Ssis.DfLookupColumnElement')


-----------------
-- SsisDfSourceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfSourceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'SourceConnection'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfSourceElement'


-----------------
-- SsisDfUnpivotSourceDataFlowRuleTPK

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfUnpivotSourceDataFlowRuleTPK', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'TargetPivotKeyColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfUnpivotSourceReferenceElement'


-----------------
-- SsisDfUnpivotSourceDataFlowRuleTV

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfUnpivotSourceDataFlowRuleTV', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'TargetValueColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfUnpivotSourceReferenceElement'


-----------------
-- SsisDfAggregationDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfAggregationDataFlowRule', ls.ElementToId, lt.ElementToId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks ls ON e.ModelElementId = ls.ElementFromId AND ls.[Type] = N'SourceDfColumn'
INNER JOIN BIDoc.ModelLinks lt ON e.ModelElementId = lt.ElementFromId AND lt.[Type] = N'TargetDfColumn'
--INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfColumnAggregationLinkElement'

-----------------
-- SsisDfLookupOutputJoinReferenceRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsisDfLookupOutputJoinReferenceRule', ls.ElementToId, lt.ElementToId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks ls ON e.ModelElementId = ls.ElementFromId AND ls.[Type] = N'InputJoinColumn'
INNER JOIN BIDoc.ModelLinks lt ON e.ModelElementId = lt.ElementFromId AND lt.[Type] = N'OutputColumn'
--INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssis.DfLookupOutputJoinReferenceElement'


-----------------
-- SsasDsvSourceColumnDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasDsvSourceColumnDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Source'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.DatasourceViewColumnElement'

-----------------
-- SsasDimensionKeyColumnDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasDimensionKeyColumnDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'DsvColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.KeyColumnElement'


-----------------
-- SsasDimensionNameColumnDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasDimensionNameColumnDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'DsvColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.NameColumnElement'


-----------------
-- SsasHierarchyLevelDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasHierarchyLevelDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Attribute'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.HierarchyLevelElement'


-----------------
-- SsasPhysicalMeasureDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasPhysicalMeasureDataFlowRule', pse.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks pl ON e.ModelElementId = pl.ElementToId AND pl.[Type] = N'parent'
INNER JOIN BIDoc.ModelElements pse ON pse.ModelElementId = pl.ElementFromId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement'
AND pse.Type = N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasurePartitionSourceElement'


-----------------
-- SsasPhysicalMeasurePartitionSourceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasPhysicalMeasurePartitionSourceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Source'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasurePartitionSourceElement'

-----------------
-- SsasPartitionColumnDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasPartitionColumnDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Source'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.PartitionColumnElement'


-----------------
-- SsasCubeDimensionDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsasCubeDimensionDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'DatabaseDimension'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.CubeDimensionElement'


-------------------
---- CubeDimensionAttributeDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'CubeDimensionAttributeDataFlowRule', re.ModelElementId, e.ModelElementId 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'DatabaseDimensionAttribute'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement'


-------------------
---- CubeDimensionHierarchyDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'CubeDimensionHierarchyDataFlowRule', re.ModelElementId, e.ModelElementId 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'DatabaseDimensionHierarchy'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.CubeDimensionHierarchyElement'


-------------------
---- CubeDimensionHierarchyLevelDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'CubeDimensionHierarchyLevelDataFlowRule', re.ModelElementId, e.ModelElementId 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Attribute'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.CubeDimensionHierarchyLevelElement'


-----------------
-- SsrsDataSetFieldDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsrsDataSetFieldDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Source'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssrs.DataSetFieldElement'


-----------------
-- SsrsReportParameterValidValuesDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsrsReportParameterValidValuesDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'ValueField'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssrs.ReportParameterValidValuesDataSetElement'


-----------------
-- SsrsReportParameterDefaultValuesDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'SsrsReportParameterDefaultValuesDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'ValueField'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssrs.ReportParameterDefaultValuesDataSetElement'

-------------------------
-- TabularPartitionColumnSourceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'TabularPartitionColumnSourceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'SourceElement'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Tabular.SsasTabularPartitionColumnElement'

-------------------------
-- TabularPartitionColumnTargetTableColumnDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'TabularPartitionColumnTargetTableColumnDataFlowRule', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'TargetTableColumn'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Tabular.SsasTabularPartitionColumnElement'

-------------------------
-- DaxTableReferenceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'DaxTableReferenceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Reference'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.DaxTableReferenceElement'

-------------------------
-- DaxColumnReferenceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'DaxColumnReferenceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Reference'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.DaxColumnReferenceElement'


-------------------------
-- DaxLinkDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'DaxLinkDataFlowRule', sre.ModelElementId, tre.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks sl ON e.ModelElementId = sl.ElementFromId AND sl.[Type] = N'Source'
INNER JOIN BIDoc.ModelElements sre ON sre.ModelElementId = sl.ElementToId
INNER JOIN BIDoc.ModelLinks tl ON e.ModelElementId = tl.ElementFromId AND tl.[Type] = N'Target'
INNER JOIN BIDoc.ModelElements tre ON tre.ModelElementId = tl.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Mssql.Ssas.DaxDataFlowLinkElement'

-------------------------
-- DaxLinkTargetDataFlowRule

--INSERT INTO #dataflowLinks
--(RuleName, ElementFromId, ElementToId)

--SELECT DISTINCT N'DaxLinkTargetDataFlowRule', e.ModelElementId, re.ModelElementId FROM BIDoc.ModelElements e
--INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'Target'
--INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
--AND e.ProjectConfigId = @projectConfigId
--AND e.Type = N'CD.DLS.Model.Mssql.Ssas.DaxDataFlowLinkElement'

-------------------------
--PivotTableFieldSourceDataFlowRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'PivotTableFieldSourceDataFlowRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'SourceField'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Business.Excel.PivotTableFieldElement'

-------------------------
--PivotTableFieldVaulesFilterSourceMeasureRule

INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT N'PivotTableFieldVaulesFilterSourceMeasureRule', re.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks l ON e.ModelElementId = l.ElementFromId AND l.[Type] = N'SourceMeasure'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementToId
AND e.ProjectConfigId = @projectConfigId
AND e.Type = N'CD.DLS.Model.Business.Excel.PivotTableValuesFilterElement'

--
INSERT INTO #dataflowLinks
(RuleName, ElementFromId, ElementToId)

SELECT DISTINCT  N'PowerBIDataFlowRule',pse.ModelElementId, e.ModelElementId FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelLinks pl ON e.ModelElementId = pl.ElementToId AND pl.[Type] = N'parent'
INNER JOIN BIDoc.ModelElements pse ON pse.ModelElementId = pl.ElementFromId
AND 
(
e.Type = N'CD.DLS.Model.Mssql.Pbi.ReportSectionElement'
OR e.Type = N'CD.DLS.Model.Mssql.Pbi.ReportElement'
OR e.Type = N'CD.DLS.Model.Mssql.Pbi.VisualElement'
OR e.Type = N'CD.DLS.Model.Mssql.Pbi.ConnectionElement'
OR e.Type = N'CD.DLS.Model.Mssql.Pbi.PbiTableElement'
)


--- add DF links to the graph

;WITH dataflowLinks AS (
SELECT DISTINCT ElementFromId, ElementToId FROM #dataflowLinks
)
INSERT INTO BIDoc.BasicGraphLinks
(LinkType, NodeFromId, NodeToId)
SELECT
N'DataFlow',
nf.BasicGraphNodeId,
nt.BasicGraphNodeId
FROM dataflowLinks l
INNER JOIN BIDoc.BasicGraphNodes nf ON nf.SourceElementId = l.ElementFromId
INNER JOIN BIDoc.BasicGraphNodes nt ON nt.SourceElementId = l.ElementToId
WHERE nf.GraphKind = @graphKind AND nt.GraphKind = @graphKind

DROP TABLE #dataflowLinks]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[RuleName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[RuleName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementFromId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementToId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_CreateDataFlowGraph].[CTE1].[dataflowLinks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_CreateDataFlowGraph].[CTE1].[dataflowLinks].[ElementFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_CreateDataFlowGraph].[CTE1].[dataflowLinks].[ElementToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_CreateDataFlowGraph].[#dataflowLinks].[ElementToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_CreateDataFlowGraph].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="22071" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_CreateDataFlowGraph]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--DECLARE @projectConfigId UNIQUEIDENTIFIER = N'87E5A6F8-7ADD-4292-8537-E422EE66AD61'

DECLARE @sourceGraphKind NVARCHAR(50) = N'DataFlow'
DECLARE @targetGraphKind NVARCHAR(50) = N'DataFlowLowDetail'

--------- clear graph

EXEC BIDoc.sp_ClearGraph @projectconfigid, @targetgraphkind

---------------------
CREATE TABLE #nodeIdMap
(
OldNodeId INT,
NewNodeId INT,
)


INSERT INTO BIDoc.BasicGraphNodes
           (--[BasicGraphNodeId]
           --,
		   [Name]
           ,[NodeType]
           ,[Description]
           ,[ParentId]
           ,[GraphKind]
           ,[ProjectConfigId]
           ,[SourceElementId]
           ,[TopologicalOrder])
SELECT 
			--mid.NewNodeid
			--,
			n.Name
			,n.NodeType
			,n.Description
			,NULL --pid.NewNodeid
			,@targetgraphkind
			,@projectconfigid
			,n.SourceElementId
			,0 TopologicalOrder
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDetailLevels dl ON dl.ElementType = e.[Type]
WHERE 
	n.ProjectConfigId = @projectconfigid 
	AND n.GraphKind  = @sourcegraphkind
	AND dl.DetailLevel = 3

INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
SELECT o.BasicGraphNodeId, n.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes o
INNER JOIN BIDoc.BasicGraphNodes n ON o.SourceElementId = n.SourceElementId
WHERE o.ProjectConfigId = @projectconfigid AND n.ProjectConfigId = @projectconfigid
	AND o.GraphKind = @sourcegraphkind AND n.GraphKind = @targetgraphkind

CREATE NONCLUSTERED INDEX TIX_nodeIdMap_OldNodeId ON #nodeIdMap(OldNodeId ASC)
CREATE NONCLUSTERED INDEX TIX_nodeIdMap_NewNodeId ON #nodeIdMap(NewNodeId ASC)

UPDATE n SET ParentId = np.NewNodeid FROM BIDoc.BasicGraphNodes n
INNER JOIN #nodeIdMap m ON n.BasicGraphNodeId = m.NewNodeid
INNER JOIN BIDoc.BasicGraphNodes o ON o.BasicGraphNodeId = m.OldNodeId
INNER JOIN #nodeIdMap np ON np.OldNodeId = o.ParentId

INSERT INTO BIDoc.BasicGraphLinks
(
	--BasicGraphLinkId, 
	LinkType, 
	NodeFromId, 
	NodeToId
)
SELECT DISTINCT
l.LinkType,
mf.NewNodeId,
mt.NewNodeId
FROM BIDoc.BasicGraphLinks l 
INNER JOIN BIDoc.BasicGraphNodes nf ON l.NodeFromId = nf.BasicGraphNodeId
INNER JOIN BIDoc.HigherLevelElementAncestors ancf ON ancf.SouceDfNodeId = l.NodeFromId
INNER JOIN BIDoc.HigherLevelElementAncestors anct ON anct.SouceDfNodeId = l.NodeToId
INNER JOIN #nodeIdMap mf ON mf.OldNodeId = ancf.AncestorDfNodeId
INNER JOIN #nodeIdMap mt ON mt.OldNodeId = anct.AncestorDfNodeId
WHERE /*l.LinkType <> @linktype AND*/ 
nf.ProjectConfigId = @projectconfigid AND nf.GraphKind = @sourcegraphkind
AND ancf.DetailLevel = 3
AND anct.DetailLevel = 3
AND mf.NewNodeid <> mf.OldNodeId

DROP TABLE #nodeIdMap]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[OldNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[#nodeIdMap].[NewNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_CreateDataFlowLowDetailGraph].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2849" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_CreateDataFlowLowDetailGraph]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--DECLARE @projectConfigId UNIQUEIDENTIFIER = N'87E5A6F8-7ADD-4292-8537-E422EE66AD61'

DECLARE @sourceGraphKind NVARCHAR(50) = N'DataFlow'
DECLARE @targetGraphKind NVARCHAR(50) = N'DataFlowMediumDetail'

--------- clear graph

EXEC BIDoc.sp_ClearGraph @projectconfigid, @targetgraphkind

---------------------
CREATE TABLE #nodeIdMap
(
OldNodeId INT,
NewNodeId INT,
)


INSERT INTO BIDoc.BasicGraphNodes
           (--[BasicGraphNodeId]
           --,
		   [Name]
           ,[NodeType]
           ,[Description]
           ,[ParentId]
           ,[GraphKind]
           ,[ProjectConfigId]
           ,[SourceElementId]
           ,[TopologicalOrder])
SELECT 
			--mid.NewNodeid
			--,
			n.Name
			,n.NodeType
			,n.Description
			,NULL --pid.NewNodeid
			,@targetgraphkind
			,@projectconfigid
			,n.SourceElementId
			,0 TopologicalOrder
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDetailLevels dl ON dl.ElementType = e.[Type]
WHERE 
	n.ProjectConfigId = @projectconfigid 
	AND n.GraphKind  = @sourcegraphkind
	AND dl.DetailLevel >= 2

INSERT INTO #nodeIdMap(OldNodeId, NewNodeid)
SELECT o.BasicGraphNodeId, n.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes o
INNER JOIN BIDoc.BasicGraphNodes n ON o.SourceElementId = n.SourceElementId
WHERE o.ProjectConfigId = @projectconfigid AND n.ProjectConfigId = @projectconfigid
	AND o.GraphKind = @sourcegraphkind AND n.GraphKind = @targetgraphkind

CREATE NONCLUSTERED INDEX TIX_nodeIdMap_OldNodeId ON #nodeIdMap(OldNodeId ASC)
CREATE NONCLUSTERED INDEX TIX_nodeIdMap_NewNodeId ON #nodeIdMap(NewNodeId ASC)

UPDATE n SET ParentId = np.NewNodeid FROM BIDoc.BasicGraphNodes n
INNER JOIN #nodeIdMap m ON n.BasicGraphNodeId = m.NewNodeid
INNER JOIN BIDoc.BasicGraphNodes o ON o.BasicGraphNodeId = m.OldNodeId
INNER JOIN #nodeIdMap np ON np.OldNodeId = o.ParentId

INSERT INTO BIDoc.BasicGraphLinks
(
	--BasicGraphLinkId, 
	LinkType, 
	NodeFromId, 
	NodeToId
)
SELECT DISTINCT
l.LinkType,
mf.NewNodeId,
mt.NewNodeId
FROM BIDoc.BasicGraphLinks l 
INNER JOIN BIDoc.BasicGraphNodes nf ON l.NodeFromId = nf.BasicGraphNodeId
INNER JOIN BIDoc.HigherLevelElementAncestors ancf ON ancf.SouceDfNodeId = l.NodeFromId
INNER JOIN BIDoc.HigherLevelElementAncestors anct ON anct.SouceDfNodeId = l.NodeToId
INNER JOIN #nodeIdMap mf ON mf.OldNodeId = ancf.AncestorDfNodeId
INNER JOIN #nodeIdMap mt ON mt.OldNodeId = anct.AncestorDfNodeId
WHERE /*l.LinkType <> @linktype AND*/ 
nf.ProjectConfigId = @projectconfigid AND nf.GraphKind = @sourcegraphkind
AND ancf.DetailLevel = 2
AND anct.DetailLevel = 2
AND mf.NewNodeid <> mf.OldNodeId

DROP TABLE #nodeIdMap]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ClearGraph]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[OldNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[#nodeIdMap].[NewNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_CreateDataFlowMediumDetailGraph].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2856" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_CreateDataFlowMediumDetailGraph]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_FillDataMessages]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE em FROM [BIDoc].[DataMessages] em
INNER JOIN BIDoc.ModelElements me ON em.SourceElementId = me.ModelElementId
WHERE me.ProjectConfigId = @projectconfigid

-- Prepaire firts table without spliting json value

--OLEDB Source
SELECT 
outColElem.ModelElementId AS 'SourceElementId',
tabColElem.ModelElementId AS 'TargetElementId',
outColElem.ExtendedProperties AS 'SourcePath', 
tabColElem.ExtendedProperties AS 'TargetPath'
INTO #DataMessageFirstStep
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.BasicGraphNodes en ON en.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.BasicGraphNodes outNode ON outNode.ParentId = en.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes outColNode ON outColNode.ParentId = outNode.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements outColElem ON outColElem.ModelElementId = outColNode.SourceElementId
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = outColNode.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes tabColNode ON tabColNode.BasicGraphNodeId = l.NodeFromId
INNER JOIN BIDoc.ModelElements tabColElem ON tabColElem.ModelElementId = tabColNode.SourceElementId
WHERE e.Type = 'CD.DLS.Model.Mssql.Ssis.DfSourceElement'
AND e.ProjectConfigId =  @projectconfigid
AND en.GraphKind = N'DataFlow'
AND tabColElem.Type = N'CD.DLS.Model.Mssql.Db.ColumnElement'

--OLEDB Destination
INSERT INTO #DataMessageFirstStep 
(SourceElementId,
TargetElementId,
SourcePath, 
TargetPath)
SELECT  
se.ModelElementId AS 'SourceElementId',
te.ModelElementId AS 'TargetElementId',
se.ExtendedProperties AS 'SourcePath',
te.ExtendedProperties  AS 'TargetPath'
FROM BIDoc.ModelLinks l 
INNER JOIN BIDoc.ModelElements se ON l.ElementFromId = se.ModelElementId
INNER JOIN BIDoc.ModelElements te ON l.ElementToId = te.ModelElementId
WHERE l.Type = N'ExternalDestinationColumn'
AND se.ProjectConfigId = @projectconfigid AND te.ProjectConfigId = @projectconfigid

-- Prepaire Second step spliting json value
SELECT 
	[SourceElementId],
	[TargetElementId],
	adm.f_SimpleJsonValue(SourcePath, 'DtsDataType') AS 'SourceDtsDataType',
	adm.f_SimpleJsonValue(SourcePath, 'Length') AS 'SourceLength',
	adm.f_SimpleJsonValue(SourcePath, 'Precision') AS 'SourcePrecision',
	adm.f_SimpleJsonValue(SourcePath, 'Scale') AS 'SourceScale',
	adm.f_SimpleJsonValue(TargetPath, 'SqlDataType') AS 'TargetSqlDataType',
	adm.f_SimpleJsonValue(TargetPath, 'Length') AS 'TargetLength',
	adm.f_SimpleJsonValue(TargetPath, 'Precision') AS 'TargetPrecision',
	adm.f_SimpleJsonValue(TargetPath, 'Scale') AS 'TargetScale'
INTO #DataMessageSecondStep
FROM #DataMessageFirstStep

DROP TABLE #DataMessageFirstStep

--Prepaire Third step
SELECT *
INTO #DataMessageThirdStep
FROM  #DataMessageSecondStep dmss
INNER JOIN BIDoc.SourceDataTypes sdt ON SourceDtsDataType = sdt.SourceDataTypeName
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId

DROP TABLE #DataMessageSecondStep

--Last Step fill DataMEssages
--INT

INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM  #DataMessageThirdStep dmts
WHERE dmts.DataTypeName IN (N'String', N'Binary',N'Text',N'Integer',N'Floating-point number') 
AND CAST(SourceLength AS INT)  > CAST(TargetLength AS INT) 
AND CAST(TargetLength AS INT) >= 0
AND NOT dmts.SourceDataTypeName = N'DT_GUID'
AND ('Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')') IS NOT NULL

--BOOL
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM #DataMessageThirdStep dmts
WHERE dmts.DataTypeName IN (N'Boolean')
AND NOT CAST(SourceLength AS INT) = CAST(TargetLength AS INT)
AND ('Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')') IS NOT NULL

--Numeric, Decimal
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Scale, Precision): '+ SourceDtsDataType + '('+
SourceScale +' ,'+ SourcePrecision 
+') Target Data Type (Scale, Precisionh): '+
TargetSqlDataType +'('+ TargetScale +' ,'+ 
TargetPrecision +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM #DataMessageThirdStep dmts
WHERE dmts.DataTypeName IN (N'Fixed-point number')
AND ((CAST(SourceScale AS INT)  > CAST(TargetScale AS INT) 
AND CAST(SourcePrecision AS INT)  > CAST(TargetPrecision AS INT))
OR (CAST(SourceScale AS INT)  > CAST(TargetScale AS INT) 
OR CAST(SourcePrecision AS INT)  > CAST(TargetPrecision AS INT)))
AND  ('Source Data Type (Scale, Precision): '+ SourceDtsDataType + '('+
SourceScale +' ,'+ SourcePrecision 
+') Target Data Type (Scale, Precisionh): '+
TargetSqlDataType +'('+ TargetScale +' ,'+ 
TargetPrecision +')') IS NOT NULL

DROP TABLE #DataMessageThirdStep

/*INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM  #DataMessageSecondStep dmss
INNER JOIN BIDoc.SourceDataTypes sdt ON SourceDtsDataType = sdt.SourceDataTypeName 
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE dt.DataTypeName IN (N'String', N'Binary',N'Text',N'Integer',N'Floating-point number') 
AND CAST(SourceLength AS INT)  > CAST(TargetLength AS INT) 
AND CAST(TargetLength AS INT) >= 0
AND NOT sdt.SourceDataTypeName = N'DT_GUID'

--BOOL
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Length): '+ SourceDtsDataType + '('+
SourceLength +') Target Data Type (Length): '+
TargetSqlDataType +'('+ TargetLength +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM #DataMessageSecondStep dmss
INNER JOIN BIDoc.SourceDataTypes sdt ON SourceDtsDataType = sdt.SourceDataTypeName 
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE dt.DataTypeName IN (N'Boolean')
AND NOT CAST(SourceLength AS INT) = CAST(TargetLength AS INT)

--Numeric, Decimal
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
SourceElementId,
TargetElementId,
'Source Data Type (Scale, Precision): '+ SourceDtsDataType + '('+
SourceScale +' ,'+ SourcePrecision 
+') Target Data Type (Scale, Precisionh): '+
TargetSqlDataType +'('+ TargetScale +' ,'+ 
TargetScale +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM #DataMessageSecondStep dmss
INNER JOIN BIDoc.SourceDataTypes sdt ON SourceDtsDataType = sdt.SourceDataTypeName
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE dt.DataTypeName IN (N'Fixed-point number')
AND ((CAST(SourceScale AS INT)  > CAST(TargetScale AS INT) 
AND CAST(SourcePrecision AS INT)  > CAST(TargetPrecision AS INT))
OR (CAST(SourceScale AS INT)  > CAST(TargetScale AS INT) 
OR CAST(SourcePrecision AS INT)  > CAST(TargetPrecision AS INT)))

DROP TABLE #DataMessageSecondStep


INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT 
outColElem.ModelElementId AS 'SourceElementId',
tabColElem.ModelElementId AS 'TargetElementId',
'Source Data Type (Length): '+ adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') + '('+
CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Length')AS NVARCHAR) +') Target Data Type (Length): '+
adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'SqlDataType') +'('+ CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Length')AS NVARCHAR) +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.BasicGraphNodes en ON en.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.BasicGraphNodes outNode ON outNode.ParentId = en.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes outColNode ON outColNode.ParentId = outNode.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements outColElem ON outColElem.ModelElementId = outColNode.SourceElementId
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = outColNode.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes tabColNode ON tabColNode.BasicGraphNodeId = l.NodeFromId
INNER JOIN BIDoc.ModelElements tabColElem ON tabColElem.ModelElementId = tabColNode.SourceElementId
INNER JOIN BIDoc.SourceDataTypes sdt ON adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') = sdt.SourceDataTypeName 
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE e.Type = 'CD.DLS.Model.Mssql.Ssis.DfSourceElement'
AND e.ProjectConfigId =  @projectconfigid
AND en.GraphKind = N'DataFlow'
AND tabColElem.Type = N'CD.DLS.Model.Mssql.Db.ColumnElement'
AND dt.DataTypeName IN (N'String', N'Binary',N'Text',N'Integer',N'Floating-point number') 
AND CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Length') AS INT)  > CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Length')AS INT) AND CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Length')AS INT) >= 0
AND NOT sdt.SourceDataTypeName = N'DT_GUID'

--BOOL
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT outColElem.ModelElementId AS 'SourceElementId', tabColElem.ModelElementId AS 'TargetElementId',
'Source Data Type (Length): '+ adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') + '('+
CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Length')AS NVARCHAR) +') Target Data Type (Length): '+
adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'SqlDataType') +'('+ CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Length')AS NVARCHAR) +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.BasicGraphNodes en ON en.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.BasicGraphNodes outNode ON outNode.ParentId = en.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes outColNode ON outColNode.ParentId = outNode.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements outColElem ON outColElem.ModelElementId = outColNode.SourceElementId
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = outColNode.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes tabColNode ON tabColNode.BasicGraphNodeId = l.NodeFromId
INNER JOIN BIDoc.ModelElements tabColElem ON tabColElem.ModelElementId = tabColNode.SourceElementId
INNER JOIN BIDoc.SourceDataTypes sdt ON adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') = sdt.SourceDataTypeName
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE e.Type = 'CD.DLS.Model.Mssql.Ssis.DfSourceElement'
AND e.ProjectConfigId =  @projectconfigid
AND en.GraphKind = N'DataFlow'
AND tabColElem.Type = N'CD.DLS.Model.Mssql.Db.ColumnElement'
AND dt.DataTypeName IN (N'Boolean')
AND NOT CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Length') AS INT) = CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Length')AS INT)

--Numeric, Decimal
INSERT INTO [BIDoc].[DataMessages]
(
	[SourceElementId],
	[TargetElementId],
	[Message],
	[DataMessagesTypeId]
)
SELECT outColElem.ModelElementId AS 'SourceElementId', tabColElem.ModelElementId AS 'TargetElementId',
'Source Data Type (Scale, Precision): '+ adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') + '('+
CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Scale')AS NVARCHAR)+' ,'+CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Precision')AS NVARCHAR) 
+') Target Data Type (Scale, Precisionh): '+
adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'SqlDataType') +'('+ CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Scale')AS NVARCHAR) +' ,'+ 
CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Scale')AS NVARCHAR) +')' AS 'Message',
(SELECT DataMessagesTypeId FROM BIDoc.DataMessagesType WHERE DataMessageCode='Truncat') AS 'DataMessagesTypeId'
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.BasicGraphNodes en ON en.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.BasicGraphNodes outNode ON outNode.ParentId = en.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes outColNode ON outColNode.ParentId = outNode.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements outColElem ON outColElem.ModelElementId = outColNode.SourceElementId
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = outColNode.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes tabColNode ON tabColNode.BasicGraphNodeId = l.NodeFromId
INNER JOIN BIDoc.ModelElements tabColElem ON tabColElem.ModelElementId = tabColNode.SourceElementId
INNER JOIN BIDoc.SourceDataTypes sdt ON adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'DtsDataType') = sdt.SourceDataTypeName
INNER JOIN BIDoc.DataTypes dt ON sdt.DataTypeId = dt.DataTypesId
WHERE e.Type = 'CD.DLS.Model.Mssql.Ssis.DfSourceElement'
AND e.ProjectConfigId =  @projectconfigid
AND en.GraphKind = N'DataFlow'
AND tabColElem.Type = N'CD.DLS.Model.Mssql.Db.ColumnElement'
AND dt.DataTypeName IN (N'Fixed-point number')
AND ((CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Scale') AS INT)  > CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Scale')AS INT) 
AND CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Precision') AS INT)  > CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Precision')AS INT))
OR (CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Scale') AS INT)  > CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Scale')AS INT) 
OR CAST(adm.f_SimpleJsonValue(outColElem.ExtendedProperties, 'Precision') AS INT)  > CAST(adm.f_SimpleJsonValue(tabColElem.ExtendedProperties, 'Precision')AS INT)))
*/]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[DataMessages]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[TargetElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[SourcePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[TargetPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_SimpleJsonValue]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceDtsDataType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes].[SourceDataTypeName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataTypes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[SourceDataTypes].[DataTypeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataTypes].[DataTypesId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[TargetElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[Message]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessages].[DataMessagesTypeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceDtsDataType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceLength]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetSqlDataType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetLength]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType].[DataMessagesTypeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[DataMessagesType].[DataMessageCode]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[DataTypeName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceDataTypeName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceScale]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourcePrecision]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetScale]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetPrecision]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[TargetElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[SourcePath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[TargetPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageFirstStep].[TargetElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceDtsDataType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceLength]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourcePrecision]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceScale]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetSqlDataType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetLength]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetPrecision]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetScale]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Adm].[f_SimpleJsonValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceDtsDataType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceDtsDataType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceLength]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceLength]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourcePrecision]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourcePrecision]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceScale]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[SourceScale]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetSqlDataType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetSqlDataType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetLength]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetLength]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetPrecision]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetPrecision]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[TargetScale]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[sp_FillDataMessages].[#DataMessageSecondStep].[TargetScale]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceDataTypesId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[SourceDataTypes].[SourceDataTypesId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[SourceDataTypes].[SourceName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[SourceDataTypeName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[SourceDataTypes].[SourceDataTypeName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[DataTypeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[SourceDataTypes].[DataTypeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[DataTypesId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[DataTypes].[DataTypesId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillDataMessages].[#DataMessageThirdStep].[DataTypeName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[DataTypes].[DataTypeName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_FillDataMessages].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="15441" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_FillDataMessages]&#xD;&#xA;&#x9;&#x9;--DECLARE&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'FD1312FC-1182-4B9C-82D9-2089F3468BFB'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_FillHigherLevelElementAncestors]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @graphkind NVARCHAR(50) = N'DataFlow'


DELETE ea FROM BIDoc.HigherLevelElementAncestors ea
INNER JOIN BIDoc.ModelElements e ON ea.SouceElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectConfigId

;WITH ancestors as
(
SELECT n.BasicGraphNodeId OriginalNodeId, n.SourceElementId OriginalElementId, n.BasicGraphNodeId, n.ParentId, e.ModelElementId, e.Caption, e.Type, 0 AncestorLevel 
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid

UNION ALL

SELECT a.OriginalNodeId, a.OriginalElementId OriginalElementId, n.BasicGraphNodeId, n.ParentId, e.ModelElementId, e.Caption, e.Type, a.AncestorLevel + 1 AncestorLevel 
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
INNER JOIN ancestors a ON a.ParentId = n.BasicGraphNodeId
--WHERE n.GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid
)
,detailLevels AS
(
SELECT a.*, dl.DetailLevel
FROM ancestors a
INNER JOIN BIDoc.ModelElementTypeDetailLevels dl ON dl.ElementType = a.Type
)
,closestDetailLevelsPrep AS
(
SELECT dl.ModelElementId, dl.OriginalNodeId, dl.DetailLevel, dl.OriginalElementId,
dl.AncestorLevel FirstAncestorLevel, 
FIRST_VALUE(dl.BasicGraphNodeId) OVER(PARTITION BY dl.DetailLevel, dl.OriginalNodeId ORDER BY dl.AncestorLevel) DetailLevelNodeId,
FIRST_VALUE(dl.ModelElementId) OVER(PARTITION BY dl.DetailLevel, dl.OriginalNodeId ORDER BY dl.AncestorLevel) DetailLevelElementId,
FIRST_VALUE(dl.Type) OVER(PARTITION BY dl.DetailLevel, dl.OriginalNodeId ORDER BY dl.AncestorLevel) DetailLevelType,
FIRST_VALUE(dl.Caption) OVER(PARTITION BY dl.DetailLevel, dl.OriginalNodeId ORDER BY dl.AncestorLevel) DetailLevelElementName
,ROW_NUMBER() OVER(PARTITION BY dl.DetailLevel, dl.OriginalNodeId ORDER BY dl.AncestorLevel) RN
FROM detailLevels dl
--GROUP BY dl.OriginalNodeId, dl.DetailLevel
)
,closestDetailLevels AS
(
SELECT * FROM closestDetailLevelsPrep WHERE RN = 1
)
SELECT * 
INTO #upperLevels
FROM closestDetailLevels
OPTION(MAXRECURSION 1000)


INSERT INTO BIDoc.HigherLevelElementAncestors(
[SouceElementId],
[AncestorElementId],
[SouceDfNodeId],
[AncestorDfNodeId],
[DetailLevel]
)
SELECT OriginalElementId, DetailLevelElementId, OriginalNodeId, DetailLevelNodeId, DetailLevel 
FROM #upperLevels



DROP TABLE #upperLevels



RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[OriginalElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[AncestorLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorDfNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[OriginalElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevel]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[OriginalElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[ancestors].[AncestorLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[OriginalElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[AncestorLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[detailLevels].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[OriginalElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[FirstAncestorLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[DetailLevelNodeId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[DetailLevelElementId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[DetailLevelType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[DetailLevelElementName]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevelsPrep].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[OriginalElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[FirstAncestorLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[DetailLevelNodeId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[DetailLevelElementId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[DetailLevelType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[DetailLevelElementName]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[CTE1].[closestDetailLevels].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevel]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[OriginalElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[FirstAncestorLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelNodeId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelElementId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[DetailLevelElementName]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[#upperLevels].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_FillHigherLevelElementAncestors].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2577" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_FillHigherLevelElementAncestors]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetGraphNodesUnderPath]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--RETURNS TABLE AS RETURN
--(

DECLARE @nodeId INT = (SELECT BasicGraphNodeId FROM [BIDoc].[f_GetGraphNodeIdByRefPath](@projectConfigId, @graphkind, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = n.RefPathIntervalStart, @intervalTo = n.RefPathIntervalEnd FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = @nodeId

SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.[Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId 
WHERE GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid --AND LEFT(e.RefPath, LEN(@path)) = @path
AND (@nodeType IS NULL OR @nodeType = n.NodeType)
AND n.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo

--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@nodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetGraphNodesUnderPath].[@nodeType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1125" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetGraphNodesUnderPath]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@nodeType NVARCHAR(200) = NULL&#xD;&#xA;--)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetLineageGridFavorities]">
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT TOP 500
h.SourceElementType, h.TargetElementType,
h.SourceRootElementId, h.TargetRootElementId,

MAX(sdp.DescriptivePath) SourceRootDescriptivePath, MAX(tdp.DescriptivePath) TargetRootDescriptivePath,
MAX(st.TypeDescription) SourceTypeDescription, MAX(tt.TypeDescription) TargetTypeDescription,
h.SourceRootElementPath, h.TargetRootElementPath

FROM BIDoc.LineageGridHistory h
INNER JOIN BIDoc.ModelElementDescriptivePaths sdp ON sdp.ModelElementId = h.SourceRootElementId
INNER JOIN BIDoc.ModelElementDescriptivePaths tdp ON tdp.ModelElementId = h.TargetRootElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions st ON st.ElementType = h.SourceElementType
INNER JOIN BIDoc.ModelElementTypeDescriptions tt ON tt.ElementType = h.TargetElementType
WHERE h.UserId = @userId AND h.ProjectConfigId = @projectConfigId
GROUP BY h.SourceRootElementId, h.TargetRootElementId, 
h.SourceElementType, h.TargetElementType,
h.SourceRootElementPath, h.TargetRootElementPath

ORDER BY COUNT(*) * 10 * MAX(DATEDIFF(DAY, h.CreatedDateTime, GETDATE()) + 1) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetLineageGridFavorities].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetLineageGridFavorities].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[CreatedDateTime]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetLineageGridFavorities].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetLineageGridFavorities].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1179" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetLineageGridFavorities]&#xD;&#xA;&#x9;@userId INT,&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelElementsUnderPath]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--)
--RETURNS TABLE AS RETURN
--(

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId


SELECT DISTINCT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,[Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements]
  WHERE ProjectConfigId = @projectconfigid
  AND RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  AND [Type] = ISNULL(@type, [Type])
  
  --RefPathPrefix >= LEFT(@path, 300) AND RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --RefPath >= @path AND RefPath <= @path + N'~' -- LEFT(RefPath, LEN(@path)) = @path --RefPath LIKE Adm.f_EscapeForLike(@path) + '%' ESCAPE '\' AND ProjectConfigId = @projectconfigid
  --AND [Type] = ISNULL(@type, [Type])


--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPath].[@type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPath].[@type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1183" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelElementsUnderPath]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(200) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--)
/*
SELECT DISTINCT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,NULL [Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] WHERE
  LEN(@path) < 300 AND
  RefPathPrefix >= @path AND RefPathPrefix <= @path + N'~'
  AND [Type] = ISNULL(@type, [Type])

UNION ALL

SELECT DISTINCT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,NULL [Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] WHERE
  LEN(@path) >= 300 AND
  RefPathPrefix >= LEFT(@path, 300) AND RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  RefPath >= @path AND RefPath <= @path + N'~' -- LEFT(RefPath, LEN(@path)) = @path --RefPath LIKE Adm.f_EscapeForLike(@path) + '%' ESCAPE '\' AND ProjectConfigId = @projectconfigid
  AND [Type] = ISNULL(@type, [Type])
)
*/


DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId


SELECT DISTINCT [ModelElementId]
      ,[ExtendedProperties]
      ,[RefPath]
      ,NULL [Definition]
      ,[Caption]
      ,[Type]
      ,[ProjectConfigId]
  FROM [BIDoc].[ModelElements] 
  WHERE ProjectConfigId = @projectconfigid
  AND RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  AND [Type] = ISNULL(@type, [Type])
  
  /*
  RefPathPrefix >= LEFT(@path, 300) AND RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  RefPath >= @path AND RefPath <= @path + N'~' -- LEFT(RefPath, LEN(@path)) = @path --RefPath LIKE Adm.f_EscapeForLike(@path) + '%' ESCAPE '\' AND ProjectConfigId = @projectconfigid
  */]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathNoDef].[@type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2012" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelElementsUnderPathNoDef]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(200) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--)
--RETURNS TABLE AS RETURN
--(AS

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

;
WITH elems AS(
SELECT
		e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,e.[Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e 
  -- the ancestors - smaller refapths, but still prefixes
  --INNER JOIN BIDoc.ModelElements ance ON ance.RefPathPrefix <= e.RefPathPrefix AND ance.RefPathPrefix + N'~' >= e.RefPathPrefix
  --AND ance.RefPath <= e.RefPath AND ance.RefPath + N'~' >= e.RefPath
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path AND e.RefPath <= @path + N'~'
  )
  )
  AND (e.[Type] = @type OR e.RefPath = @path)

  UNION ALL
  -- ancestors
  SELECT e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,e.[Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM elems
  INNER JOIN BIDoc.ModelLinks l ON l.Type = N'parent' AND l.ElementFromId = elems.ModelElementId
  INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND --e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path --AND e.RefPath <= @path + N'~'
  )
  )
)
SELECT DISTINCT * FROM elems


--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[ExtendedProperties]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[Definition]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Definition]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[CTE1].[elems].[ProjectConfigId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType].[@type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2009" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelElementsUnderPathToChildrenOfType]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

;
WITH elems AS(
SELECT
		e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,NULL [Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e 
  -- the ancestors - smaller refapths, but still prefixes
  --INNER JOIN BIDoc.ModelElements ance ON ance.RefPathPrefix <= e.RefPathPrefix AND ance.RefPathPrefix + N'~' >= e.RefPathPrefix
  --AND ance.RefPath <= e.RefPath AND ance.RefPath + N'~' >= e.RefPath
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path AND e.RefPath <= @path + N'~'
  )
  )
  AND (e.[Type] = @type OR e.RefPath = @path)

  UNION ALL
  -- ancestors
  SELECT e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,NULL [Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM elems
  INNER JOIN BIDoc.ModelLinks l ON l.Type = N'parent' AND l.ElementFromId = elems.ModelElementId
  INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND --e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path --AND e.RefPath <= @path + N'~'
  )
  )
)
SELECT * FROM elems

--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[ExtendedProperties]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[Definition]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[CTE1].[elems].[ProjectConfigId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef].[@type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2009" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

;
WITH elems AS(
SELECT
		e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,NULL [Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM [BIDoc].[ModelElements] e 
  -- the ancestors - smaller refapths, but still prefixes
  --INNER JOIN BIDoc.ModelElements ance ON ance.RefPathPrefix <= e.RefPathPrefix AND ance.RefPathPrefix + N'~' >= e.RefPathPrefix
  --AND ance.RefPath <= e.RefPath AND ance.RefPath + N'~' >= e.RefPath
  INNER JOIN @types t ON t.Value = e.Type
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path AND e.RefPath <= @path + N'~'
  )
  )
  --AND e.[Type] = @type

  UNION ALL
  -- ancestors
  SELECT e.[ModelElementId]
      ,e.[ExtendedProperties]
      ,e.[RefPath]
      ,NULL [Definition]
      ,e.[Caption]
      ,e.[Type]
      ,e.[ProjectConfigId]
  FROM elems
  INNER JOIN BIDoc.ModelLinks l ON l.Type = N'parent' AND l.ElementFromId = elems.ModelElementId
  INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
  WHERE 
  (
  @path = N''
  OR
  (
  e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND --e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path --AND e.RefPath <= @path + N'~'
  )
  )
)
SELECT DISTINCT * FROM elems
--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@types]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@types].[Value]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[ExtendedProperties]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[Definition]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[CTE1].[elems].[ProjectConfigId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@types]" Disambiguator="29">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@types].[Value]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef].[@types]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_StringList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2063" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef]&#xD;&#xA;/*&#xD;&#xA;(&#xD;&#xA;*/&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@types BIDoc.UDTT_StringList READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelLinksUnderPath]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

SELECT DISTINCT l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN [BIDoc].ModelElements ef ON l.ElementFromId = ef.ModelElementId
  INNER JOIN [BIDoc].ModelElements et ON l.ElementToId = et.ModelElementId
  WHERE 
  ef.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  AND et.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --LEFT(ef.RefPath, LEN(@path)) = @path AND LEFT(et.RefPath, LEN(@path)) = @path --ef.RefPath LIKE  Adm.f_EscapeForLike(@path) + '%'  ESCAPE '\' AND et.RefPath LIKE Adm.f_EscapeForLike(@path) + '%'  ESCAPE '\'
	AND ef.ProjectConfigId = @projectconfigid AND et.ProjectConfigId = @projectconfigid
--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPath].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPath].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPath].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPath].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1245" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelLinksUnderPath]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elements TABLE
(
[ModelElementId] INT,
[ExtendedProperties] NVARCHAR(MAX),
[RefPath] NVARCHAR(MAX),
[Definition] NVARCHAR(MAX),
[Caption] NVARCHAR(MAX),
[Type] NVARCHAR(MAX),
[ProjectConfigId] UNIQUEIDENTIFIER
)

INSERT INTO @elements
EXEC BIDoc.sp_GetModelElementsUnderPathToChildrenOfTypeNoDef @projectConfigId, @path, @type

SELECT DISTINCT 
	   l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN @elements ef ON ef.ModelElementId = l.ElementFromId
  INNER JOIN @elements et ON et.ModelElementId = l.ElementToId
--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypeNoDef]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[Definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[Caption]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@elements].[ProjectConfigId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType].[@type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="854" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelLinksUnderPathToChildrenOfType]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elements TABLE
(
[ModelElementId] INT,
[ExtendedProperties] NVARCHAR(MAX),
[RefPath] NVARCHAR(MAX),
[Definition] NVARCHAR(MAX),
[Caption] NVARCHAR(MAX),
[Type] NVARCHAR(MAX),
[ProjectConfigId] UNIQUEIDENTIFIER
)

INSERT INTO @elements
EXEC BIDoc.sp_GetModelElementsUnderPathToChildrenOfTypesNoDef @projectConfigId, @path, @types

SELECT DISTINCT 
	   l.[ModelLinkId]
      ,l.[ElementFromId]
      ,l.[ElementToId]
      ,l.[Type]
      ,l.[ExtendedProperties]
  FROM [BIDoc].[ModelLinks] l
  INNER JOIN /*BIDoc.f_GetModelElementsUnderPathToChildrenOfTypesNoDef(@projectConfigId, @path, @types)*/ @elements ef ON ef.ModelElementId = l.ElementFromId
  INNER JOIN /*BIDoc.f_GetModelElementsUnderPathToChildrenOfTypesNoDef(@projectConfigId, @path, @types)*/ @elements et ON et.ModelElementId = l.ElementToId
--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[sp_GetModelElementsUnderPathToChildrenOfTypesNoDef]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@types]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ModelLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ExtendedProperties]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[ExtendedProperties]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[Definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[Caption]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@elements].[ProjectConfigId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@types]" Disambiguator="28">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@types].[Value]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes].[@types]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_StringList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1061" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_GetModelLinksUnderPathToChildrenOfTypes]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@types BIDoc.UDTT_StringList READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_ListSsrsReports]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT 
e.ModelElementId, 
e.RefPath, 
JSON_VALUE(e.ExtendedProperties, '$.SsrsPath') SsrsPath, 
CONVERT(INT, JSON_VALUE(e.ExtendedProperties, '$.SsrsComponentId')) SsrsComponentId, 
e.Caption 
FROM BIDoc.ModelElements e 
WHERE e.[Type] = N'CD.DLS.Model.Mssql.Ssrs.ReportElement' 
AND e.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_ListSsrsReports].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_ListSsrsReports].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="418" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_ListSsrsReports]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_PropagateDataFlowVertically]">
			<Property Name="BodyScript">
				<Value><![CDATA[


	DECLARE @sourcegraphkind NVARCHAR(50) = N'DataFlow'
	DECLARE @linktype NVARCHAR(50) = N'DataFlow'
	DECLARE @graphkind NVARCHAR(50) = N'DataFlow'

-- df column sources - propagate down
DECLARE @dfPropSourceCount INT
DECLARE @dfPropTargetCount INT


DELETE FROM BIDoc.BasicGraphLinks WHERE NodeFromId = NodeToId

;WITH dfPropSources AS
(
SELECT l.NodeFromId, l.NodeToId FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphLinks l ON n.BasicGraphNodeId = l.NodeToId AND l.LinkType = @linktype
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.NodeType IN ( N'DfColumnElement', N'DfUnpivotSourceReferenceElement')
UNION ALL
SELECT n.BasicGraphNodeId NodeFromId, ps.NodeToId FROM dfPropSources ps
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = ps.NodeFromId
)
SELECT @dfPropSourceCount = COUNT(*) FROM dfPropSources


PRINT 'Propagated DF source links - ' + CONVERT(VARCHAR(10), @dfPropSourceCount)


--EXEC sp_sequence_get_range @sequence_name = N'BIDoc.BasicGraphLinksSequence', @range_size = @dfPropSourceCount, @range_first_value = @linkSequenceStartVariant OUTPUT
--	SET @linkSequenceStart = CONVERT(INT, @linkSequenceStartVariant)

;WITH dfPropSources AS
(
SELECT l.NodeFromId, l.NodeToId FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphLinks l ON n.BasicGraphNodeId = l.NodeToId AND l.LinkType = @linktype
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.NodeType IN ( N'DfColumnElement', N'DfUnpivotSourceReferenceElement')
UNION ALL
SELECT n.BasicGraphNodeId NodeFromId, ps.NodeToId FROM dfPropSources ps
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = ps.NodeFromId
)
INSERT INTO BIDoc.BasicGraphLinks(
			--[BasicGraphLinkId]
           --,
		   [LinkType]
           ,[NodeFromId]
           ,[NodeToId]
		   )
	SELECT 
	--ROW_NUMBER() OVER(ORDER BY s.NodeFromId) + @linkSequenceStart - 1
	--,
	@linktype
	,s.NodeFromId
	,s.NodeToId
	FROM dfPropSources s

;WITH dfPropTargets AS
(
SELECT l.NodeFromId, l.NodeToId FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphLinks l ON n.BasicGraphNodeId = l.NodeFromId AND l.LinkType = @linktype
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.NodeType IN ( N'DfColumnElement', N'DfUnpivotSourceReferenceElement')
UNION ALL
SELECT pt.NodeFromId NodeFromId, n.BasicGraphNodeId NodeToId FROM dfPropTargets pt
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = pt.NodeToId
)
SELECT @dfPropTargetCount = COUNT(*) FROM dfPropTargets

PRINT 'Propagated DF target links - ' + CONVERT(VARCHAR(10), @dfPropTargetCount)

--EXEC sp_sequence_get_range @sequence_name = N'BIDoc.BasicGraphLinksSequence', @range_size = @dfPropTargetCount, @range_first_value = @linkSequenceStartVariant OUTPUT
--	SET @linkSequenceStart = CONVERT(INT, @linkSequenceStartVariant)

;WITH dfPropTargets AS
(
SELECT l.NodeFromId, l.NodeToId FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.BasicGraphLinks l ON n.BasicGraphNodeId = l.NodeFromId AND l.LinkType = @linktype
WHERE n.ProjectConfigId = @projectconfigid AND n.GraphKind = @graphkind AND n.NodeType IN ( N'DfColumnElement', N'DfUnpivotSourceReferenceElement')
UNION ALL
SELECT pt.NodeFromId NodeFromId, n.BasicGraphNodeId NodeToId FROM dfPropTargets pt
INNER JOIN BIDoc.BasicGraphNodes n ON n.ParentId = pt.NodeToId
)
INSERT INTO BIDoc.BasicGraphLinks(
			--[BasicGraphLinkId]
           --,
		   [LinkType]
           ,[NodeFromId]
           ,[NodeToId]
		   )
	SELECT DISTINCT
	--ROW_NUMBER() OVER(ORDER BY t.NodeToId) + @linkSequenceStart - 1
	--,
	@linktype
	,t.NodeFromId
	,t.NodeToId
	FROM dfPropTargets t
--N'DimensionAttributeElement'


DECLARE @dfPropSourcesUpCount INT


;WITH dfPropMap AS
(
SELECT n.BasicGraphNodeId OriginalNodeId, n.BasicGraphNodeId, n.Description NodeDef FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId 
WHERE (n.NodeType IN (N'DimensionAttributeElement'/*, N'SqlScriptElement'*/)
OR
(n.NodeType = N'SqlScriptElement' AND e.RefPath LIKE '%/View%')
) AND n.GraphKind = @graphkind
AND n.ProjectConfigId = @projectconfigid
UNION ALL

SELECT dfPropMap.OriginalNodeId, n.BasicGraphNodeId, dfPropMap.NodeDef FROM BIDoc.BasicGraphNodes n
INNER JOIN dfPropMap ON n.ParentId = dfPropMap.BasicGraphNodeId AND (n.NodeType <> N'SqlScriptElement' OR n.Description = dfPropMap.NodeDef)
)
SELECT DISTINCT l.NodeFromId, pm.OriginalNodeId NodeToId 
INTO #propUpTargets
FROM BIDoc.BasicGraphLinks l
INNER JOIN dfPropMap pm ON pm.BasicGraphNodeId = l.NodeToId AND l.LinkType = @linktype
LEFT JOIN BIDoc.BasicGraphLinks lr ON lr.NodeFromId = l.NodeFromId AND lr.NodeToId = pm.OriginalNodeId AND lr.LinkType = @linktype
WHERE lr.BasicGraphLinkId IS NULL AND l.NodeFromId <> pm.OriginalNodeId


DECLARE @propUpCount INT  = (SELECT COUNT(*) FROM #propUpTargets)
PRINT 'Target propagation links - ' + CONVERT(VARCHAR(10), @propUpCount)

--EXEC sp_sequence_get_range @sequence_name = N'BIDoc.BasicGraphLinksSequence', @range_size = @propUpCount, @range_first_value = @linkSequenceStartVariant OUTPUT
--	SET @linkSequenceStart = CONVERT(INT, @linkSequenceStartVariant)

INSERT INTO BIDoc.BasicGraphLinks(
			--[BasicGraphLinkId]
           --,
		   [LinkType]
           ,[NodeFromId]
           ,[NodeToId]
		   )
	SELECT DISTINCT
	--ROW_NUMBER() OVER(ORDER BY t.NodeFromId) + @linkSequenceStart - 1
	--,
	@linktype
	,t.NodeFromId
	,t.NodeToId
	FROM #propUpTargets t

------------- SqlScripts with future ------------------

;WITH targetNodes AS(
-- nodes with future - have links leading from them (?)
SELECT DISTINCT tn.BasicGraphNodeId FROM BIDoc.BasicGraphNodes tn
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = tn.BasicGraphNodeId 
WHERE tn.ProjectConfigId = @projectconfigid AND tn.GraphKind = @graphkind
AND l.LinkType = @linktype AND tn.NodeType IN( 'SqlScriptElement', N'SqlDmlSourceElement', 
	N'SqlNAryOperationOperandColumnElement', N'SqlNAryOperationOutputColumnElement')
)
,targetDescendants AS
(
SELECT BasicGraphNodeId, BasicGraphNodeId AS DescendantNodeId FROM targetNodes
UNION ALL
SELECT td.BasicGraphNodeId, n.BasicGraphNodeId DescendantNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN targetDescendants td ON td.DescendantNodeId = n.ParentId
)
-- descendants with lineage - have links leading to them -> ancestors with future will counter-inherit their links
INSERT INTO BIDoc.BasicGraphLinks
(NodeFromId, NodeToId, LinkType)
SELECT DISTINCT l.NodeFromId, td.BasicGraphNodeId NodeToId, @linktype
FROM targetDescendants td
INNER JOIN BIDoc.BasicGraphLinks l ON l.LinkType = @linktype AND l.NodeToId = td.DescendantNodeId
LEFT JOIN BIDoc.BasicGraphLinks exl ON exl.NodeFromId = l.NodeFromId AND exl.NodeToId = td.BasicGraphNodeId AND exl.LinkType = @linktype
WHERE exl.BasicGraphLinkId IS NULL
OPTION(MAXRECURSION  1000)


PRINT CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' new links from SqlScript ancestors ''with future'' propagation'



;WITH targetNodes AS(
-- nodes with future - have links leading from them (?)
SELECT DISTINCT tn.BasicGraphNodeId FROM BIDoc.BasicGraphNodes tn
WHERE tn.ProjectConfigId = @projectconfigid AND tn.GraphKind = @graphkind AND tn.NodeType IN( N'ReportCalculatedMeasureElement', N'CubeCalculatedMeasureElement', N'DimensionAttributeElement')
)
,targetDescendants AS
(
SELECT BasicGraphNodeId, BasicGraphNodeId AS DescendantNodeId FROM targetNodes
UNION ALL
SELECT td.BasicGraphNodeId, n.BasicGraphNodeId DescendantNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN targetDescendants td ON td.DescendantNodeId = n.ParentId
)
-- descendants with lineage - have links leading to them -> ancestors with future will counter-inherit their links
INSERT INTO BIDoc.BasicGraphLinks
(NodeFromId, NodeToId, LinkType)
SELECT DISTINCT l.NodeFromId, td.BasicGraphNodeId NodeToId, @linktype
FROM targetDescendants td
INNER JOIN BIDoc.BasicGraphLinks l ON l.LinkType = @linktype AND l.NodeToId = td.DescendantNodeId
LEFT JOIN BIDoc.BasicGraphLinks exl ON exl.NodeFromId = l.NodeFromId AND exl.NodeToId = td.BasicGraphNodeId AND exl.LinkType = @linktype
WHERE exl.BasicGraphLinkId IS NULL
OPTION(MAXRECURSION  1000)


PRINT CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' new links from SSAS descendants propagation'


DROP TABLE #propUpTargets


---------------------------------------------------



-- textboxes with lineage
;WITH targetNodes AS(
SELECT DISTINCT tn.BasicGraphNodeId FROM BIDoc.BasicGraphNodes tn
WHERE tn.ProjectConfigId = @projectconfigid AND tn.GraphKind = @graphkind
AND tn.NodeType IN( N'TextBoxElement')
)
,targetDescendants AS
(
SELECT BasicGraphNodeId, BasicGraphNodeId AS DescendantNodeId FROM targetNodes
UNION ALL
SELECT td.BasicGraphNodeId, n.BasicGraphNodeId DescendantNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN targetDescendants td ON td.DescendantNodeId = n.ParentId
)
-- descendants with lineage - have links leading to them -> ancestors with future will counter-inherit their links
INSERT INTO BIDoc.BasicGraphLinks
(NodeFromId, NodeToId, LinkType)

SELECT DISTINCT l.NodeFromId, td.BasicGraphNodeId NodeToId, @linktype
FROM targetDescendants td
INNER JOIN BIDoc.BasicGraphLinks l ON l.LinkType = @linktype AND l.NodeToId = td.DescendantNodeId
LEFT JOIN BIDoc.BasicGraphLinks exl ON exl.NodeFromId = l.NodeFromId AND exl.NodeToId = td.BasicGraphNodeId AND exl.LinkType = @linktype
WHERE exl.BasicGraphLinkId IS NULL
OPTION(MAXRECURSION  1000)

PRINT CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' new links from textboxes propagation'


-- delete duplicate links
-- (links for which there is an equivalent link (same souce, target, type) with a lower ID)
;WITH fstLnks AS
(
SELECT MIN(l.BasicGraphLinkId) BasicGraphLinkId, l.NodeFromId, l.NodeToId, l.LinkType 
FROM BIDoc.BasicGraphLinks l
INNER JOIN BIDoc.BasicGraphNodes n ON l.NodeFromId = n.BasicGraphNodeId
WHERE n.ProjectConfigId = @projectconfigid
GROUP BY l.NodeFromId, l.NodeToId, l.LinkType
)
DELETE dl FROM BIDoc.BasicGraphLinks dl
INNER JOIN fstLnks f ON f.NodeFromId = dl.NodeFromId AND f.NodeToId = dl.NodeToId AND f.LinkType = dl.LinkType AND dl.BasicGraphLinkId <> f.BasicGraphLinkId


------------- SSAS hierarchies - descendants with lineage ------------------

;WITH targetNodes AS(
-- nodes with future - have links leading from them (?)
SELECT DISTINCT tn.BasicGraphNodeId FROM BIDoc.BasicGraphNodes tn
WHERE tn.ProjectConfigId = @projectconfigid AND tn.GraphKind = @graphkind
AND tn.NodeType IN( 'HierarchyElement')
)
,targetDescendants AS
(
SELECT BasicGraphNodeId, BasicGraphNodeId AS DescendantNodeId FROM targetNodes
UNION ALL
SELECT td.BasicGraphNodeId, n.BasicGraphNodeId DescendantNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN targetDescendants td ON td.DescendantNodeId = n.ParentId
)
-- descendants with lineage - have links leading to them -> ancestors with future will counter-inherit their links
INSERT INTO BIDoc.BasicGraphLinks
(NodeFromId, NodeToId, LinkType)
SELECT DISTINCT l.NodeFromId, td.BasicGraphNodeId NodeToId, @linktype
FROM targetDescendants td
INNER JOIN BIDoc.BasicGraphLinks l ON l.LinkType = @linktype AND l.NodeToId = td.DescendantNodeId
LEFT JOIN BIDoc.BasicGraphLinks exl ON exl.NodeFromId = l.NodeFromId AND exl.NodeToId = td.BasicGraphNodeId AND exl.LinkType = @linktype
WHERE exl.BasicGraphLinkId IS NULL
OPTION(MAXRECURSION  1000)


PRINT CONVERT(NVARCHAR(20), @@ROWCOUNT) + N' new links from hierarchy descendants propagation']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE1].[dfPropSources].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE1].[dfPropSources].[NodeToId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE2].[dfPropSources].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE2].[dfPropSources].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE3].[dfPropTargets].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE3].[dfPropTargets].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE4].[dfPropTargets].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE4].[dfPropTargets].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[NodeDef]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetDescendants].[DescendantNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetDescendants].[DescendantNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetDescendants].[DescendantNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetDescendants].[DescendantNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE1].[dfPropSources]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE1].[dfPropSources].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE1].[dfPropSources].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE2].[dfPropSources]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE2].[dfPropSources].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE2].[dfPropSources].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE3].[dfPropTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE3].[dfPropTargets].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE3].[dfPropTargets].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE4].[dfPropTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE4].[dfPropTargets].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE4].[dfPropTargets].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE5].[dfPropMap].[NodeDef]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[#propUpTargets].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE6].[targetDescendants].[DescendantNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE7].[targetDescendants].[DescendantNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE8].[targetDescendants].[DescendantNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE9].[fstLnks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE9].[fstLnks].[BasicGraphLinkId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE9].[fstLnks].[NodeFromId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE9].[fstLnks].[NodeToId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE9].[fstLnks].[LinkType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_PropagateDataFlowVertically].[CTE10].[targetDescendants].[DescendantNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_PropagateDataFlowVertically].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="11769" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_PropagateDataFlowVertically]&#xD;&#xA;&#x9;--DECLARE &#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER --= N'e99a3b4e-7f04-4b98-9780-10e71e6258cf'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_RebindAnnotations]">
			<Property Name="BodyScript">
				<Value><![CDATA[


UPDATE ae SET ModelElementId = me.ModelElementId
FROM Annotate.AnnotationElements ae
INNER JOIN BIDoc.ModelElements me ON ae.ProjectConfigId = me.ProjectConfigId AND ae.RefPath = me.RefPath
WHERE ae.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_RebindAnnotations].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_RebindAnnotations].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="329" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_RebindAnnotations]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_RenameModelElement]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE BIDoc.ModelElements SET Caption = @newName WHERE ModelElementId = @elementId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_RenameModelElement].[@newName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_RenameModelElement].[@elementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_RenameModelElement].[@elementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_RenameModelElement].[@newName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="182" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_RenameModelElement]&#xD;&#xA;&#x9;@elementId INT&#xD;&#xA;&#x9;,@newName NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_SaveLineageGridHistory]">
			<Property Name="BodyScript">
				<Value><![CDATA[

INSERT INTO [BIDoc].[LineageGridHistory](
	[ProjectConfigId],
	[SourceRootElementPath],
	[TargetRootElementPath],
	[SourceElementType],
	[TargetElementType],
	[SourceRootElementId],
	[TargetRootElementId],
	[CreatedDateTime],
	[UserId]
)
VALUES(
	@ProjectConfigId,
	@SourceRootElementPath,
	@TargetRootElementPath,
	@SourceElementType,
	@TargetElementType,
	@SourceRootElementId,
	@TargetRootElementId,
	GETDATE(),
	@UserId
)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[CreatedDateTime]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[LineageGridHistory].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetRootElementPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetRootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SaveLineageGridHistory].[@UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@ProjectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceRootElementPath]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetRootElementPath]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceElementType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetElementType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@SourceRootElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@TargetRootElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SaveLineageGridHistory].[@UserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="770" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_SaveLineageGridHistory]&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;@ProjectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@SourceRootElementPath NVARCHAR(MAX),&#xD;&#xA;&#x9;@TargetRootElementPath NVARCHAR(MAX),&#xD;&#xA;&#x9;@SourceElementType NVARCHAR(MAX),&#xD;&#xA;&#x9;@TargetElementType NVARCHAR(MAX),&#xD;&#xA;&#x9;@SourceRootElementId INT,&#xD;&#xA;&#x9;@TargetRootElementId INT,&#xD;&#xA;&#x9;@UserId INT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_SetElementSubtreeContents]">
			<Property Name="BodyScript">
				<Value><![CDATA[

UPDATE BIDoc.ModelElements SET SubtreeContent = NULL WHERE ProjectConfigId = @projectconfigid

CREATE TABLE #elementIds
(
ModelElementId INT NOT NULL
)

;WITH bottomElementIds AS(
SELECT DISTINCT e.ModelElementId FROM BIDoc.ModelElements e 
LEFT JOIN BIDoc.ModelLinks l ON l.ElementToId = e.ModelElementId AND l.Type = N'parent'
LEFT JOIN BIDoc.ModelElements sube ON sube.ModelElementId = l.ElementFromId AND sube.SubtreeContent IS NULL
WHERE e.SubtreeContent IS NULL AND sube.ModelElementId IS NULL AND e.ProjectConfigId = @projectconfigid
AND e.RefPath NOT LIKE 'Business%'
)
UPDATE e SET SubtreeContent = N'(' + e.RefPathSuffix + N' ' + e.ExtendedProperties + N')'  FROM bottomElementIds ids 
INNER JOIN BIDoc.ModelElements e ON ids.ModelElementId = e.ModelElementId

DECLARE @repeat INT = 1


WHILE @repeat = 1
BEGIN
	TRUNCATE TABLE #elementIds

	;WITH elementsToFill AS(
		-- dont have a child without filled subtreecontent and themselves have empty subtreecontent
		SELECT e.ModelElementId
		FROM BIDoc.ModelElements e
		INNER JOIN BIDoc.ModelElementTypeDetailLevels dl ON dl.ElementType = e.Type
		WHERE 
		e.SubtreeContent IS NULL
		AND e.ProjectConfigId = @projectconfigid
		AND e.RefPath NOT LIKE 'Business%'
		AND dl.DetailLevel IN (1,2)
		AND NOT EXISTS(
			SELECT TOP 1 1 FROM BIDoc.ModelLinks l
			INNER JOIN BIDoc.ModelElements sube ON l.ElementFromId = sube.ModelElementId
			WHERE l.ElementToId = e.ModelElementId AND l.Type = N'parent' AND sube.SubtreeContent IS NULL
		)
	)
	INSERT INTO #elementIds(ModelElementId)
	SELECT ModelElementId 
	FROM elementsToFill

	--SELECT TOP 10 * FROM #elementIds
--	SELECT COUNT(*) FROM BiDoc.ModelElements WHERE ProjectConfigId = N'4290174E-AA85-4704-A4BA-DD910C1A0850' AND SubTreeContent IS NULL
--AND RefPath NOT LIKE 'Business%'

	UPDATE e SET SubtreeContent = N'(' + e.RefPathSuffix + N' ' + e.ExtendedProperties +
		(
			SELECT STRING_AGG(sube.SubtreeContent, N',') WITHIN GROUP (ORDER BY sube.RefPath)
			FROM BIDoc.ModelElements sube
			INNER JOIN BIDoc.ModelLinks subl ON subl.Type = N'parent' AND subl.ElementFromId = sube.ModelElementId
			WHERE subl.ElementToId = e.ModelElementId AND sube.RefPath NOT LIKE 'Business%'
		) + N')'
	FROM BIDoc.ModelElements e
	INNER JOIN #elementIds ids ON ids.ModelElementId = e.ModelElementId

	SELECT @repeat = IIF(EXISTS(SELECT TOP 1 1 FROM #elementIds), 1, 0)
END

DROP TABLE #elementIds]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetElementSubtreeContents].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetElementSubtreeContents].[#elementIds]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetElementSubtreeContents].[#elementIds].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetElementSubtreeContents].[#elementIds].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathSuffix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[SubtreeContent]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_SetElementSubtreeContents].[#elementIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[BIDoc].[sp_SetElementSubtreeContents].[#elementIds].[ModelElementId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_SetElementSubtreeContents].[CTE1].[bottomElementIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_SetElementSubtreeContents].[CTE1].[bottomElementIds].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDoc].[sp_SetElementSubtreeContents].[CTE2].[elementsToFill]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDoc].[sp_SetElementSubtreeContents].[CTE2].[elementsToFill].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SetElementSubtreeContents].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2550" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_SetElementSubtreeContents]&#xD;&#xA;&#x9;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDoc].[sp_SetModelElementDescriptivePaths]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE dp FROM BIDoc.ModelElementDescriptivePaths dp
INNER JOIN BIDoc.ModelElements e ON dp.ModelElementId = e.ModelElementId
WHERE e.ProjectConfigId = @projectconfigid

INSERT INTO BIDoc.ModelElementDescriptivePaths(ModelElementId, DescriptivePath, DescriptiveRootPath)
SELECT 
e.ModelElementId,
IIF(e.[Type] IN (N'CD.DLS.Model.Mssql.Db.SqlScriptElement', N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement'),

ped.TypeDescription + N' [' + pe.Caption + N']'
	+ IIF(ISNULL(ppe.RefPath, N'') = N'', 
	N'', N' in ' + pped.TypeDescription + N' [' + ppe.Caption + N']')

,

--ed.TypeDescription + IIF(pe.[Type] <> N'CD.DLS.Model.Mssql.Db.SchemaElement', N' ', N' [' + ppe.Caption + N']') + N'[' + pe.Caption + N']'

ed.TypeDescription + IIF(pe.[Type] <> N'CD.DLS.Model.Mssql.Db.SchemaElement', N' ', N' [' + ppe.Caption + N'].') + IIF(pe.[Type] = N'CD.DLS.Model.Mssql.Db.SchemaElement', N'[' + pe.Caption + N'].', N'') +  N'[' + e.Caption + N']' 
	+ 
	IIF(pe.[Type] = N'CD.DLS.Model.Mssql.Db.SchemaElement', '',
		--IIF(ISNULL(ppe.RefPath, N'') = N'', N'', N' in ' + pped.TypeDescription + N' [' + ppe.Caption + N']'),
		IIF(ISNULL(pe.RefPath, N'') = N'', N'', N' in ' + ped.TypeDescription + N' [' + pe.Caption + N']')
	)
	--+ IIF(ISNULL(ppe.RefPath, N'Solution') = N'Solution', N'', N' in ' + pped.TypeDescription + N' [' + ppe.Caption + N']')
),

----
NULL

FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelElementTypeDescriptions ed ON ed.ElementType = e.Type
LEFT JOIN BIDoc.ModelLinks l ON l.Type = N'parent' AND l.ElementFromId = e.ModelElementId
LEFT JOIN BIDoc.ModelElements pe ON pe.ModelElementId = l.ElementToId
LEFT JOIN BIDoc.ModelElementTypeDescriptions ped ON ped.ElementType = pe.Type
LEFT JOIN BIDoc.ModelLinks pl ON pl.Type = N'parent' AND pl.ElementFromId = pe.ModelElementId
LEFT JOIN BIDoc.ModelElements ppe ON ppe.ModelElementId = pl.ElementToId
LEFT JOIN BIDoc.ModelElementTypeDescriptions pped ON pped.ElementType = ppe.Type
--WHERE pe.[Type] = N'CD.DLS.Model.Mssql.Db.SchemaElement'
WHERE e.ProjectConfigId = @projectconfigid


---- set root paths

UPDATE e SET DescriptiveRootPath = hle1d.TypeDescription + N' [' + hle1.Caption + N']' +
IIF(hle2.ModelElementId IS NULL, N'', N', ' + hle2d.TypeDescription + N' ' + 
	IIF(hle2p.[Type] = N'CD.DLS.Model.Mssql.Db.SchemaElement', N'[' + hle2p.Caption + N'].', N'')
	+ N'[' + hle2.Caption + N']'
)
FROM BIDoc.ModelElementDescriptivePaths e
LEFT JOIN BIDoc.HigherLevelElementAncestors hl1 ON hl1.SouceElementId = e.ModelElementId AND hl1.DetailLevel = 3
LEFT JOIN BIDoc.HigherLevelElementAncestors hl2 ON hl2.SouceElementId = e.ModelElementId AND hl2.DetailLevel = 2
LEFT JOIN BIDoc.ModelLinks hl2pl ON hl2pl.Type = N'parent' AND hl2pl.ElementFromId = hl2.AncestorElementId
LEFT JOIN BIDoc.ModelElements hle1 ON hle1.ModelElementId = hl1.AncestorElementId
LEFT JOIN BIDoc.ModelElements hle2 ON hle2.ModelElementId = hl2.AncestorElementId
LEFT JOIN BIDoc.ModelElements hle2p ON hle2p.ModelElementId = hl2pl.ElementToId
LEFT JOIN BIDoc.ModelElementTypeDescriptions hle1d ON hle1d.ElementType = hle1.Type
LEFT JOIN BIDoc.ModelElementTypeDescriptions hle2d ON hle2d.ElementType = hle2.Type
INNER JOIN BIDoc.ModelElements ee ON e.ModelElementId = ee.ModelElementId
WHERE ee.ProjectConfigId = @projectconfigid


UPDATE dp SET DescriptiveRootPath = e.Caption
FROM BIDoc.ModelElementDescriptivePaths dp
INNER JOIN BIDoc.ModelElements e ON dp.ModelElementId = e.ModelElementId
INNER JOIN Adm.ProjectConfigs p ON p.ProjectConfigId = e.ProjectConfigId
WHERE dp.DescriptiveRootPath IS NULL AND e.ProjectConfigId = @projectconfigid

UPDATE dp SET DescriptivePath = e.Caption
FROM BIDoc.ModelElementDescriptivePaths dp
INNER JOIN BIDoc.ModelElements e ON dp.ModelElementId = e.ModelElementId
INNER JOIN Adm.ProjectConfigs p ON p.ProjectConfigId = e.ProjectConfigId
WHERE dp.DescriptivePath IS NULL AND e.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[sp_SetModelElementDescriptivePaths].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDoc].[sp_SetModelElementDescriptivePaths].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4061" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDoc].[sp_SetModelElementDescriptivePaths]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[BIDOc].[sp_SetRefPathIntervals]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF OBJECT_ID('tempdb.dbo.#intervals') IS NOT NULL
DROP TABLE #intervals
IF OBJECT_ID('tempdb.dbo.#ranking') IS NOT NULL
DROP TABLE #ranking


SELECT ModelElementId, RefPath, l.ElementToId ParentElementId, ROW_NUMBER() OVER(ORDER BY RefPath) RN
INTO #ranking
FROM BIDoc.ModelElements e
LEFT JOIN BIDoc.ModelLinks l ON l.Type = N'parent' AND l.ElementFromId = e.ModelElementId 
WHERE ProjectConfigId = @projectConfigId

--SELECT * FROM #ranking

;WITH descendants AS(
SELECT r.ModelElementId, r.ModelElementId DescendantId, r.RefPath DRP, r.RN DRN FROM #ranking r

UNION ALL

SELECT descendants.ModelElementId, ch.ModelElementId, ch.RefPath DRP, ch.RN DRN  
FROM #ranking ch INNER JOIN descendants 
ON ch.ParentElementId = descendants.DescendantId
)
SELECT r.ModelElementId, r.RefPath, r.RN,
MAX(d.DRN) LastDescendantRN
INTO #intervals
FROM #ranking r
INNER JOIN descendants d ON r.ModelElementId = d.ModelElementId
GROUP BY r.ModelElementId, r.RefPath, r.RN
OPTION (MAXRECURSION 1000)

UPDATE e SET RefPathIntervalStart = i.RN, RefPathIntervalEnd = i.LastDescendantRN FROM #intervals i
INNER JOIN BIDoc.ModelElements e ON i.ModelElementId = e.ModelElementId

UPDATE n SET RefPathIntervalStart = i.RN, RefPathIntervalEnd = i.LastDescendantRN FROM #intervals i
INNER JOIN BIDoc.BasicGraphNodes n ON i.ModelElementId = n.SourceElementId

DROP TABLE #intervals
DROP TABLE #ranking

IF @requestId IS NOT NULL
BEGIN
-- notify the WF followup
EXEC [Adm].[sp_SaveDbOperationFinishedMessage] @requestId
END

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ParentElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[DescendantId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[LastDescendantRN]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[RN]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[LastDescendantRN]" />
				</Entry>
				<Entry>
					<References Name="[BIDOc].[sp_SetRefPathIntervals].[@requestId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[sp_SaveDbOperationFinishedMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ParentElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[DescendantId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[DRP]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[CTE1].[descendants].[DRN]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[RN]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDOc].[sp_SetRefPathIntervals].[#ranking].[RN]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[BIDOc].[sp_SetRefPathIntervals].[#intervals].[LastDescendantRN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDOc].[sp_SetRefPathIntervals].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[BIDOc].[sp_SetRefPathIntervals].[@requestId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1683" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [BIDOc].[sp_SetRefPathIntervals]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@requestId UNIQUEIDENTIFIER = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_BasicGraphLinks]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphLinks].[BasicGraphLinkId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphLinks].[LinkType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphLinks].[NodeFromId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphLinks].[NodeToId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_BasicGraphNodes]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[BasicGraphNodeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[Name]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[NodeType]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[Description]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[ParentId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[SourceElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_BasicGraphNodes].[TopologicalOrder]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_GraphDocuments]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_GraphDocuments].[Content]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_GraphDocuments].[DocumentType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_GraphDocuments].[GraphNode_Id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_IdList]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_IdList].[Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_IdMap]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_IdMap].[Id1]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_IdMap].[Id2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_ModelElements]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[ModelElementId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[ExtendedProperties]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[RefPath]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[Definition]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[Caption]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[Type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelElements].[RefPathSuffix]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_ModelLinks]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelLinks].[ModelLinkId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelLinks].[ElementFromId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelLinks].[ElementToId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelLinks].[Type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_ModelLinks].[ExtendedProperties]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_OrderedIdList]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_OrderedIdList].[Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_OrderedIdList].[Order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[BIDoc].[UDTT_StringList]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[BIDoc].[UDTT_StringList].[Value]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[BIDoc]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextCatalog" Name="[fulltext_default]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Schema].[uploader].[dbo].[adm]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[uploader]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Schema].[uploader].[dbo].[stg]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[uploader]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Insert.Schema].[uploader].[dbo].[stg]">
			<Property Name="Permission" Value="1" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[uploader]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Schema].[uploader].[dbo].[adm]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[uploader]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[Adm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Schema].[uploader].[dbo].[stg]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[uploader]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Inspect]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetBusinessTree]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetBusinessTree].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[ParentLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[MaxParentLevel]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[ParentElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[elemTree].[ParentLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[TypeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[MaxParentLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetBusinessTree].[CTE1].[x].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

WITH elemTree AS(
	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, 0 ParentLevel
	FROM BIDoc.ModelElements e 
	WHERE e.ProjectConfigId = @projectConfigId AND e.Type IN (
	N'CD.DLS.Model.Business.Organization.BusinessFolderElement',
	N'CD.DLS.Model.Business.Excel.PivotTableTemplateElement'
	)
	--AND (e.RefPath LIKE N'Business/SharedFolder%' OR e.RefPath LIKE N'%Name=''' + @userIdentity + N'''%')

	UNION ALL

	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, ParentLevel + 1
	FROM elemTree t
	INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = t.ModelElementId AND l.Type = N'parent'
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
	WHERE e.Type = N'CD.DLS.Model.Business.Organization.BusinessFolderElement'
)
,x AS(

SELECT ModelElementId, Caption, elemTree.[Type], td.TypeDescription, MAX(ParentLevel) MaxParentLevel, RefPath
FROM elemTree
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON [Type] = td.ElementType
GROUP BY ModelElementId, Caption, elemTree.[Type], td.TypeDescription, RefPath
)
SELECT ModelElementId, Caption, x.[Type], TypeDescription, MaxParentLevel, l.ElementToId ParentElementId, RefPath
FROM x
LEFT JOIN BIDoc.ModelLinks l ON l.ElementFromId = ModelElementId AND l.Type = N'parent']]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1416" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Inspect.f_GetBusinessTree&#xD;&#xA;(&#xD;&#xA;@projectConfigId UNIQUEIDENTIFIER--,&#xD;&#xA;--@userIdentity NVARCHAR(255)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetBusinessTree].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[Inspect].[f_GetElementTypeDetailLevel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDetailLevels].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetElementTypeDetailLevel].[@elementType]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	
	RETURN (SELECT DetailLevel FROM BIDoc.ModelElementTypeDetailLevels WHERE ElementType = @elementType)

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="227" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetElementTypeDetailLevel]&#xD;&#xA;(&#xD;&#xA;&#x9;@elementType NVARCHAR(255)&#xD;&#xA;)&#xD;&#xA;RETURNS INT&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetElementTypeDetailLevel].[@elementType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetGraphNodeChildrenExtended]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodeChildrenExtended].[@parentId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[DescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.[Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
	  ,dp.DescriptivePath
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
LEFT JOIN BIDoc.ModelElementDescriptivePaths dp ON dp.ModelElementId = e.ModelElementId
WHERE ParentId = @parentId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="693" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetGraphNodeChildrenExtended]&#xD;&#xA;(&#xD;&#xA;&#x9;@parentId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodeChildrenExtended].[@parentId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetGraphNodeExtended]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodeExtended].[@nodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodeExtended].[DescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,e.Definition [Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
	  ,e.Type ElementType
	  ,dp.DescriptivePath
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
LEFT JOIN BIDoc.ModelElementDescriptivePaths dp ON dp.ModelElementId = e.ModelElementId
WHERE BasicGraphNodeId = @nodeId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="724" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetGraphNodeExtended]&#xD;&#xA;(&#xD;&#xA;&#x9;@nodeId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodeExtended].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetGraphNodesByIdExtended]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[@nodeIds]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[@nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[DescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetGraphNodesByIdExtended].[@nodeIds]" Disambiguator="23">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[f_GetGraphNodesByIdExtended].[@nodeIds].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.[Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
	  ,e.Type ElementType
	  ,dp.DescriptivePath
FROM @nodeIds ni
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = ni.Id
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
LEFT JOIN BIDoc.ModelElementDescriptivePaths dp ON dp.ModelElementId = e.ModelElementId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="766" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetGraphNodesByIdExtended]&#xD;&#xA;(&#xD;&#xA;&#x9;@nodeIds [BIDoc].[UDTT_IdList] READONLY&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodesByIdExtended].[@nodeIds]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetGraphNodesExtended]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesExtended].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesExtended].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended].[DescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.[Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
	  ,e.Type ElementType
	  ,dp.DescriptivePath
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
LEFT JOIN BIDoc.ModelElementDescriptivePaths dp ON dp.ModelElementId = e.ModelElementId
WHERE GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="800" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetGraphNodesExtended]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodesExtended].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodesExtended].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[IX_BIDoc_BasicGraphNodes_GrphKind_ProjectConfigId_RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[DescriptivePath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.[Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
	  ,e.Type ElementType
	  ,dp.DescriptivePath
FROM BIDoc.BasicGraphNodes n WITH (INDEX(IX_BIDoc_BasicGraphNodes_GrphKind_ProjectConfigId_RefPathIntervalStart))
INNER JOIN BIDoc.ModelElements e WITH (FORCESEEK) ON e.ModelElementId = n.SourceElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
LEFT JOIN BIDoc.ModelElementDescriptivePaths dp ON dp.ModelElementId = e.ModelElementId
WHERE GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="912" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetGraphNodesExtended_ForceSeek]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetGraphNodesExtended_ForceSeek].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetHighLevelLineageDestinations]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageDestinations].[@elementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[descendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[AncestorParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[descendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[targetLeaves]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[targetLeaves].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[targetLeaves].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[targetLeaves].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[targetLeaves].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[AncestorNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[ancestors].[AncestorParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageDestinations].[CTE1].[baseLevelAncestors].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
 
 WITH descendants AS
(
SELECT n.BasicGraphNodeId 
FROM BIDoc.BasicGraphNodes n
WHERE n.SourceElementId = @elementId AND n.GraphKind = N'DataFlowTransitive'

UNION ALL

SELECT n.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes n
INNER JOIN descendants d ON d.BasicGraphNodeId = n.ParentId
)
,targetLeaves AS(
SELECT --*
src.BasicGraphNodeId, src.TopologicalOrder, src.SourceElementId, src.ParentId
FROM descendants d
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = d.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes src ON src.BasicGraphNodeId = l.NodeToId
WHERE l.LinkType = N'DataFlow'
--ORDER BY src.TopologicalOrder DESC
)
--SELECT * FROM sourceLeaves WHERE 
,ancestors AS
(
SELECT 
sl.BasicGraphNodeId, 
sl.TopologicalOrder, 
sl.BasicGraphNodeId AncestorNodeId, 
sl.ParentId AncestorParentId
FROM targetLeaves sl
INNER JOIN BIDoc.BasicGraphNodes a ON a.BasicGraphNodeId = sl.ParentId

UNION ALL

SELECT
sl.BasicGraphNodeId, 
sl.TopologicalOrder, 
a.BasicGraphNodeId AncestorNodeId, 
a.ParentId AncestorParentId
FROM ancestors sl
INNER JOIN BIDoc.BasicGraphNodes a ON a.BasicGraphNodeId = sl.AncestorParentId
)
--SELECT * FROM ancestors a WHERE a.AncestorNodeId = 21235622
,baseLevelAncestors AS
(
SELECT 
a.TopologicalOrder, n.Name, n.BasicGraphNodeId, n.NodeType, n.SourceElementId, n.[Description],
ROW_NUMBER() OVER(PARTITION BY n.BasicGraphNodeId ORDER BY a.TopologicalOrder DESC) RN
FROM ancestors a
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = a.AncestorNodeId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE n.NodeType IN (
N'ViewElement',
N'PhysicalMeasureElement',
N'ReportElement',
N'SchemaTableElement',
N'ProcedureElement',
N'PackageElement',
N'CalculatedMeasureElement'
)
)
SELECT 
n.BasicGraphNodeId
,n.Name
,n.GraphKind
,n.[Description]
,n.NodeType
,n.ProjectConfigId
,n.SourceElementId
,ROW_NUMBER() OVER(ORDER BY
IIF(a.NodeType IN (N'ReportCalculatedMeasureElement', N'CubeCalculatedMeasureElement'), 1, 0),
a.TopologicalOrder) TopologicalOrder
,n.ParentId
,e.RefPath
,td.TypeDescription
,e.Type ElementType
FROM baseLevelAncestors a 
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = a.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
WHERE a.RN = 1
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="2546" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetHighLevelLineageDestinations]&#xD;&#xA;(&#xD;&#xA;  @elementId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetHighLevelLineageDestinations].[@elementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetHighLevelLineageSources]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageSources].[@elementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[descendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[AncestorParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[descendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[sourceLeaves]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[sourceLeaves].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[sourceLeaves].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[sourceLeaves].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[sourceLeaves].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[AncestorNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[ancestors].[AncestorParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[TopologicalOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelLineageSources].[CTE1].[baseLevelAncestors].[RN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(

WITH descendants AS
(
SELECT n.BasicGraphNodeId 
FROM BIDoc.BasicGraphNodes n
WHERE n.SourceElementId = @elementId AND n.GraphKind = N'DataFlowTransitive'

UNION ALL

SELECT n.BasicGraphNodeId
FROM BIDoc.BasicGraphNodes n
INNER JOIN descendants d ON d.BasicGraphNodeId = n.ParentId
)
,sourceLeaves AS(
SELECT --*
src.BasicGraphNodeId, src.TopologicalOrder, src.SourceElementId, src.ParentId
FROM descendants d
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeToId = d.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes src ON src.BasicGraphNodeId = l.NodeFromId
WHERE l.LinkType = N'DataFlow'
--ORDER BY src.TopologicalOrder DESC
)
--SELECT * FROM sourceLeaves WHERE 
,ancestors AS
(
SELECT 
sl.BasicGraphNodeId, 
sl.TopologicalOrder, 
sl.BasicGraphNodeId AncestorNodeId, 
sl.ParentId AncestorParentId
FROM sourceLeaves sl
INNER JOIN BIDoc.BasicGraphNodes a ON a.BasicGraphNodeId = sl.ParentId

UNION ALL

SELECT
sl.BasicGraphNodeId, 
sl.TopologicalOrder, 
a.BasicGraphNodeId AncestorNodeId, 
a.ParentId AncestorParentId
FROM ancestors sl
INNER JOIN BIDoc.BasicGraphNodes a ON a.BasicGraphNodeId = sl.AncestorParentId
)
--SELECT * FROM ancestors a WHERE a.AncestorNodeId = 21235622
,baseLevelAncestors AS
(
SELECT 
a.TopologicalOrder, n.Name, n.BasicGraphNodeId, n.NodeType, n.SourceElementId, n.[Description],
ROW_NUMBER() OVER(PARTITION BY n.BasicGraphNodeId ORDER BY a.TopologicalOrder DESC) RN
FROM ancestors a
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = a.AncestorNodeId
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE n.NodeType IN (
N'ViewElement',
N'PhysicalMeasureElement',
N'ReportElement',
N'SchemaTableElement',
N'ProcedureElement',
N'PackageElement',
N'CalculatedMeasureElement'
)
)
SELECT 
n.BasicGraphNodeId
,n.Name
,n.GraphKind
,n.[Description]
,n.NodeType
,n.ProjectConfigId
,n.SourceElementId
,ROW_NUMBER() OVER(ORDER BY
IIF(a.NodeType IN (N'ReportCalculatedMeasureElement', N'CubeCalculatedMeasureElement'), 1, 0) DESC,
a.TopologicalOrder DESC) TopologicalOrder
,n.ParentId
,e.RefPath
,td.TypeDescription
,e.Type ElementType
FROM baseLevelAncestors a 
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = a.BasicGraphNodeId 
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
WHERE a.RN = 1
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="2549" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GetHighLevelLineageSources]&#xD;&#xA;(&#xD;&#xA;  @elementId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetHighLevelLineageSources].[@elementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetHighLevelSolutionTree]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[MaxParentLevel]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ParentElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelSolutionTree].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[MaxParentLevel]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[MaxParentLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[ParentElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[ParentElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelSolutionTree].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
SELECT
	[ModelElementId],
	[Caption],
	[Type], 
	[TypeDescription], 
	[MaxParentLevel], 
	[ParentElementId], 
	[RefPath]
FROM Inspect.HighLevelSolutionTrees 
WHERE ProjectConfigId = @projectConfigId

/*
WITH elemTree AS(
	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, 0 ParentLevel
	FROM BIDoc.ModelElements e 
	WHERE e.ProjectConfigId = @projectConfigId AND e.Type IN (
	N'CD.DLS.Model.Mssql.Ssrs.ReportElement',
	N'CD.DLS.Model.Mssql.Ssis.PackageElement',
	N'CD.DLS.Model.Mssql.Ssas.CubeElement',
	N'CD.DLS.Model.Mssql.Ssas.DimensionElement',
	N'CD.DLS.Model.Mssql.Ssas.MdxScriptElement',
	N'CD.DLS.Model.Mssql.Db.ViewElement',
	N'CD.DLS.Model.Mssql.Db.SchemaTableElement',
	N'CD.DLS.Model.Mssql.Ssas.MeasureGroupElement',
	N'CD.DLS.Model.Mssql.Db.ProcedureElement',
	N'CD.DLS.Model.Mssql.Tabular.ParsedTabularTableColumn'
	)

	UNION ALL

	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, ParentLevel + 1
	FROM elemTree t
	INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = t.ModelElementId AND l.Type = N'parent'
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
)
,x AS(

SELECT ModelElementId, Caption, elemTree.[Type], td.TypeDescription, MAX(ParentLevel) MaxParentLevel, RefPath
FROM elemTree
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON [Type] = td.ElementType
GROUP BY ModelElementId, Caption, elemTree.[Type], td.TypeDescription, RefPath
)
SELECT ModelElementId, Caption, x.[Type], TypeDescription, MaxParentLevel, l.ElementToId ParentElementId, RefPath
FROM x
LEFT JOIN BIDoc.ModelLinks l ON l.ElementFromId = ModelElementId AND l.Type = N'parent'
*/]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1763" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Inspect.f_GetHighLevelSolutionTree&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetHighLevelSolutionTree].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GetHighLevelTypesUnderElement]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[ParentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[DescendantType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[DescendantType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HighLevelTypeDescendants].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetHighLevelTypesUnderElement].[@rootElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelTypesUnderElement].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[HighLevelTypeDescendants].[DescendantType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelTypesUnderElement].[TypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GetHighLevelTypesUnderElement].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[HighLevelTypeDescendants].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

SELECT de.DescendantType AS ElementType, td.TypeDescription ,de.NodeType 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.HighLevelTypeDescendants de ON de.ParentType = e.Type
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON de.DescendantType = td.ElementType
INNER JOIN BIDoc.BasicGraphNodes n ON n.SourceElementId = e.ModelElementId
WHERE e.ModelElementId = @rootElementId AND n.GraphKind = N'DataFlow'

/*SELECT DISTINCT td.ElementType, td.TypeDescription, n.NodeType 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelElements se ON /*e.RefPath = N'Solution' OR*/ LEFT(se.RefPath, LEN(e.RefPathPrefix)) = e.RefPathPrefix
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON se.[Type] = td.ElementType
INNER JOIN BIDoc.BasicGraphNodes n ON n.SourceElementId = se.ModelElementId
WHERE e.ModelElementId = @rootElementId AND n.GraphKind = N'DataFlow'
AND se.Type IN (
	N'CD.DLS.Model.Mssql.Ssrs.ReportElement',
	N'CD.DLS.Model.Mssql.Ssrs.TextBoxElement',
	N'CD.DLS.Model.Mssql.Ssis.PackageElement',
	N'CD.DLS.Model.Mssql.Ssas.CubeElement',
	N'CD.DLS.Model.Mssql.Ssas.DimensionElement',
	N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement',
	N'CD.DLS.Model.Mssql.Ssas.MdxScriptElement',
	N'CD.DLS.Model.Mssql.Db.DatabaseElement',
	N'CD.DLS.Model.Mssql.Db.ViewElement',
	N'CD.DLS.Model.Mssql.Db.SchemaTableElement',
	N'CD.DLS.Model.Mssql.Db.ColumnElement',
	N'CD.DLS.Model.Mssql.Ssas.MeasureGroupElement',
	N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement',
	N'CD.DLS.Model.Mssql.Ssas.CalculatedMeasureElement'
	/*
	,
	N'CD.DLS.Model.Mssql.Ssas.CubeDimensionElement'
	*/
	)*/]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1748" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION Inspect.f_GetHighLevelTypesUnderElement&#xD;&#xA;(@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;,@rootElementId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetHighLevelTypesUnderElement].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GetHighLevelTypesUnderElement].[@rootElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[@nodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[CTE1].[descendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[BasicGraphNodeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[Name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[NodeType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[Description]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[ParentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[GraphKind]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[ProjectConfigId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[TopologicalOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[CTE1].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[CTE1].[descendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[CTE1].[descendants].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[CTE1].[descendants].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
  -- the selected node and all descendants
  WITH descendants AS
  (
	SELECT e.BasicGraphNodeId, e.Name, e.Description 
	FROM BIDoc.BasicGraphNodes e WHERE e.BasicGraphNodeId = @nodeId
	
	UNION ALL

	SELECT e.BasicGraphNodeId, e.Name, e.Description
	FROM descendants d
	INNER JOIN BIDoc.BasicGraphNodes e ON e.ParentId = d.BasicGraphNodeId
  )
  SELECT DISTINCT
		n.[BasicGraphNodeId]
		,n.[Name]
		,n.[NodeType]
		,n.[Description]
		,n.[ParentId]
		,n.[GraphKind]
		,n.[ProjectConfigId]
		,n.[SourceElementId]
		,n.[TopologicalOrder]
		,e.[RefPath]
		FROM BIDoc.BasicGraphLinks lnk
		INNER JOIN descendants l ON l.BasicGraphNodeId = lnk.NodeToId
		INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = lnk.NodeFromId
		INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
		LEFT JOIN descendants cycle ON cycle.BasicGraphNodeId = n.BasicGraphNodeId
		WHERE cycle.BasicGraphNodeId IS NULL AND lnk.LinkType IN ('DataFlow')
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1089" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_GraphNodeLineageOriginOneLevel]&#xD;&#xA;(&#xD;&#xA;  @nodeId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE&#xD;&#xA;AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_GraphNodeLineageOriginOneLevel].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_ListExternalDfSourceColumns]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_ListExternalDfSourceColumns].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[SourceElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[ColumnName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[DataType]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[Length]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[Precision]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[Scale]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[Command]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[ManagerCaption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[SourceType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[ConnectionString]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[LocaleID]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[CodePage]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[FileFormat]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[PackageElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[PackageRefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSourceColumns].[CTE1].[externalDfSources].[PackageCaption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(

WITH externalDfSources AS(
SELECT 
se.ModelElementId, 
/**/ISNULL(JSON_VALUE(se.ExtendedProperties, '$.Command'), JSON_VALUE(se.ExtendedProperties, '$.OpenRowset')) /**/ /*N''*/ Command,
se.RefPath,
se.Caption,
mngre.Caption ManagerCaption,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.SourceType')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'SourceType')*/ SourceType,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.ConnectionString')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'ConnectionString')*/ ConnectionString,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.LocaleID')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'LocaleID')*/ LocaleID,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.CodePage')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'CodePage')*/ CodePage,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.Format')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'Format')*/ FileFormat
,pkge.ModelElementId PackageElementId
,pkge.RefPath PackageRefPath
,pkge.Caption PackageCaption
FROM BIDoc.ModelElements se
INNER JOIN BIDoc.ModelLinks mngrl ON se.ModelElementId = mngrl.ElementFromId AND mngrl.Type = N'SourceConnection'
INNER JOIN BIDoc.ModelElements mngre ON mngre.ModelElementId = mngrl.ElementToId
INNER JOIN BIDoc.ModelElements pkge ON LEFT(se.RefPath, LEN(pkge.RefPath)) = pkge.RefPath
WHERE se.Type = N'CD.DLS.Model.Mssql.Ssis.DfSourceElement' 
--AND adm.f_SimpleJsonValue(se.ExtendedProperties, N'IsExternalSource') = N'true' 
AND JSON_VALUE(se.ExtendedProperties, '$.IsExternalSource') = N'true' 
AND se.ProjectConfigId = @projectconfigid
AND pkge.Type = N'CD.DLS.Model.Mssql.Ssis.PackageElement' AND pkge.ProjectConfigId = @projectconfigid
)
SELECT se.ModelElementId SourceElementId, ce.ModelElementId, ce.Caption ColumnName
,/**/JSON_VALUE(ce.ExtendedProperties, '$.DtsDataType') /**/ /*adm.f_SimpleJsonValue(ce.ExtendedProperties, N'DtsDataType')*/ DataType
,/**/JSON_VALUE(ce.ExtendedProperties, '$.Length') /**/ /*adm.f_SimpleJsonValue(ce.ExtendedProperties, N'Length')*/ Length
,/**/JSON_VALUE(ce.ExtendedProperties, '$.Precision') /**/ /*adm.f_SimpleJsonValue(ce.ExtendedProperties, N'Precision')*/ Precision
,/**/JSON_VALUE(ce.ExtendedProperties, '$.Scale') /**/ /*adm.f_SimpleJsonValue(ce.ExtendedProperties, N'Scale')*/ Scale
,ce.RefPath

FROM externalDfSources se
INNER JOIN BIDoc.BasicGraphNodes n ON n.SourceElementId = se.ModelElementId AND n.GraphKind = N'DataFlow'
INNER JOIN BIDoc.BasicGraphNodes c1 ON c1.ParentId = n.BasicGraphNodeId AND c1.NodeType = N'DfOutputElement'
INNER JOIN BIDoc.ModelElements oe ON oe.ModelElementId = c1.SourceElementId
INNER JOIN BIDoc.BasicGraphNodes c2 ON c2.ParentId = c1.BasicGraphNodeId
INNER JOIN BIDoc.ModelElements ce ON ce.ModelElementId = c2.SourceElementId

WHERE oe.Type = N'CD.DLS.Model.Mssql.Ssis.DfOutputElement' 
AND JSON_VALUE(oe.ExtendedProperties, '$.OutputType') = N'0' 
AND ce.Type = N'CD.DLS.Model.Mssql.Ssis.DfColumnElement'


)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="3143" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_ListExternalDfSourceColumns]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS&#xD;&#xA;RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_ListExternalDfSourceColumns].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_ListExternalDfSources]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_ListExternalDfSources].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[Command]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[ManagerCaption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[SourceType]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[ConnectionString]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[LocaleID]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[CodePage]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[FileFormat]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[PackageElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[PackageRefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListExternalDfSources].[PackageCaption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(

SELECT 
se.ModelElementId, 
/**/ISNULL(JSON_VALUE(se.ExtendedProperties, '$.Command'), JSON_VALUE(se.ExtendedProperties, '$.OpenRowset'))/**/ /*N''*/ Command,
se.RefPath,
se.Caption,
mngre.Caption ManagerCaption,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.SourceType')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'SourceType')*/ SourceType,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.ConnectionString')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'ConnectionString')*/ ConnectionString,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.LocaleID')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'LocaleID')*/ LocaleID,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.CodePage')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'CodePage')*/ CodePage,
/**/JSON_VALUE(mngre.ExtendedProperties, N'$.Format')/**/ /*adm.f_SimpleJsonValue(mngre.ExtendedProperties, N'Format')*/ FileFormat
,pkge.ModelElementId PackageElementId
,pkge.RefPath PackageRefPath
,pkge.Caption PackageCaption
FROM BIDoc.ModelElements se
INNER JOIN BIDoc.ModelLinks mngrl ON se.ModelElementId = mngrl.ElementFromId AND mngrl.Type = N'SourceConnection'
INNER JOIN BIDoc.ModelElements mngre ON mngre.ModelElementId = mngrl.ElementToId
INNER JOIN BIDoc.ModelElements pkge ON LEFT(se.RefPath, LEN(pkge.RefPath)) = pkge.RefPath
WHERE se.Type = N'CD.DLS.Model.Mssql.Ssis.DfSourceElement' 
--AND adm.f_SimpleJsonValue(se.ExtendedProperties, N'IsExternalSource') = N'true' 
AND JSON_VALUE(se.ExtendedProperties, '$.IsExternalSource') = N'true' 
AND se.ProjectConfigId = @projectconfigid
AND pkge.Type = N'CD.DLS.Model.Mssql.Ssis.PackageElement' AND pkge.ProjectConfigId = @projectconfigid

)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1833" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_ListExternalDfSources]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_ListExternalDfSources].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Inspect].[f_ListModelReports]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_ListModelReports].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_ListModelReports].[CTE1].[folders].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_ListModelReports].[CTE1].[folders].[ItemPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[ItemPath]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[RefPath]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPath]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_ListModelReports].[CTE1].[srvs]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[CTE1].[srvs].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[f_ListModelReports].[CTE1].[folders]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[CTE1].[folders].[ItemPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[f_ListModelReports].[CTE1].[folders].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(

WITH srvs AS
(
SELECT ModelElementId FROM BIDoc.ModelElements e WHERE e.Type = N'CD.DLS.Model.Mssql.Ssrs.ServerElement'
AND e.ProjectConfigId = @projectconfigid
)
,folders AS
(
SELECT f.Caption ItemPath, f.ModelElementId FROM srvs
INNER JOIN BIDoc.ModelLinks l ON l.Type = 'parent' AND l.ElementToId = srvs.ModelElementId
INNER JOIN BIDoc.ModelElements f ON f.ModelElementId = l.ElementFromId
WHERE f.Type = N'CD.DLS.Model.Mssql.Ssrs.FolderElement'

UNION ALL

SELECT IIF(folders.ItemPath = N'/', folders.ItemPath, folders.ItemPath + N'/') + subf.Caption, subf.ModelElementId 
FROM folders
INNER JOIN BIDoc.ModelLinks l ON l.ElementToId = folders.ModelElementId AND l.Type = 'parent'
INNER JOIN BIDoc.ModelElements subf ON subf.ModelElementId = l.ElementFromId
WHERE subf.Type = N'CD.DLS.Model.Mssql.Ssrs.FolderElement'
)
SELECT IIF(folders.ItemPath = N'/', folders.ItemPath, folders.ItemPath + N'/') + re.Caption ItemPath, re.Caption, re.ModelElementId, re.RefPath 
FROM folders
INNER JOIN BIDoc.ModelLinks l ON l.ElementToId = folders.ModelElementId AND l.Type = 'parent'
INNER JOIN BIDoc.ModelElements re ON re.ModelElementId = l.ElementFromId
WHERE re.Type = N'CD.DLS.Model.Mssql.Ssrs.ReportElement'

)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1352" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Inspect].[f_ListModelReports]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[f_ListModelReports].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Inspect].[FK_Inspect_HighLevelSolutionTrees_ProjectConfigId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="182" />
		</Element>
		<Element Type="SqlTable" Name="[Inspect].[HighLevelSolutionTrees]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[HighLevelSolutionTreeId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[ModelElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[Caption]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[Type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[TypeDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[MaxParentLevel]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[ParentElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Inspect].[HighLevelSolutionTrees].[RefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="183" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="182" />
		</Element>
		<Element Type="SqlIndex" Name="[Inspect].[HighLevelSolutionTrees].[IX_HighLevelSolutionTrees_ProjectConfigId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Inspect].[PK_Inspect_HighLevelSolutionTrees]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Inspect].[HighLevelSolutionTrees].[HighLevelSolutionTreeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="183" />
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_ElementUsage]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  IF OBJECT_ID('tempdb.dbo.#resList', 'U') IS NOT NULL
  DROP TABLE #resList; 

  DECLARE @currentLevel INT = 1
  CREATE TABLE #resList 
  (
  Id INT,
  Level INT,
  Name NVARCHAR(1000),
  PrevLevelName NVARCHAR(1000)
  )

  INSERT INTO #resList (Id, Level, Name, PrevLevelName)
  SELECT e.Id, 0 [Level], CONVERT(NVARCHAR(1000), e.Caption + ' (' +  e.RefPath + ')') Name, '' PrevLevelName 
  FROM BIDocModelElements e WHERE e.Id = @elementId

  WHILE @currentLevel <= @maxLevels
  BEGIN
	INSERT INTO #resList (Id, Level, Name, PrevLevelName)
	SELECT e.Id, l.Level + 1 Level, lnk.Type + ' -> ' + e.Caption + ' (' + e.RefPath + ')' Name, l.Name
	FROM BIDocModelLinks lnk
	INNER JOIN #resList l ON l.Id = lnk.ElementFromId
	INNER JOIN BIDocModelElements e ON e.Id = lnk.ElementToId
	LEFT JOIN #resList cycle ON cycle.Id = e.Id
	WHERE cycle.Id IS NULL AND lnk.Type != 'parent'
	
	INSERT INTO #resList (Id, Level, Name, PrevLevelName)
	SELECT e.Id, l.Level + 1 Level, lnk.Type + ' <- ' + e.Caption + ' (' + e.RefPath + ')' Name, l.Name
	FROM BIDocModelLinks lnk
	INNER JOIN #resList l ON l.Id = lnk.ElementToId
	INNER JOIN BIDocModelElements e ON e.Id = lnk.ElementFromId
	LEFT JOIN #resList cycle ON cycle.Id = e.Id
	WHERE cycle.Id IS NULL
	
	SET @currentLevel = @currentLevel + 1
  END

  SELECT Id, Level, PrevLevelName, Name FROM #resList]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Level]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[PrevLevelName]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[@elementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[@maxLevels]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Level]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_ElementUsage].[#resList].[Name]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_ElementUsage].[#resList]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_ElementUsage].[#resList].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_ElementUsage].[#resList].[Level]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_ElementUsage].[#resList].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1000" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_ElementUsage].[#resList].[PrevLevelName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1000" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_ElementUsage].[@elementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_ElementUsage].[@maxLevels]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[5]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1465" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_ElementUsage]&#xD;&#xA;  @elementId INT,&#xD;&#xA;  @maxLevels INT = 5&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_FillHighLevelSolutionTree]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE FROM Inspect.HighLevelSolutionTrees WHERE ProjectConfigId = @projectConfigId

;
WITH elemTree AS(
	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, 0 ParentLevel
	FROM BIDoc.ModelElements e 
	WHERE e.ProjectConfigId = @projectConfigId AND e.Type IN (
	N'CD.DLS.Model.Mssql.Ssrs.ReportElement',
	N'CD.DLS.Model.Mssql.Ssis.PackageElement',
	N'CD.DLS.Model.Mssql.Ssas.CubeElement',
	N'CD.DLS.Model.Mssql.Pbi.ReportElement',
	N'CD.DLS.Model.Mssql.Ssas.DimensionElement',
	N'CD.DLS.Model.Mssql.Ssas.MdxScriptElement',
	N'CD.DLS.Model.Mssql.Db.ViewElement',
	N'CD.DLS.Model.Mssql.Db.SchemaTableElement',
	N'CD.DLS.Model.Mssql.Ssas.MeasureGroupElement',
	N'CD.DLS.Model.Mssql.Db.ProcedureElement',
	N'CD.DLS.Model.Mssql.Tabular.SsasTabularTableElement'
	)

	UNION ALL

	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, ParentLevel + 1
	FROM elemTree t
	INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = t.ModelElementId AND l.Type = N'parent'
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
)
,x AS(

SELECT ModelElementId, Caption, elemTree.[Type], td.TypeDescription, MAX(ParentLevel) MaxParentLevel, RefPath
FROM elemTree
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON [Type] = td.ElementType
GROUP BY ModelElementId, Caption, elemTree.[Type], td.TypeDescription, RefPath
)

INSERT INTO Inspect.HighLevelSolutionTrees
(ProjectConfigId, ModelElementId, Caption, [Type], TypeDescription, MaxParentLevel, ParentElementId, RefPath)

SELECT @projectConfigId, ModelElementId, Caption, x.[Type], TypeDescription, MaxParentLevel, l.ElementToId ParentElementId, RefPath
FROM x
LEFT JOIN BIDoc.ModelLinks l ON l.ElementFromId = ModelElementId AND l.Type = N'parent']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FillHighLevelSolutionTree].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[ParentLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[MaxParentLevel]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[ParentElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[HighLevelSolutionTrees].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[elemTree].[ParentLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[TypeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[MaxParentLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_FillHighLevelSolutionTree].[CTE1].[x].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FillHighLevelSolutionTree].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1838" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_FillHighLevelSolutionTree]&#xD;&#xA;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_FindElement]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  SELECT TOP 100 e.Id, e.Caption, e.RefPath FROM BIDocModelElements e
  WHERE e.RefPath LIKE @under + '%'
  ORDER BY DIFFERENCE(e.Caption, @search) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_FindElement].[@under]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FindElement].[@search]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindElement].[@search]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindElement].[@under]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="258" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_FindElement]&#xD;&#xA;&#x9;@search NVARCHAR(1000),&#xD;&#xA;&#x9;@under NVARCHAR(1000) = ''&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_FindGraphNode]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  SELECT TOP 100 n.BasicGraphInfoNodeId, n.Name, n.RefPath FROM BasicGraphInfoNodes n
  WHERE n.RefPath LIKE @under + '%'
  AND n.ProjectConfigId = ISNULL(@projectId, n.ProjectConfigId)
  AND GraphKind = 0
  ORDER BY DIFFERENCE(n.Name, @search) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_FindGraphNode].[@under]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_FindGraphNode].[@projectId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_FindGraphNode].[@search]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindGraphNode].[@search]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindGraphNode].[@under]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindGraphNode].[@projectId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="397" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_FindGraphNode]&#xD;&#xA;&#x9;@search NVARCHAR(1000),&#xD;&#xA;&#x9;@under NVARCHAR(1000) = '',&#xD;&#xA;&#x9;@projectId UNIQUEIDENTIFIER = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_FindOlapField]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

	DECLARE @CubePathEscaped NVARCHAR(MAX) 
	IF LEFT(@fieldName, LEN(N'[Measures]')) = N'[Measures]'
	BEGIN
		DECLARE @FieldNameTrimmed NVARCHAR(MAX) = SUBSTRING(@FieldName, LEN('[Measures].[') + 1, 1000)
		SET @FieldNameTrimmed = REPLACE(LEFT(@FieldNameTrimmed, LEN(@FieldNameTrimmed) - 1), '_', '\_')

		SELECT e.RefPath, e.ProjectConfigId, e.ModelElementId 
		FROM BIDoc.ModelElements e 
		WHERE 
		LEFT(e.RefPath, LEN(@cubePath)) = @cubePath 
		AND e.Type 
		IN (N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement', N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement') 
		AND e.Caption = @FieldNameTrimmed

	END
	ELSE
	BEGIN
		DECLARE @dimName NVARCHAR(MAX) = (SELECT item FROM adm.f_SplitString(@fieldName, N'.') x WHERE rwn = 1)
		DECLARE @hierName NVARCHAR(MAX) = (SELECT item FROM adm.f_SplitString(@fieldName, N'.') x WHERE rwn = 2)
		DECLARE @levelName NVARCHAR(MAX) = (SELECT item FROM adm.f_SplitString(@fieldName, N'.') x WHERE rwn = 3)
	
	
		 IF LEFT(@dimName, 1) = N'['
			SET @dimName = RIGHT(LEFT(@dimName, LEN(@dimName)-1), LEN(@dimName)-2)
		IF LEFT(@hierName, 1) = N'['
			SET @hierName = RIGHT(LEFT(@hierName, LEN(@hierName)-1), LEN(@hierName)-2)
		IF LEFT(@levelName, 1) = N'['
			SET @levelName = RIGHT(LEFT(@levelName, LEN(@levelName)-1), LEN(@levelName)-2)

		--DECLARE @dimPath NVARCHAR(MAX) =@cubePath + N'/CubeDimension[@Name=''' + @dimName + N''']'
		--SELECT @dimPath

		IF @hierName = @levelName
		BEGIN
		SELECT hle.RefPath, hle.ProjectConfigId, hle.ModelElementId 
		FROM BIDoc.ModelElements e 
		INNER JOIN BIDoc.ModelLinks hll ON hll.ElementToId = e.ModelElementId AND hll.Type = N'parent'
		INNER JOIN BIDoc.ModelElements hle ON hle.ModelElementId = hll.ElementFromId

		WHERE 
		LEFT(e.RefPath, LEN(@cubePath)) = @cubePath 
		AND e.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionElement') 
		AND e.Caption = @dimName
		AND hle.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement') 
		AND hle.Caption = @hierName
		END

		ELSE
		BEGIN
		
		SELECT dae.RefPath, dae.ProjectConfigId, dae.ModelElementId
		FROM BIDoc.ModelElements cde 		
		-- database dimension
		INNER JOIN BIDoc.ModelLinks ddl ON ddl.ElementFromId = cde.ModelElementId AND ddl.Type = N'DatabaseDimension'
		-- children (attributes and hierarchies)
		INNER JOIN BIDoc.ModelLinks hl ON hl.ElementToId = ddl.ElementToId AND hl.Type = N'parent'
		INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementFromId
		-- children (hierarchy levels)
		INNER JOIN BIDoc.ModelLinks hll ON hll.ElementToId = he.ModelElementId AND hll.Type = N'parent'
		INNER JOIN BIDoc.ModelElements hle ON hle.ModelElementId = hll.ElementFromId
		-- link to dimension attribute
		INNER JOIN BIDoc.ModelLinks dal ON dal.ElementFromId = hle.ModelElementId AND dal.Type = N'Attribute'
		INNER JOIN BIDoc.ModelElements dae ON dae.ModelElementId = dal.ElementToId
				
		WHERE 	
			LEFT(cde.RefPath, LEN(@cubePath)) = @cubePath 		
			AND cde.Type = N'CD.DLS.Model.Mssql.Ssas.CubeDimensionElement' 
			AND cde.Caption = @dimName
			AND he.Type = N'CD.DLS.Model.Mssql.Ssas.HierarchyElement'
			AND he.Caption = @hierName
			AND hle.Type = N'CD.DLS.Model.Mssql.Ssas.HierarchyLevelElement'
			AND hle.Caption = @levelName
			AND dae.Type = N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement'		
		END		
	END

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FindOlapField].[@fieldName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[item]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[rwn]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_FindOlapField].[@cubePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindOlapField].[@cubePath]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_FindOlapField].[@fieldName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3492" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE Inspect.sp_FindOlapField&#xD;&#xA;    @cubePath NVARCHAR(MAX), &#xD;&#xA;&#x9;@fieldName NVARCHAR(MAX)&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetCloseAnnotatedSources]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @nodeId INT = (SELECT BasicGraphNodeId FROM BIDoc.BasicGraphNodes WHERE SourceElementId = @modelElementId AND GraphKind = N'DataFlow')

DECLARE @currentNodes TABLE(NodeId INT, ModelElementId INT)
DECLARE @nextNodes TABLE(NodeId INT, ModelElementId INT)

/*
;WITH descendants AS
(
SELECT @nodeId NodeId, @modelElementId ModelElementId

UNION ALL

SELECT n.BasicGraphNodeId NodeId, n.SourceElementId ModelElementId 
FROM BIDoc.BasicGraphNodes n
INNER JOIN descendants d ON d.NodeId = n.ParentId
)
*/
INSERT INTO @currentNodes(NodeId, ModelElementId)
--SELECT NodeId, ModelElementId FROM descendants
--OPTION (MAXRECURSION 1000)
VALUES(@nodeId, @modelElementId)

DECLARE @stepsLeft INT = 7
DECLARE @currentNodesCount INT = 1

WHILE @stepsLeft > 0 AND @currentNodesCount > 0
BEGIN
	DELETE FROM @nextNodes
	INSERT INTO @nextNodes (NodeId, ModelElementId)
		SELECT DISTINCT n.BasicGraphNodeId, n.SourceElementId
		FROM @currentNodes c
		INNER JOIN BIDoc.BasicGraphLinks l ON l.LinkType = N'DataFlow' AND l.NodeToId = c.NodeId
		INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = l.NodeFromId

	DELETE FROM @currentNodes
	INSERT INTO @currentNodes(NodeId, ModelElementId)
		SELECT NodeId, ModelElementId FROM @nextNodes

	--SELECT * FROM @currentNodes

	-- annotations found at this level
	IF EXISTS(
		SELECT TOP 1 1 FROM @currentNodes c
		INNER JOIN Annotate.AnnotationElements ae ON ae.ModelElementId = c.ModelElementId
		INNER JOIN Annotate.FieldValues fv ON fv.AnnotationElementId = ae.AnnotationElementId
		WHERE ae.IsCurrentVersion = 1 AND fv.[Value] <> N''
	)
	BEGIN
		SELECT e.ModelElementId, e.Caption ModelElementName, td.TypeDescription, f.FieldName, fv.[Value] FieldValue 
		FROM @currentNodes c
		INNER JOIN BIDoc.ModelElements e ON c.ModelElementId = e.ModelElementId
		INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
		INNER JOIN Annotate.AnnotationElements ae ON ae.ModelElementId = e.ModelElementId
		INNER JOIN Annotate.FieldValues fv ON fv.AnnotationElementId = ae.AnnotationElementId
		INNER JOIN Annotate.Fields f ON f.FieldId = fv.FieldId
		WHERE ae.IsCurrentVersion = 1
		
		RETURN
	END

	SET @stepsLeft = @stepsLeft - 1
END

SELECT TOP 0 0 [0]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@modelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@nextNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@nextNodes].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[NodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[FieldId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[Fields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[NodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@currentNodes].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@nextNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@nextNodes].[NodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@nextNodes].[ModelElementId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetCloseAnnotatedSources].[@modelElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2354" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetCloseAnnotatedSources]&#xD;&#xA;&#x9;@modelElementId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowBetweenGroups]">
			<Property Name="BodyScript">
				<Value><![CDATA[


IF OBJECT_ID('tempdb.dbo.#sourceNodes') IS NOT NULL
DROP TABLE #sourceNodes
IF OBJECT_ID('tempdb.dbo.#targetNodes') IS NOT NULL
DROP TABLE #targetNodes
IF OBJECT_ID('tempdb.dbo.#sourceDescendants') IS NOT NULL
DROP TABLE #sourceDescendants
IF OBJECT_ID('tempdb.dbo.#targetDescendants') IS NOT NULL
DROP TABLE #targetDescendants
--IF OBJECT_ID('tempdb.dbo.#nodes') IS NOT NULL
--DROP TABLE #nodes

--SELECT n.BasicGraphNodeId, e.RefPath, n.Name, n.SourceElementId, NodeType
--INTO #nodes
--FROM BIDoc.BasicGraphNodes n 
--INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
--WHERE 
--GraphKind = N'DataFlow'  --'DataFlowTransitive' 
--AND e.ProjectConfigId = @projectConfigId

DECLARE @id NVARCHAR(100)
SET @id = REPLACE(CAST(@projectConfigId AS NVARCHAR(100)),'-','')


DECLARE @sourceNodeId INT = (SELECT BasicGraphNodeId FROM [BIDoc].[f_GetGraphNodeIdByRefPath](@projectConfigId, N'DataFlow', @sourcePrefix))
DECLARE @targetNodeId INT = (SELECT BasicGraphNodeId FROM [BIDoc].[f_GetGraphNodeIdByRefPath](@projectConfigId, N'DataFlow', @targetPrefix))
DECLARE 
	@sourceIntervalFrom INT,
	@sourceIntervalTo INT,
	@targetIntervalFrom INT,
	@targetIntervalTo INT

SELECT @sourceIntervalFrom = n.RefPathIntervalStart, @sourceIntervalTo = n.RefPathIntervalEnd FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = @sourceNodeId
SELECT @targetIntervalFrom = n.RefPathIntervalStart, @targetIntervalTo = n.RefPathIntervalEnd FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = @targetNodeId


SELECT n.BasicGraphNodeId, n.SourceElementId
INTO #sourceNodes
FROM BIDoc.BasicGraphNodes n
WHERE n.ProjectConfigId = @projectConfigId AND n.GraphKind = N'DataFlow' AND n.NodeType = @sourceType 
	AND n.ProjectConfigId = @projectConfigId 
	AND n.RefPathIntervalStart BETWEEN @sourceIntervalFrom AND @sourceIntervalTo

SELECT n.BasicGraphNodeId, n.SourceElementId
INTO #targetNodes
FROM BIDoc.BasicGraphNodes n
WHERE n.ProjectConfigId = @projectConfigId AND n.GraphKind = N'DataFlow' AND n.NodeType = @targetType
	AND n.ProjectConfigId = @projectConfigId 
	AND n.RefPathIntervalStart BETWEEN @targetIntervalFrom AND @targetIntervalTo

SELECT n.BasicGraphNodeId, snn.BasicGraphNodeId OriginalNodeId, n.SourceElementId
INTO #sourceDescendants
FROM 
#sourceNodes sn
INNER JOIN BIDoc.BasicGraphNodes snn ON snn.BasicGraphNodeId = sn.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes n ON n.RefPathIntervalStart BETWEEN snn.RefPathIntervalStart AND snn.RefPathIntervalEnd
WHERE n.ProjectConfigId = @projectConfigId AND n.GraphKind = N'DataFlow'
	AND n.ProjectConfigId = @projectConfigId 
	AND n.RefPathIntervalStart BETWEEN @sourceIntervalFrom AND @sourceIntervalTo

SELECT n.BasicGraphNodeId, snn.BasicGraphNodeId OriginalNodeId, n.SourceElementId
INTO #targetDescendants
FROM 
#targetNodes sn
INNER JOIN BIDoc.BasicGraphNodes snn ON snn.BasicGraphNodeId = sn.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes n ON n.RefPathIntervalStart BETWEEN snn.RefPathIntervalStart AND snn.RefPathIntervalEnd
WHERE n.ProjectConfigId = @projectConfigId AND n.GraphKind = N'DataFlow'
	AND n.ProjectConfigId = @projectConfigId 
	AND n.RefPathIntervalStart BETWEEN @targetIntervalFrom AND @targetIntervalTo

	--SELECT * FROM #sourceNodes
	--SELECT * FROM #targetNodes
	--SELECT * FROM #sourceDescendants
	--SELECT * FROM #targetDescendants




-- create new sequences from those that end in the front nodes (and such sequence does not exist already)
DECLARE @sql NVARCHAR(MAX)
SET @sql = 
N'
SELECT 
DISTINCT s.BasicGraphNodeId SourceNodeId, se.Caption SourceNodeName, /*dps.DescriptivePath*/ se.RefPath SourceNodePath, s.SourceElementId SourceElementId,
dps.DescriptivePath SourceDescriptivePath,
t.BasicGraphNodeId TargetNodeId, te.Caption TargetNodeName, /*dpt.DescriptivePath*/ te.RefPath TargetNodePath, t.SourceElementId TargetElementId,
dpt.DescriptivePath TargetDescriptivePath
FROM [' + @id + N'].DataFlowSequences sq
INNER JOIN #sourceDescendants sd ON sd.BasicGraphNodeId = sq.SourceNode
INNER JOIN #targetDescendants td ON td.BasicGraphNodeId = sq.TargetNode
INNER JOIN #sourceNodes s ON s.BasicGraphNodeId = sd.OriginalNodeId
INNER JOIN #targetNodes t ON t.BasicGraphNodeId = td.OriginalNodeId
INNER JOIN BIDoc.ModelElementDescriptivePaths dps ON dps.ModelElementId = s.SourceElementId
INNER JOIN BIDoc.ModelElementDescriptivePaths dpt ON dpt.ModelElementId = t.SourceElementId
INNER JOIN BIDoc.ModelElements se ON se.ModelElementId = s.SourceElementId
INNER JOIN BIDoc.ModelElements te ON te.ModelElementId = t.SourceElementId
WHERE sq.ProjectConfigid = @projectConfigId AND sq.DetailLevel = 1
'
EXEC sp_executesql  @sql, N'@projectconfigid UNIQUEIDENTIFIER', @projectconfigid = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@sourcePrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetGraphNodeIdByRefPath].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@targetPrefix]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceNodes]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetNodes]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceDescendants]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetDescendants]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@sourceType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@targetType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceNodes].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetNodes].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#sourceDescendants].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[#targetDescendants].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@sourcePrefix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@targetPrefix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@sourceType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroups].[@targetType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5020" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowBetweenGroups]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@sourcePrefix NVARCHAR(MAX),&#xD;&#xA;&#x9;@targetPrefix NVARCHAR(MAX),&#xD;&#xA;&#x9;@sourceType NVARCHAR(200),&#xD;&#xA;&#x9;@targetType NVARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--DECLARE @sourcePrefix NVARCHAR(MAX) = N'IntegrationServices[@Name=''FSCZPRCT0041'']/Catalog[@Name=''SSISDB'']/CatalogFolder[@Name=''NRWH_SSIS'']/ProjectInfo[@Name=''NRWH_SSIS'']'
--DECLARE @targetPrefix NVARCHAR(MAX) = N'Server[@Name=''FSCZPRCT0041'']/Database[@Name=''NRWH_L2'']'
--DECLARE @sourceType NVARCHAR(200) = N'PackageElement'
--DECLARE @targetType NVARCHAR(200) = N'SchemaTableElement'

/*
DECLARE
	@projectConfigId UNIQUEIDENTIFIER = N'18258D08-66CC-4B97-A695-226C7BA64AFE',
	@sourcePrefix NVARCHAR(MAX) = N'Server[@Name=''FSCZPRCT0041'']/Database[@Name=''NDWH_L1'']',
	@targetPrefix NVARCHAR(MAX) = N'Server[@Name=''FSCZPRCT0041'']/Database[@Name=''NRWH_L2'']',
	@sourceType NVARCHAR(200) = N'ColumnElement',
	@targetType NVARCHAR(200) = N'ColumnElement',
	@stepCount INT = 10
*/

IF OBJECT_ID('tempdb.dbo.#sourceNodes') IS NOT NULL
DROP TABLE #sourceNodes
IF OBJECT_ID('tempdb.dbo.#targetNodes') IS NOT NULL
DROP TABLE #targetNodes
IF OBJECT_ID('tempdb.dbo.#sourceDescendants') IS NOT NULL
DROP TABLE #sourceDescendants
IF OBJECT_ID('tempdb.dbo.#targetDescendants') IS NOT NULL
DROP TABLE #targetDescendants
IF OBJECT_ID('tempdb.dbo.#targetReach') IS NOT NULL
DROP TABLE #targetReach


SELECT n.BasicGraphNodeId, e.RefPath, n.Name, n.SourceElementId 
INTO #sourceNodes
FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE GraphKind = 'DataFlowTransitive' 
AND n.ProjectConfigId = @projectConfigId
AND LEFT(e.RefPath, LEN(@sourcePrefix)) = @sourcePrefix 
AND NodeType = @sourceType

SELECT n.BasicGraphNodeId, e.RefPath, n.Name, n.SourceElementId
INTO #targetNodes
FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE GraphKind = 'DataFlowTransitive' 
AND e.ProjectConfigId = @projectConfigId
AND LEFT(e.RefPath, LEN(@targetPrefix)) = @targetPrefix 
AND NodeType = @targetType


;WITH  sourceDescendants AS
(
SELECT BasicGraphNodeId, BasicGraphNodeId OriginalNodeId FROM #sourceNodes
UNION ALL
SELECT n.BasicGraphNodeId, sd.OriginalNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN sourceDescendants sd ON sd.BasicGraphNodeId = n.ParentId
)
SELECT * INTO #sourceDescendants FROM sourceDescendants

;WITH  targetDescendants AS
(
SELECT BasicGraphNodeId,BasicGraphNodeId OriginalNodeId FROM #targetNodes
UNION ALL
SELECT n.BasicGraphNodeId, sd.OriginalNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN targetDescendants sd ON sd.BasicGraphNodeId = n.ParentId
)
SELECT * INTO #targetDescendants FROM targetDescendants

--SELECT * FROM #sourceDescendants
--SELECT * FROM #targetDescendants

;WITH newTargets AS
(
SELECT DISTINCT s.OriginalNodeId, n.BasicGraphNodeId 
FROM #sourceDescendants s
INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = s.BasicGraphNodeId AND l.LinkType = N'DataFlow'
INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = l.NodeToId
UNION ALL
SELECT sd.OriginalNodeId, n.BasicGraphNodeId FROM BIDoc.BasicGraphNodes n
INNER JOIN newTargets sd ON sd.BasicGraphNodeId = n.ParentId
)
SELECT * INTO #targetReach FROM newTargets

DECLARE @remainingSteps INT = @stepCount - 1
	
WHILE @remainingSteps > 0
BEGIN
	;WITH newTargets AS
	(
	SELECT DISTINCT s.OriginalNodeId, n.BasicGraphNodeId 
	FROM #targetReach s
	INNER JOIN BIDoc.BasicGraphLinks l ON l.NodeFromId = s.BasicGraphNodeId AND l.LinkType = N'DataFlow'
	INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = l.NodeToId
	UNION ALL
	SELECT sd.OriginalNodeId, n.BasicGraphNodeId FROM BIDoc.BasicGraphNodes n
	INNER JOIN newTargets sd ON sd.BasicGraphNodeId = n.ParentId
	) 
	INSERT INTO #targetReach(OriginalNodeId, BasicGraphNodeId)
	SELECT nt.OriginalNodeId, nt.BasicGraphNodeId FROM newTargets nt
	LEFT JOIN #targetReach rs ON rs.BasicGraphNodeId = nt.BasicGraphNodeId
	WHERE rs.BasicGraphNodeId IS NULL

	SET @remainingSteps = @remainingSteps - 1
END

--SELECT * FROM #targetReach
/*
SELECT *
FROM #sourceNodes s
INNER JOIN #targetReach tr ON tr.OriginalNodeId = s.BasicGraphNodeId
INNER JOIN BIDoc.BasicGraphNodes tn ON tr.BasicGraphNodeId = tn.BasicGraphNodeId
INNER JOIN BIDoc.ModelElements te ON te.ModelElementId = tn.SourceElementId
WHERE s.Name = N'VREGNO'
ORDER BY s.BasicGraphNodeId

SELECT * FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = 2801264
SELECT * FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = 2801262
SELECT * FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = 2801261
SELECT * FROM BIDoc.BasicGraphNodes n WHERE n.BasicGraphNodeId = 2801181


SELECT * FROM BIDoc.BasicGraphNodes n WHERE n.NodeType = N'DfColumnElement'

--2801261

SELECT * FROM BIDoc.BasicGraphLinks l WHERE l.NodeFromId = 2801261

SELECT * FROM BIDoc.BasicGraphNodes WHERE BasicGraphNodeId = 2674732
SELECT * FROM BIDoc.BasicGraphNodes WHERE BasicGraphNodeId = 2801265

SELECT * FROM BIDoc.BasicGraphNodes WHERE ParentId = 2801265

SELECT * FROM BIDoc.BasicGraphLinks l 
WHERE l.NodeFromId = 2801265

SELECT * FROM BIDoc.BasicGraphLinks l 
WHERE l.NodeFromId = 2674732


SELECT * FROM #targetReach
*/

SELECT 
DISTINCT s.BasicGraphNodeId SourceNodeId, s.Name SourceNodeName, s.RefPath SourceNodePath, s.SourceElementId SourceElementId, 
t.BasicGraphNodeId TargetNodeId, t.Name TargetNodeName, t.RefPath TargetNodePath, t.SourceElementId TargetElementId
FROM #sourceNodes s
INNER JOIN #targetReach tr ON tr.OriginalNodeId = s.BasicGraphNodeId
INNER JOIN #targetDescendants td ON td.BasicGraphNodeId = tr.BasicGraphNodeId
INNER JOIN #targetNodes t ON t.BasicGraphNodeId = td.OriginalNodeId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@stepCount]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@sourcePrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@sourceType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@targetPrefix]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@targetType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE1].[sourceDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE1].[sourceDescendants].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE2].[targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE2].[targetDescendants].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE3].[newTargets].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE3].[newTargets].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE4].[newTargets].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE4].[newTargets].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants].[OriginalNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[SourceElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[SourceElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE1].[sourceDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE1].[sourceDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE1].[sourceDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE2].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE2].[targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE2].[targetDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetDescendants].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE3].[newTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE3].[newTargets].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[OriginalNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE3].[newTargets].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#sourceDescendants].[OriginalNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE4].[newTargets]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE4].[newTargets].[OriginalNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[#targetReach].[OriginalNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[CTE4].[newTargets].[BasicGraphNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@sourcePrefix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@targetPrefix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@sourceType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@targetType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowBetweenGroupsSteps].[@stepCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[10]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5895" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowBetweenGroupsSteps]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@sourcePrefix NVARCHAR(MAX),&#xD;&#xA;&#x9;@targetPrefix NVARCHAR(MAX),&#xD;&#xA;&#x9;@sourceType NVARCHAR(200),&#xD;&#xA;&#x9;@targetType NVARCHAR(200),&#xD;&#xA;&#x9;@stepCount INT = 10&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowLinksAmongNodes]">
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT DISTINCT
	nl.BasicGraphLinkId, 
	nl.NodeFromId, 
	nl.NodeToId 
FROM 
BIDoc.BasicGraphLinks nl
INNER JOIN @nodeIds nf ON nf.Id = nl.NodeFromId
INNER JOIN @nodeIds nt ON nt.Id = nl.NodeToId
WHERE nl.LinkType = N'Dataflow']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds]" Disambiguator="32">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksAmongNodes].[@nodeIds]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="339" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowLinksAmongNodes]&#xD;&#xA;@nodeIds [BIDoc].[UDTT_IdList] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @projectSchema NVARCHAR(50) = REPLACE(N'[' + CONVERT(NVARCHAR(50), @projectConfigId) + N']', N'-', N'')

;WITH  sourceDescendants AS
	(
	SELECT @sourceNodeId SourceNodeId
	UNION ALL
	SELECT n.BasicGraphNodeId FROM BIDoc.BasicGraphNodes n
	INNER JOIN sourceDescendants sd ON sd.SourceNodeId = n.ParentId
	)
SELECT * INTO #sourceDescendants FROM sourceDescendants
OPTION (MAXRECURSION 1000)

;WITH targetDescendants AS
	(
	SELECT @targetNodeId TargetNodeId
	UNION ALL
	SELECT n.BasicGraphNodeId FROM BIDoc.BasicGraphNodes n
	INNER JOIN targetDescendants sd ON sd.TargetNodeId = n.ParentId
	)
SELECT * INTO #targetDescendants FROM targetDescendants
OPTION (MAXRECURSION 1000)

DECLARE @sql NVARCHAR(MAX) =
N'
-- if direct link exists, use it
IF(EXISTS(SELECT TOP 1 1 FROM ' + @projectSchema +  N'.DataFlowSequences s WHERE s.SourceNode = @sourceNodeId AND s.TargetNode = @targetNodeId AND s.DetailLevel = @detailLevel))
BEGIN
	SELECT --DISTINCT 
	stp.Id SequenceStepId, 
	stp.SourceNodeId, 
	stp.TargetNodeId 
	FROM ' + @projectSchema +  N'.DataFlowSequences sq
	INNER JOIN ' + @projectSchema +  N'.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
	INNER JOIN BIDoc.BasicGraphNodes n ON stp.SourceNodeId = n.BasicGraphNodeId

	WHERE sq.DetailLevel = @detailLevel AND sq.SourceNode = @sourceNodeId AND sq.TargetNode = @targetNodeId AND n.ProjectConfigId = sq.ProjectConfigId --AND stp.SourceNodeId <> stp.TargetNodeId
END
-- if direct links to target exists, use those
ELSE IF EXISTS(SELECT TOP 1 1 FROM ' + @projectSchema +  N'.DataFlowSequences s 
INNER JOIN #sourceDescendants sd ON sd.SourceNodeId = s.SourceNode
WHERE s.TargetNode = @targetNodeId AND s.DetailLevel = @detailLevel)
BEGIN
	SELECT --DISTINCT 
	MIN(stp.Id) SequenceStepId, 
	stp.SourceNodeId, 
	stp.TargetNodeId 
	FROM ' + @projectSchema +  N'.DataFlowSequences sq
	INNER JOIN #sourceDescendants sd ON sq.SourceNode = sd.SourceNodeId
	INNER JOIN ' + @projectSchema +  N'.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
	INNER JOIN BIDoc.BasicGraphNodes n ON stp.SourceNodeId = n.BasicGraphNodeId

	WHERE sq.DetailLevel = @detailLevel AND sq.TargetNode = @targetNodeId AND n.ProjectConfigId = sq.ProjectConfigId --AND stp.SourceNodeId <> stp.TargetNodeId
	GROUP BY 
	stp.SourceNodeId, 
	stp.TargetNodeId
END
-- if direct links to source exists, use those
ELSE IF EXISTS(SELECT TOP 1 1 FROM ' + @projectSchema +  N'.DataFlowSequences s 
INNER JOIN #targetDescendants td ON td.TargetNodeId = s.TargetNode
WHERE s.SourceNode = @sourceNodeId AND s.DetailLevel = @detailLevel)
BEGIN
	SELECT --DISTINCT 
	MIN(stp.Id) SequenceStepId, 
	stp.SourceNodeId, 
	stp.TargetNodeId 
	FROM ' + @projectSchema +  N'.DataFlowSequences sq
	INNER JOIN #targetDescendants td ON sq.TargetNode = td.TargetNodeId
	INNER JOIN ' + @projectSchema +  N'.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
	INNER JOIN BIDoc.BasicGraphNodes n ON stp.SourceNodeId = n.BasicGraphNodeId

	WHERE sq.DetailLevel = @detailLevel AND sq.SourceNode = @sourceNodeId AND n.ProjectConfigId = sq.ProjectConfigId --AND stp.SourceNodeId <> stp.TargetNodeId
	GROUP BY 
	stp.SourceNodeId, 
	stp.TargetNodeId
END
ELSE
BEGIN
	SELECT --DISTINCT 
	MIN(stp.Id) SequenceStepId, 
	stp.SourceNodeId, 
	stp.TargetNodeId 
	FROM ' + @projectSchema +  N'.DataFlowSequences sq
	INNER JOIN #sourceDescendants sd ON sq.SourceNode = sd.SourceNodeId
	INNER JOIN #targetDescendants td ON sq.TargetNode = td.TargetNodeId
	INNER JOIN ' + @projectSchema +  N'.DataFlowSequenceSteps stp ON stp.SequenceId = sq.SequenceId
	INNER JOIN BIDoc.BasicGraphNodes n ON stp.SourceNodeId = n.BasicGraphNodeId
	LEFT JOIN #sourceDescendants stepToSource ON stepToSource.SourceNodeId = stp.TargetNodeId
	LEFT JOIN #targetDescendants stepFromTarget ON stepFromTarget.TargetNodeId = stp.SourceNodeId
	
	WHERE sq.DetailLevel = @detailLevel AND sq.ProjectConfigId = n.ProjectConfigId --AND stp.SourceNodeId <> stp.TargetNodeId
	AND stepFromTarget.TargetNodeId IS NULL AND stepToSource.SourceNodeId IS NULL
	GROUP BY 
	stp.SourceNodeId, 
	stp.TargetNodeId
END
'

DECLARE @paramDef NVARCHAR(MAX) = N'@sourceNodeId INT, @targetNodeId INT, @detailLevel INT'
EXEC sp_executesql @sql, @paramDef, @sourceNodeId = @sourceNodeId, @targetNodeId = @targetNodeId, @detailLevel = @detailLevel


DROP TABLE #sourceDescendants
DROP TABLE #targetDescendants]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@sourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE1].[sourceDescendants].[SourceNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@targetNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE2].[targetDescendants].[TargetNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@detailLevel]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#sourceDescendants]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#targetDescendants]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE1].[sourceDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE1].[sourceDescendants].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@sourceNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#sourceDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#sourceDescendants].[SourceNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@sourceNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE2].[targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[CTE2].[targetDescendants].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@targetNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#targetDescendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[#targetDescendants].[TargetNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@targetNodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@sourceNodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@targetNodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@detailLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksBetweenNodes].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4624" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowLinksBetweenNodes]&#xD;&#xA;&#x9;@sourceNodeId INT,&#xD;&#xA;&#x9;@targetNodeId INT,&#xD;&#xA;&#x9;@detailLevel INT,&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowLinksFromNode]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT 
	l.BasicGraphLinkId, 
	l.NodeFromId, 
	l.NodeToId 
	FROM BIDoc.BasicGraphLinks l
	INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = l.NodeFromId
	WHERE l.LinkType = N'DataFlow' AND n.BasicGraphNodeId = @sourceNodeId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksFromNode].[@sourceNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksFromNode].[@sourceNodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="321" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowLinksFromNode]&#xD;&#xA;&#x9;@sourceNodeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetDataFlowLinksToNode]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT 
	l.BasicGraphLinkId, 
	l.NodeFromId, 
	l.NodeToId 
	FROM BIDoc.BasicGraphLinks l
	INNER JOIN BIDoc.BasicGraphNodes n ON n.BasicGraphNodeId = l.NodeToId
	WHERE l.LinkType = N'DataFlow' AND n.BasicGraphNodeId = @targetNodeId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[LinkType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetDataFlowLinksToNode].[@targetNodeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetDataFlowLinksToNode].[@targetNodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="317" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetDataFlowLinksToNode]&#xD;&#xA;&#x9;@targetNodeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions]">
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT TOP 100 
	   n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,n.Description [Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,DIFFERENCE(@pattern, n.Name)
	  ,DIFFERENCE(@pattern, n.Description)
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
WHERE GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid 
AND (DIFFERENCE(@pattern, n.Name) >= 3 OR DIFFERENCE(@pattern, n.Description) >= 3)
ORDER BY DIFFERENCE(@pattern, n.Name) * DIFFERENCE(@pattern, n.Description) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@pattern]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Description]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetExtendedGraphExplorerSuggestions].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="846" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetExtendedGraphExplorerSuggestions]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@pattern NVARCHAR(200)&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetGraphExplorerSuggestions]">
			<Property Name="BodyScript">
				<Value><![CDATA[WITH priorities AS
  (
  SELECT NodeType, Priority
  FROM 
  (
  VALUES
  ('SchemaTableElement', 1),
  ('ReportElement', 2),
  ('PhysicalMeasureElement', 3),
  ('CubeCalculatedMeasureElement', 4),
  ('ReportCalculatedMeasureElement', 5),
  ('PackageElement', 6),
  ('ProcedureElement', 7),
  ('MeasureGroupElement', 8),
  ('CubeElement', 9),
  ('CubeDimensionElement', 10),
  ('DimensionElement', 11),
  ('DatabaseElement', 12),
  ('ServerElement', 13)) AS x(NodeType, Priority)
  )
SELECT n.[BasicGraphNodeId]
      ,n.[Name]
      ,n.[NodeType]
      ,NULL [Description]
      ,n.[ParentId]
      ,n.[GraphKind]
      ,n.[ProjectConfigId]
      ,n.[SourceElementId]
      ,n.[TopologicalOrder]
	  ,e.[RefPath]
	  ,td.TypeDescription
FROM BIDoc.BasicGraphNodes n
INNER JOIN BIDoc.ModelElements e ON n.SourceElementId = e.ModelElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.Type
INNER JOIN priorities p ON p.NodeType = n.NodeType
WHERE GraphKind = @graphkind AND n.ProjectConfigId = @projectconfigid 
AND (@pattern IS NULL OR n.Name LIKE '%' + Adm.f_EscapeForLike(@pattern) + '%')
ORDER BY p.Priority]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@graphkind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@pattern]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_EscapeForLike]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[CTE1].[priorities]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[CTE1].[priorities].[NodeType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[CTE1].[priorities].[Priority]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@graphkind]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetGraphExplorerSuggestions].[@pattern]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1341" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetGraphExplorerSuggestions]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@graphkind NVARCHAR(50),&#xD;&#xA;&#x9;@pattern NVARCHAR(200) = NULL&#xD;&#xA;)&#xD;&#xA;AS&#xD;&#xA;&#xD;&#xA;;" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetModelElementsUnderPathDisplay]">
			<Property Name="BodyScript">
				<Value><![CDATA[
/*
)
RETURNS TABLE AS RETURN
(
*/

DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @path))
DECLARE 
	@intervalFrom INT,
	@intervalTo INT

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

SELECT e.[ModelElementId]
      ,[RefPath]
      ,[Caption]
      ,[Type]
	  ,td.TypeDescription
	  ,dp.DescriptivePath
  FROM [BIDoc].[ModelElements] e
  INNER JOIN BIDoc.ModelElementTypeDescriptions td ON e.Type = td.ElementType
  INNER JOIN BIDoc.ModelElementDescriptivePaths dp ON e.ModelElementId = dp.ModelElementId
  WHERE
  e.ProjectConfigId = @projectconfigid
  AND e.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo
  --e.RefPathPrefix >= LEFT(@path, 300) AND e.RefPathPrefix <= LEFT(@path, 300) + N'~' AND 
  --e.RefPath >= @path AND RefPath <= @path + N'~' -- LEFT(RefPath, LEN(@path)) = @path --RefPath LIKE Adm.f_EscapeForLike(@path) + '%' ESCAPE '\' AND ProjectConfigId = @projectconfigid
  AND e.[Type] = ISNULL(@type, [Type])
--)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@path]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@path]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetModelElementsUnderPathDisplay].[@type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1297" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetModelElementsUnderPathDisplay]&#xD;&#xA;--(&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@path NVARCHAR(MAX),&#xD;&#xA;&#x9;@type NVARCHAR(200) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetSolutionMidSubtree]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @pathPrefix NVARCHAR(MAX) = (SELECT [Adm].[f_EscapeForLike]((SELECT RefPath FROM bidoc.ModelElements e WHERE e.ModelElementId = @rootElementId))) + N'%'

--SELECT @pathPrefix

;

WITH elemTree AS(
	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, 0 ParentLevel
	FROM BIDoc.ModelElements e 
	WHERE e.ProjectConfigId = @projectConfigId AND e.Type IN (
	N'CD.DLS.Model.Mssql.Ssrs.ReportElement',
	N'CD.DLS.Model.Mssql.Ssis.PackageElement',
	N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement',
	N'CD.DLS.Model.Mssql.Ssas.ReportCalculatedMeasureElement',
	N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement',
	N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement',
	N'CD.DLS.Model.Mssql.Ssas.CubeDimensionElement',
	N'CD.DLS.Model.Mssql.Db.ColumnElement'
	) AND e.RefPath LIKE @pathPrefix ESCAPE N'\'

	UNION ALL

	SELECT e.ModelElementId, e.Caption, e.Type, e.RefPath, ParentLevel + 1
	FROM elemTree t
	INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = t.ModelElementId AND l.Type = N'parent'
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = l.ElementToId
	WHERE e.RefPath LIKE @pathPrefix ESCAPE N'\'
)
,x AS(

SELECT ModelElementId, Caption, elemTree.[Type], td.TypeDescription, MAX(ParentLevel) MaxParentLevel, RefPath
FROM elemTree
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON [Type] = td.ElementType
GROUP BY ModelElementId, Caption, elemTree.[Type], td.TypeDescription, RefPath
)
SELECT ModelElementId, Caption, x.[Type], TypeDescription, MaxParentLevel, l.ElementToId ParentElementId, RefPath
FROM x
LEFT JOIN BIDoc.ModelLinks l ON l.ElementFromId = ModelElementId AND l.Type = N'parent']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetSolutionMidSubtree].[@rootElementId]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_EscapeForLike]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetSolutionMidSubtree].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[ParentLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[elemTree].[ParentLevel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[Caption]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Caption]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[Type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[TypeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[MaxParentLevel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetSolutionMidSubtree].[CTE1].[x].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetSolutionMidSubtree].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetSolutionMidSubtree].[@rootElementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1777" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetSolutionMidSubtree]&#xD;&#xA;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;@rootElementId INT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GetVisualNodeAncestor]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @nodeType NVARCHAR(200)
DECLARE @parentId INT
DECLARE @refPath NVARCHAR(MAX)
SELECT @nodeType = NodeType, @parentId = ParentId, @refPath = e.RefPath 
FROM BIDoc.BasicGraphNodes n 
INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
WHERE n.BasicGraphNodeId = @nodeId

IF(@nodeType IN (N'ColumnElement', N'MdxFragmentElement', 
	N'SsisExpressionFragmentElement'/*, N'SsrsExpressionFragmentElement'*/))
BEGIN
	SELECT @parentId
END
ELSE IF @nodeType IN(N'CubeCalculatedMeasureElement', N'ReportCalculatedMeasureElement', N'PackageElement', N'SchemaTableElement', N'ProcedureElement', N'ViewElement', N'ReportElement')
BEGIN
	SELECT @nodeId
END
ELSE IF @nodeType IN (N'SqlScriptElement', N'SqlDmlSourceElement', N'SqlDmlTargetReferenceElement')
BEGIN
	;WITH ancestors AS
	(
	SELECT @nodeId NodeId, @parentId ParentId, @refPath RefPath
	UNION ALL
	SELECT n.BasicGraphNodeId NodeId, n.ParentId, e.RefPath
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN ancestors a ON n.BasicGraphNodeId = a.ParentId
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
	WHERE n.NodeType IN (N'SqlScriptElement', N'SqlDmlSourceElement', N'SqlDmlTargetReferenceElement')
	)
	SELECT TOP 1 NodeId 
	FROM ancestors
	ORDER BY RefPath
END
ELSE IF @nodeType IN (N'DfColumnElement')
BEGIN
	;WITH ancestors AS
	(
	SELECT @nodeId NodeId, @parentId ParentId, @refPath RefPath, @nodeType NodeType
	UNION ALL
	SELECT n.BasicGraphNodeId NodeId, n.ParentId, e.RefPath, n.NodeType
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN ancestors a ON n.BasicGraphNodeId = a.ParentId
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
	)
	SELECT NodeId 
	FROM ancestors
	WHERE ancestors.NodeType = N'PackageElement'
END
ELSE IF @nodeType IN (N'SsrsExpressionFragmentElement', N'TextBoxElement')
BEGIN
	;WITH ancestors AS
	(
	SELECT @nodeId NodeId, @parentId ParentId, @refPath RefPath, @nodeType NodeType
	UNION ALL
	SELECT n.BasicGraphNodeId NodeId, n.ParentId, e.RefPath, n.NodeType
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN ancestors a ON n.BasicGraphNodeId = a.ParentId
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
	)
	SELECT NodeId 
	FROM ancestors
	WHERE ancestors.NodeType = N'ReportElement'
END
ELSE IF @refPath LIKE N'%]/DaxScript%'
BEGIN
	;WITH ancestors AS
	(
	SELECT @nodeId NodeId, @parentId ParentId, @refPath RefPath, @nodeType NodeType
	UNION ALL
	SELECT n.BasicGraphNodeId NodeId, n.ParentId, e.RefPath, n.NodeType
	FROM BIDoc.BasicGraphNodes n
	INNER JOIN ancestors a ON n.BasicGraphNodeId = a.ParentId
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = n.SourceElementId
	)
	SELECT NodeId 
	FROM ancestors
	WHERE ancestors.NodeType = N'DaxScriptElement'
END
BEGIN
	SELECT NULL
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE1].[ancestors].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[NodeType]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE1].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE1].[ancestors].[NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE1].[ancestors].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE1].[ancestors].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors].[NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE2].[ancestors].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors].[NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE3].[ancestors].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors].[NodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors].[ParentId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GetVisualNodeAncestor].[CTE4].[ancestors].[NodeType]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GetVisualNodeAncestor].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2903" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GetVisualNodeAncestor]&#xD;&#xA;@nodeId INT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins]">
			<Property Name="BodyScript">
				<Value><![CDATA[

  IF OBJECT_ID('tempdb.dbo.#resList', 'U') IS NOT NULL
  DROP TABLE #resList; 

  DECLARE @currentLevel INT = 1
  CREATE TABLE #resList 
  (
  Id INT,
  Level INT,
  Name NVARCHAR(MAX),
  RefPath NVARCHAR(MAX),
  DisplayInResult BIT DEFAULT 0,
  Description NVARCHAR(MAX)
  )

  -- the selected node and all descendants
  ;WITH descendants AS
  (
	SELECT e.BasicGraphInfoNodeId, 0 [Level], e.Name, e.RefPath, 1 DisplayInResult, e.Description
	FROM BasicGraphInfoNodes e WHERE e.BasicGraphInfoNodeId = @nodeId
	
	UNION ALL

	SELECT e.BasicGraphInfoNodeId, 0 [Level], e.Name, e.RefPath, 0 DisplayInResult, e.Description
	FROM descendants d
	INNER JOIN BasicGraphInfoLinks l ON d.BasicGraphInfoNodeId = l.NodeTo_BasicGraphInfoNodeId
	INNER JOIN BasicGraphInfoNodes e ON e.BasicGraphInfoNodeId = l.NodeFrom_BasicGraphInfoNodeId
	WHERE l.LinkType = 1
  )
  INSERT INTO #resList (Id, Level, Name, RefPath, DisplayInResult, Description)
  SELECT e.BasicGraphInfoNodeId, 0 [Level], CONVERT(NVARCHAR(1000), e.Name), e.RefPath, e.DisplayInResult, e.Description
  FROM descendants e

  WHILE @currentLevel <= @maxLevels
  BEGIN
	
	;WITH descendants AS
	(
		SELECT e.BasicGraphInfoNodeId, l.Level + 1 Level, e.Name, e.RefPath, 1 DisplayInResult, e.Description
		FROM BasicGraphInfoLinks lnk
		INNER JOIN #resList l ON l.Id = lnk.NodeTo_BasicGraphInfoNodeId
		INNER JOIN BasicGraphInfoNodes e ON e.BasicGraphInfoNodeId = lnk.NodeFrom_BasicGraphInfoNodeId
		LEFT JOIN #resList cycle ON cycle.Id = e.BasicGraphInfoNodeId
		WHERE cycle.Id IS NULL AND lnk.LinkType IN (5)

		UNION ALL

		SELECT e.BasicGraphInfoNodeId, d.Level [Level], e.Name, e.RefPath, 0 DisplayInResult, e.Description
		FROM descendants d
		INNER JOIN BasicGraphInfoLinks l ON d.BasicGraphInfoNodeId = l.NodeFrom_BasicGraphInfoNodeId
		INNER JOIN BasicGraphInfoNodes e ON e.BasicGraphInfoNodeId = l.NodeTo_BasicGraphInfoNodeId
		--LEFT JOIN #resList cycle ON cycle.Id = e.BasicGraphInfoNodeId
		WHERE /*cycle.Id IS NULL AND*/ l.LinkType = 1
	)
	-- lineage links from outside to the resultset
	INSERT INTO #resList (Id, Level, Name, RefPath, DisplayInResult, Description)
	SELECT DISTINCT d.BasicGraphInfoNodeId, d.[Level], d.Name, d.RefPath, DisplayInResult, d.Description FROM descendants d
	
	SET @currentLevel = @currentLevel + 1
  END

  SELECT Id, Level, Name, RefPath, Description FROM #resList WHERE DisplayInResult = 1 ORDER BY Level]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[@nodeId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[BasicGraphInfoNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Level]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[DisplayInResult]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Description]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[@maxLevels]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Level]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[BasicGraphInfoNodeId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[Level]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Level]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[RefPath]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[DisplayInResult]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[#resList].[Description]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[BasicGraphInfoNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[Level]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[DisplayInResult]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE1].[descendants].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[BasicGraphInfoNodeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[Level]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[DisplayInResult]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[CTE2].[descendants].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_GraphNodeLineageOrigin_Origins].[@maxLevels]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[5]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2562" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_GraphNodeLineageOrigin_Origins]&#xD;&#xA;  @nodeId INT,&#xD;&#xA;  @maxLevels INT = 5&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--DECLARE @linkIds [BIDoc].[UDTT_IdList]
--DECLARE @sourceDetailLevel INT = 1
--DECLARE @targetDetailLevel INT = 3

DECLARE @targetDetailGraphKind NVARCHAR(50) =
 IIF(@targetDetailLevel = 1, N'DataFlow', IIF(@targetDetailLevel = 2, N'DataFlowMediumDetail', N'DataFlowLowDetail'))
DECLARE @sourceDetailGraphKind NVARCHAR(50) = 
 IIF(@sourceDetailLevel = 1, N'DataFlow', IIF(@sourceDetailLevel = 2, N'DataFlowMediumDetail', N'DataFlowLowDetail'))

;WITH linkNodes AS
(
SELECT DISTINCT l.NodeFromId Id FROM BIDoc.BasicGraphLinks l
INNER JOIN @linkIds lid ON l.BasicGraphLinkId = lid.Id
UNION
SELECT DISTINCT l.NodeToId Id FROM BIDoc.BasicGraphLinks l
INNER JOIN @linkIds lid ON l.BasicGraphLinkId = lid.Id
)
SELECT n.Id INTO #nodeIds 
FROM linkNodes n

CREATE TABLE #nodeIdMap
(
OldNodeId INT,
NewNodeId INT
)

IF @sourceDetailLevel = @targetDetailLevel
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT nl.Id OriginalNodeId, nl.Id NewNodeId FROM #nodeIds nl
END
ELSE IF @sourceDetailLevel < @targetDetailLevel
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT srcN.BasicGraphNodeId OriginalNodeId, tgtN.BasicGraphNodeId NewNodeId 
	FROM #nodeIds nl
	INNER JOIN BIDoc.BasicGraphNodes srcN ON srcN.BasicGraphNodeId = nl.Id
	INNER JOIN BIDoc.HigherLevelElementAncestors anc ON anc.SouceElementId = srcN.SourceElementId
	INNER JOIN BIDoc.BasicGraphNodes tgtN ON tgtN.SourceElementId = anc.AncestorElementId
	WHERE anc.DetailLevel = @targetDetailLevel AND tgtN.GraphKind = @targetDetailGraphKind
END
ELSE
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT srcN.BasicGraphNodeId OriginalNodeId, tgtn.BasicGraphNodeId NewNodeId
	FROM #nodeIds nl
	INNER JOIN BIDoc.BasicGraphNodes srcN ON srcN.BasicGraphNodeId = nl.Id
	INNER JOIN BIDoc.HigherLevelElementAncestors anc ON anc.AncestorElementId = srcN.SourceElementId
	INNER JOIN BIDoc.BasicGraphNodes tgtN ON tgtN.SourceElementId = anc.SouceElementId
	WHERE anc.DetailLevel = @sourceDetailLevel AND tgtN.GraphKind = @targetDetailGraphKind
END

SELECT DISTINCT
	nl.BasicGraphLinkId, 
	nl.NodeFromId, 
	nl.NodeToId 
FROM 
@linkIds li
INNER JOIN BIDoc.BasicGraphLinks ol ON ol.BasicGraphLinkId = li.Id
INNER JOIN #nodeIdMap nmFrom ON ol.NodeFromId = nmFrom.OldNodeId
INNER JOIN #nodeIdMap nmTo ON ol.NodeToId = nmTo.OldNodeId
INNER JOIN BIDoc.BasicGraphLinks nl ON nl.NodeFromId = nmFrom.NewNodeId AND nl.NodeToId = nmTo.NewNodeId

DROP TABLE #nodeIdMap
DROP TABLE #nodeIds]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@targetDetailLevel]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@sourceDetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[NodeToId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphLinks].[BasicGraphLinkId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[OldNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIdMap].[NewNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[CTE1].[linkNodes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[CTE1].[linkNodes].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[#nodeIds].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[BasicGraphLinks].[NodeFromId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds]" Disambiguator="21">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@linkIds]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_IdList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@sourceDetailLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowLinksDetailLevel].[@targetDetailLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2665" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_TranslateDataFlowLinksDetailLevel]&#xD;&#xA;@linkIds [BIDoc].[UDTT_IdList] READONLY,&#xD;&#xA;@sourceDetailLevel INT,&#xD;&#xA;@targetDetailLevel INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @targetDetailGraphKind NVARCHAR(50) =
 IIF(@targetDetailLevel = 1, N'DataFlow', IIF(@targetDetailLevel = 2, N'DataFlowMediumDetail', N'DataFlowLowDetail'))
DECLARE @sourceDetailGraphKind NVARCHAR(50) = 
 IIF(@sourceDetailLevel = 1, N'DataFlow', IIF(@sourceDetailLevel = 2, N'DataFlowMediumDetail', N'DataFlowLowDetail'))

CREATE TABLE #nodeIdMap
(
OldNodeId INT,
NewNodeId INT
)

IF @sourceDetailLevel = @targetDetailLevel
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT @nodeId OriginalNodeId, @nodeId NewNodeId
END
ELSE IF @sourceDetailLevel < @targetDetailLevel
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT srcN.BasicGraphNodeId OriginalNodeId, tgtN.BasicGraphNodeId NewNodeId 
	FROM BIDoc.BasicGraphNodes srcN
	INNER JOIN BIDoc.HigherLevelElementAncestors anc ON anc.SouceElementId = srcN.SourceElementId
	INNER JOIN BIDoc.BasicGraphNodes tgtN ON tgtN.SourceElementId = anc.AncestorElementId
	WHERE anc.DetailLevel = @targetDetailLevel AND tgtN.GraphKind = @targetDetailGraphKind AND srcN.BasicGraphNodeId = @nodeId
END
ELSE
BEGIN
	INSERT INTO #nodeIdMap(OldNodeId, NewNodeId)
	SELECT srcN.BasicGraphNodeId OriginalNodeId, tgtn.BasicGraphNodeId NewNodeId
	FROM BIDoc.BasicGraphNodes srcN
	INNER JOIN BIDoc.HigherLevelElementAncestors anc ON anc.AncestorElementId = srcN.SourceElementId
	INNER JOIN BIDoc.BasicGraphNodes tgtN ON tgtN.SourceElementId = anc.SouceElementId
	WHERE anc.DetailLevel = @sourceDetailLevel AND tgtN.GraphKind = @targetDetailGraphKind AND srcN.BasicGraphNodeId = @nodeId
END

DECLARE @nodeIds [BIDoc].[UDTT_IdList]

INSERT INTO @nodeIds(Id)
SELECT DISTINCT NewNodeId FROM #nodeIdMap

SELECT
	[BasicGraphNodeId]
	,[Name]
	,[NodeType]
	,[Description]
	,[ParentId]
	,[GraphKind]
	,[ProjectConfigId]
	,[SourceElementId]
	,[TopologicalOrder]
	,[RefPath]
	,TypeDescription
	,ElementType
	,DescriptivePath
FROM [Inspect].[f_GetGraphNodesByIdExtended](@nodeIds)

DROP TABLE #nodeIdMap]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@targetDetailLevel]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@sourceDetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[UDTT_IdList]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap].[OldNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap].[NewNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@nodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[SouceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[AncestorElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[HigherLevelElementAncestors].[DetailLevel]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[BasicGraphNodes].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@nodeIds].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[BasicGraphNodeId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[NodeType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[ParentId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[GraphKind]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[SourceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[TopologicalOrder]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Inspect].[f_GetGraphNodesByIdExtended].[DescriptivePath]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap].[OldNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[#nodeIdMap].[NewNodeId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@nodeIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@nodeIds].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@nodeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@sourceDetailLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Inspect].[sp_TranslateDataFlowNodeDetailLevel].[@targetDetailLevel]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2129" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Inspect].[sp_TranslateDataFlowNodeDetailLevel]&#xD;&#xA;@nodeId INT,&#xD;&#xA;@sourceDetailLevel INT,&#xD;&#xA;@targetDetailLevel INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[SourceNodeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[SourceNodeName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[SourceNodePath]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[SourceElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[TargetNodeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[TargetNodeName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[TargetNodePath]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Inspect].[UDTT_sp_GetDataFlowBetweenGroups].[TargetElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Inspect]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Learning]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapFieldReferences]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[OlapFieldReferenceId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[QueryElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[FieldElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[ReferenceElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[FieldType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[FieldReference]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[FieldName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[QueryElementRefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[ReferenceElementRefPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[DbName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFieldReferences].[CubeName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="184" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapFields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[OlapFieldId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[FieldElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[FieldType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[FieldReference]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[FieldName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[DbName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapFields].[CubeName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="185" />
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapQueryFields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapQueryFields].[OlapQueryFieldId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapQueryFields].[ProjectConfigId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapQueryFields].[QueryElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapQueryFields].[OlapFieldId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="62" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="186" />
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapRuleConclusions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRuleConclusions].[OlapRuleConclusionId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRuleConclusions].[OlapRuleId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="58" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRuleConclusions].[OlapFieldId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="59" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="187" />
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapRulePremises]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRulePremises].[OlapRulePremiseId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRulePremises].[OlapRuleId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="60" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRulePremises].[OlapFieldId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="61" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="188" />
		</Element>
		<Element Type="SqlTable" Name="[Learning].[OlapRules]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[OlapRuleId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[RuleCode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[Confidence]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[real]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[Support]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[real]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[ServerName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[DbName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Learning].[OlapRules].[CubeName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="189" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapFieldReferences]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapFieldReferences].[OlapFieldReferenceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapFieldReferences]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="184" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapFields]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapFields].[OlapFieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="185" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapQueryFields]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapQueryFields].[OlapQueryFieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapQueryFields]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="186" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapRuleConclusions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapRuleConclusions].[OlapRuleConclusionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="187" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapRulePremises]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapRulePremises].[OlapRulePremiseId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="188" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Learning].[PK_Learning_OlapRules]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Learning].[OlapRules].[OlapRuleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="189" />
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_CollectOlapFieldReferences]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE FROM Learning.OlapFieldReferences WHERE ProjectConfigId = @projectconfigid
/*
;WITH x AS(
---------- pivot tables
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/Field[', e.RefPath)) [GroupPath], 
IIF(
JSON_VALUE(e.ExtendedProperties, '$.Orientation') IN(N'0', N'1'), N'Axis', 
IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', N'Measure', N'Filter')
) [FieldType],
e.RefPath, N'[' + IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', N'Measures', he.Caption) + N'].[' + le.Caption + N']' FieldReference, 
le.ModelElementId FieldElementId, IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', le.Caption, N'[' + he.Caption + N'].[' + le.Caption + N']') FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = le.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Business.Excel.PivotTableFieldElement' 
AND l.Type = N'SourceField'
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.CalculatedMeasureElement', 
N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement',
N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement')
--AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

------ measures
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Measure' [FieldType],
e.RefPath, e.Definition FieldReference, le.ModelElementId FieldElementId, le.Caption FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' 
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.CalculatedMeasureElement', N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

--------- direct attributes
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Axis' [FieldType],
e.RefPath, /*e.Definition*/ N'[' + he.Caption + N'].[' + le.Caption + N']' FieldReference, 
le.ModelElementId FieldElementId, N'[' + he.Caption + N'].[' + le.Caption + N']' FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = le.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
--INNER JOIN BIDoc.ModelLinks dl ON dl.ElementFromId = he.ModelElementId AND dl.Type = N'parent'
--INNER JOIN BIDoc.ModelElements de ON de.ModelElementId = dl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition NOT LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

-------- hierarchy levels
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Axis' [FieldType],
e.RefPath, /*e.Definition*/ N'[' + he.Caption + N'].[' + ae.Caption + N']' FieldReference, 
ae.ModelElementId FieldElementId, N'[' + he.Caption + N'].[' + ae.Caption + N']' FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks al ON al.ElementFromId = le.ModelElementId AND al.Type = N'Attribute'
INNER JOIN BIDoc.ModelElements ae ON ae.ModelElementId = al.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = ae.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
--INNER JOIN BIDoc.ModelLinks dl ON dl.ElementFromId = he.ModelElementId AND dl.Type = N'parent'
--INNER JOIN BIDoc.ModelElements de ON de.ModelElementId = dl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition NOT LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.HierarchyLevelElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

------- filters
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Filter' [FieldType],
e.RefPath, e.Definition FieldReference, 
le.ModelElementId FieldElementId, le.Caption + N' ' + SUBSTRING(e.Definition, CHARINDEX(N'.&[', e.Definition) + 2, 1000) FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement', N'CD.DLS.Model.Mssql.Ssas.HierarchyLevelElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId
)
INSERT INTO Learning.OlapFieldReferences
(
ProjectConfigId, 
QueryElementId,
FieldElementId,
ReferenceElementId,
FieldType,
FieldReference,
FieldName, 
QueryElementRefPath,
ReferenceElementRefPath
)
SELECT 
x.ProjectConfigId, 
queryElement.ModelElementId QueryElementId,
FieldElementId,
referenceElement.ModelElementId ReferenceElementId,
x.FieldType,
x.FieldReference,
x.FieldName,
x.GroupPath QueryElementRefPath,
x.RefPath ReferenceElementRefPath
FROM x
INNER JOIN BIDoc.ModelElements queryElement ON queryElement.RefPath = x.GroupPath
INNER JOIN BIDoc.ModelElements referenceElement ON referenceElement.RefPath = x.RefPath
WHERE queryElement.ProjectConfigId = @projectConfigId AND referenceElement.ProjectConfigId = @projectConfigId
*/

;WITH x AS(
---------- pivot tables
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/Field[', e.RefPath)) [GroupPath], 
IIF(
JSON_VALUE(e.ExtendedProperties, '$.Orientation') IN(N'0', N'1'), N'Axis', 
IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', N'Measure', N'Filter')
) [FieldType],
e.RefPath, N'[' + IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', N'Measures', he.Caption) + N'].[' + le.Caption + N']' FieldReference, 
le.ModelElementId FieldElementId, IIF(JSON_VALUE(e.ExtendedProperties, '$.Orientation') = N'2', le.Caption, N'[' + he.Caption + N'].[' + le.Caption + N']') FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = le.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Business.Excel.PivotTableFieldElement' 
AND l.Type = N'SourceField'
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.ReportCalculatedMeasureElement', N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement', 
N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement',
N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement')
--AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId
-- for now, exclude pivot table template filters
AND (ISNULL(JSON_VALUE(e.ExtendedProperties, '$.Orientation'), N'') <> N'3')
UNION ALL

------ measures
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Measure' [FieldType],
e.RefPath, e.Definition FieldReference, le.ModelElementId FieldElementId, le.Caption FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' 
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.ReportCalculatedMeasureElement', N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement', N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

--------- direct attributes
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Axis' [FieldType],
e.RefPath, /*e.Definition*/ N'[' + he.Caption + N'].[' + le.Caption + N']' FieldReference, 
le.ModelElementId FieldElementId, N'[' + he.Caption + N'].[' + le.Caption + N']' FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = le.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
--INNER JOIN BIDoc.ModelLinks dl ON dl.ElementFromId = he.ModelElementId AND dl.Type = N'parent'
--INNER JOIN BIDoc.ModelElements de ON de.ModelElementId = dl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition NOT LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

-------- hierarchy levels
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Axis' [FieldType],
e.RefPath, /*e.Definition*/ N'[' + he.Caption + N'].[' + ae.Caption + N']' FieldReference, 
ae.ModelElementId FieldElementId, N'[' + he.Caption + N'].[' + ae.Caption + N']' FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
INNER JOIN BIDoc.ModelLinks al ON al.ElementFromId = le.ModelElementId AND al.Type = N'Attribute'
INNER JOIN BIDoc.ModelElements ae ON ae.ModelElementId = al.ElementToId
INNER JOIN BIDoc.ModelLinks hl ON hl.ElementFromId = ae.ModelElementId AND hl.Type = N'parent'
INNER JOIN BIDoc.ModelElements he ON he.ModelElementId = hl.ElementToId
--INNER JOIN BIDoc.ModelLinks dl ON dl.ElementFromId = he.ModelElementId AND dl.Type = N'parent'
--INNER JOIN BIDoc.ModelElements de ON de.ModelElementId = dl.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition NOT LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionHierarchyLevelElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId

UNION ALL

------- filters
SELECT e.ProjectConfigId, SUBSTRING(e.RefPath, 0, CHARINDEX(N'/MdxStatement', e.RefPath)) [GroupPath], N'Filter' [FieldType],
e.RefPath, e.Definition FieldReference, 
le.ModelElementId FieldElementId, le.Caption + N' ' + SUBSTRING(e.Definition, CHARINDEX(N'.&[', e.Definition) + 2, 1000) FieldName 
FROM BIDoc.ModelElements e 
INNER JOIN BIDoc.ModelLinks l ON l.ElementFromId = e.ModelElementId
INNER JOIN BIDoc.ModelElements le ON le.ModelElementId = l.ElementToId
WHERE e.Type = N'CD.DLS.Model.Mssql.Ssas.MdxFragmentElement' AND e.Definition LIKE '%.&%'
AND l.Type = N'Reference'
AND e.RefPath LIKE N'SSRS%' 
AND le.RefPath LIKE N'SSAS%' 
AND le.Type IN (N'CD.DLS.Model.Mssql.Ssas.CubeDimensionAttributeElement', N'CD.DLS.Model.Mssql.Ssas.CubeDimensionHierarchyLevelElement')
AND e.Definition NOT LIKE N'%(%'
AND e.ProjectConfigId = @projectConfigId
AND e.Definition LIKE '%&%'
)
INSERT INTO Learning.OlapFieldReferences
(
ServerName,
DbName,
CubeName,
ProjectConfigId, 
QueryElementId,
FieldElementId,
ReferenceElementId,
FieldType,
FieldReference,
FieldName, 
QueryElementRefPath,
ReferenceElementRefPath
)
SELECT 
SUBSTRING(fe.RefPath, LEN(N'SSASServer[@Name=') + 2, CHARINDEX(N']/Db[@Name=', fe.RefPath) - LEN(N'SSASServer[@Name=') - 3) ServerName
,SUBSTRING(fe.RefPath, CHARINDEX(N']/Db[@Name=', fe.RefPath) + LEN(N']/Db[@Name=') + 1, CHARINDEX(N']/Cube[@Name=', fe.RefPath) - (CHARINDEX(N']/Db[@Name=', fe.RefPath) + LEN(N']/Db[@Name=') + 1) - 1) DbName
,SUBSTRING(fe.RefPath, CHARINDEX(N']/Cube[@Name=', fe.RefPath) + LEN(N']/Cube[@Name=') + 1, 
	CHARINDEX(N''']/', SUBSTRING(fe.RefPath, CHARINDEX(N']/Cube[@Name=', fe.RefPath) + LEN(N']/Cube[@Name=') + 1, 1000)) - 1) CubeName,
x.ProjectConfigId, 
queryElement.ModelElementId QueryElementId,
FieldElementId,
referenceElement.ModelElementId ReferenceElementId,
x.FieldType,
x.FieldReference,
x.FieldName,
x.GroupPath QueryElementRefPath,
x.RefPath ReferenceElementRefPath
FROM x
INNER JOIN BIDoc.ModelElements queryElement ON queryElement.RefPath = x.GroupPath
INNER JOIN BIDoc.ModelElements referenceElement ON referenceElement.RefPath = x.RefPath
INNER JOIN BIDoc.ModelElements fe ON fe.ModelElementId = x.FieldElementId
WHERE queryElement.ProjectConfigId = @projectConfigId AND referenceElement.ProjectConfigId = @projectConfigId



DELETE rp FROM Learning.OlapRulePremises rp
INNER JOIN Learning.OlapRules r ON rp.OlapRuleId = r.OlapRuleId WHERE r.ProjectConfigId = @projectConfigId

DELETE rc FROM Learning.OlapRuleConclusions rc
INNER JOIN Learning.OlapRules r ON rc.OlapRuleId = r.OlapRuleId WHERE r.ProjectConfigId = @projectConfigId

DELETE FROM [Learning].[OlapQueryFields] WHERE ProjectConfigId = @projectConfigId
DELETE FROM Learning.OlapFields WHERE ProjectConfigId = @projectConfigId

INSERT INTO Learning.OlapFields
(
ProjectConfigId,
FieldElementId,
FieldType,
FieldReference,
FieldName,
ServerName,
DbName,
CubeName
)
SELECT DISTINCT @projectConfigId ProjectConfigId, r.FieldElementId, r.FieldType, r.FieldReference, r.FieldName, 
ServerName, DbName, CubeName
FROM Learning.OlapFieldReferences r

INSERT INTO Learning.OlapQueryFields
(
ProjectConfigId,
QueryElementId,
OlapFieldId
)
SELECT DISTINCT
@projectConfigId,
r.QueryElementId,
f.OlapFieldId
FROM Learning.OlapFieldReferences r
INNER JOIN Learning.OlapFields f ON f.FieldElementId = r.FieldElementId AND f.FieldReference = r.FieldReference AND f.FieldType = r.FieldType
	AND f.ServerName = r.ServerName AND f.DbName = r.DbName AND f.CubeName = r.CubeName
WHERE r.ProjectConfigId = @projectConfigId AND f.ProjectConfigId = @projectConfigId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapFieldReferences]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_CollectOlapFieldReferences].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ExtendedProperties]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Definition]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[QueryElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ReferenceElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[QueryElementRefPath]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ReferenceElementRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[QueryElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[QueryElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFieldReferences].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[ProjectConfigId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[GroupPath]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[FieldType]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[FieldReference]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[FieldElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_CollectOlapFieldReferences].[CTE1].[x].[FieldName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_CollectOlapFieldReferences].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="15213" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_CollectOlapFieldReferences]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_GetOlapQueryFields]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT OlapQueryFieldId, QueryElementId, OlapFieldId 
FROM Learning.OlapQueryFields
WHERE ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapQueryFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[OlapQueryFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[QueryElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapQueryFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_GetOlapQueryFields].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_GetOlapQueryFields].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="221" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_GetOlapQueryFields]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_GetOlapRuleConclusions]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT c.OlapRuleId, c.OlapFieldId
FROM Learning.OlapRules r
INNER JOIN Learning.OlapRuleConclusions c ON r.OlapRuleId = c.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_GetOlapRuleConclusions].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_GetOlapRuleConclusions].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="278" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_GetOlapRuleConclusions]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_GetOlapRulePremises]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT p.OlapRuleId, p.OlapFieldId
FROM Learning.OlapRules r
INNER JOIN Learning.OlapRulePremises p ON r.OlapRuleId = p.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_GetOlapRulePremises].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_GetOlapRulePremises].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="272" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_GetOlapRulePremises]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_GetOlapRules]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT r.OlapRuleId, r.RuleCode, r.Support, r.Confidence, r.ServerName, r.DbName, r.CubeName
FROM Learning.OlapRules r
WHERE r.ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[RuleCode]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[Support]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[Confidence]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_GetOlapRules].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_GetOlapRules].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="252" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_GetOlapRules]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_ListOlapFields]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT f.OlapFieldId, f.FieldElementId, f.FieldName, f.FieldReference, f.FieldType,
f.ServerName, f.DbName, f.CubeName
FROM Learning.OlapFields f
WHERE ProjectConfigId = @projectconfigid]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapFields]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldElementId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldReference]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[FieldType]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapFields].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_ListOlapFields].[@projectconfigid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_ListOlapFields].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="280" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_ListOlapFields]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Learning].[sp_SetOlapRules]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE p FROM Learning.OlapRulePremises p
INNER JOIN Learning.OlapRules r ON p.OlapRuleId = r.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid

DELETE c FROM Learning.OlapRuleConclusions c
INNER JOIN Learning.OlapRules r ON c.OlapRuleId = r.OlapRuleId
WHERE r.ProjectConfigId = @projectconfigid

DELETE FROM Learning.OlapRules WHERE ProjectConfigId = @projectconfigid

INSERT INTO Learning.OlapRules
(ProjectConfigId, RuleCode, Support, Confidence, ServerName, DbName, CubeName)
SELECT @projectconfigid, RuleCode, Support, Confidence, ServerName, DbName, CubeName FROM @rules

;WITH premises AS
(
SELECT r.RuleCode, CONVERT(INT, p.item) FieldId FROM @rules r
CROSS APPLY adm.f_splitstring(r.Premises, N';') p
)
INSERT INTO Learning.OlapRulePremises
(OlapRuleId, OlapFieldId)
SELECT r.OlapRuleId, premises.FieldId 
FROM premises
INNER JOIN Learning.OlapRules r ON r.RuleCode = premises.RuleCode
WHERE r.ProjectConfigId = @projectconfigid

;WITH conclusions AS
(
SELECT r.RuleCode, CONVERT(INT, p.item) FieldId FROM @rules r
CROSS APPLY adm.f_splitstring(r.Conclusions, N';') p
)
INSERT INTO Learning.OlapRuleConclusions
(OlapRuleId, OlapFieldId)
SELECT r.OlapRuleId, conclusions.FieldId 
FROM conclusions
INNER JOIN Learning.OlapRules r ON r.RuleCode = conclusions.RuleCode
WHERE r.ProjectConfigId = @projectconfigid

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Learning].[OlapRulePremises]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@projectconfigid]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[RuleCode]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[Support]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[Confidence]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[Support]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[Confidence]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[ServerName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[DbName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[CubeName]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[Premises]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_splitstring].[item]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRulePremises].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[RuleCode]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRules].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[Conclusions]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapRuleId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[OlapRuleConclusions].[OlapFieldId]" />
				</Entry>
				<Entry>
					<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Learning].[sp_SetOlapRules].[CTE1].[premises]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_SetOlapRules].[CTE1].[premises].[RuleCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_SetOlapRules].[CTE1].[premises].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Learning].[sp_SetOlapRules].[CTE2].[conclusions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_SetOlapRules].[CTE2].[conclusions].[RuleCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Learning].[sp_SetOlapRules].[CTE2].[conclusions].[FieldId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Learning].[sp_SetOlapRules].[@rules]" Disambiguator="30">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[RuleCode]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="30" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[Support]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[real]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[Confidence]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[real]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[Premises]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[Conclusions]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[ServerName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[DbName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Learning].[sp_SetOlapRules].[@rules].[CubeName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_SetOlapRules].[@projectconfigid]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Learning].[sp_SetOlapRules].[@rules]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[Learning].[UDTT_OlapRules]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1504" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Learning].[sp_SetOlapRules]&#xD;&#xA;&#x9;@projectconfigid UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@rules [Learning].[UDTT_OlapRules] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[Learning].[UDTT_OlapRules]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[RuleCode]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[Support]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[real]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[Confidence]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[real]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[Premises]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[Conclusions]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[ServerName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[DbName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Learning].[UDTT_OlapRules].[CubeName]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Learning]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Search]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Search].[BusinessDictionarySupportedTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[BusinessDictionarySupportedTypes].[TypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Search].[f_GetRootElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Search].[RootElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[f_GetRootElements].[@projectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[f_GetRootElements].[ModelElementId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[f_GetRootElements].[Caption]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Search].[RootElements].[Caption]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[f_GetRootElements].[ElementType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[f_GetRootElements].[RefPathPrefix]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElements].[RefPathPrefix]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
	SELECT e.ModelElementId, r.Caption, e.Type ElementType, e.RefPathPrefix
	FROM Search.RootElements r
	INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = r.ModelElementId
	WHERE r.ProjectConfigId = @projectConfigId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="339" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Search].[f_GetRootElements]&#xD;&#xA;(&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[f_GetRootElements].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Search].[FK_FullTextSearch_ModelElements]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="190" />
		</Element>
		<Element Type="SqlFullTextIndex" Name="[Search].[FulltextSearch]" Disambiguator="3">
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[fulltext_default]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[FulltextSearch].[ElementName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[FulltextSearch].[ElementNameSplit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[FulltextSearch].[BusinessFields]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[Search].[PK_FullTextSearch]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Search].[FulltextSearch]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[FulltextSearchId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="191" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[ModelElementId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="190" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[ElementName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[ElementNameSplit]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[BusinessFields]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[SearchPriority]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="41" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[TypeDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[DescriptiveRootPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[ElementType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[FulltextSearch].[RefPath]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Search].[FulltextSearch].[IX_Search_FulltextSearch_ProjectConfigId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[FulltextSearch].[ProjectConfigId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Search].[PK_FullTextSearch]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Search].[FulltextSearch].[FulltextSearchId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="191" />
		</Element>
		<Element Type="SqlTable" Name="[Search].[RootElements]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[RootElements].[RootElementId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="71" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[RootElements].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[RootElements].[ModelElementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[RootElements].[Caption]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Search].[sp_FindFulltext]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	--DECLARE @pattern NVARCHAR(MAX) = N'General Ledger'


DECLARE 
	@intervalFrom INT,
	@intervalTo INT,
	@annotationPrefix BIT = 0


DECLARE @elementId INT = (SELECT [ModelElementId] FROM [BIDoc].[f_GetModelElementIdByRefPath] (@projectConfigId, @refPathPrefix))

SELECT @intervalFrom = e.RefPathIntervalStart, @intervalTo = e.RefPathIntervalEnd FROM BIDoc.ModelElements e WHERE e.ModelElementId = @elementId

DECLARE @likePattern NVARCHAR(MAX) =  N'%' + [Adm].[f_EscapeForLike](@pattern) + N'%'
DECLARE @containsPattern NVARCHAR(1000) = N'ISABOUT(' + REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(TRIM(' ()[]&!|"' from @pattern), N' ', N', '), N'(', N''), N')', N''), N'[', N''), N']', N''), N'!', N''), N'|', N''), N'&', N''), N'"', N'') + N')'

;WITH r AS(
SELECT fts.ModelElementId, fts.ElementName, fts.TypeDescription /*td.TypeDescription*/, fts.DescriptiveRootPath /*dscPth.DescriptiveRootPath*/, 
fts.BusinessFields, KEY_TBL.RANK * fts.SearchPriority ResultPriority, fts.ElementType /*e.Type*/
,fts.RefPath
--,e.RefPathPrefix

FROM Search.FulltextSearch fts 
INNER JOIN CONTAINSTABLE(Search.FulltextSearch, (ElementName, ElementNameSplit, BusinessFields), @containsPattern ) AS KEY_TBL ON fts.FulltextSearchId = KEY_TBL.[KEY]
--INNER JOIN BIDoc.ModelElementDescriptivePaths dscPth ON dscPth.ModelElementId = fts.ModelElementId
--INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = fts.ModelElementId
--INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.[Type]
WHERE fts.ProjectConfigId = @projectConfigId

UNION

SELECT fts.ModelElementId, fts.ElementName, fts.TypeDescription, fts.DescriptiveRootPath, 
fts.BusinessFields, LEN(@pattern) * 5 * fts.SearchPriority ResultPriority, fts.ElementType
,fts.RefPath
--,e.RefPathPrefix
FROM Search.FulltextSearch fts 
--INNER JOIN BIDoc.ModelElementDescriptivePaths dscPth ON dscPth.ModelElementId = fts.ModelElementId
--INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = fts.ModelElementId
--INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.[Type]
WHERE (fts.ElementName LIKE @likePattern OR fts.BusinessFields LIKE @likePattern)
AND fts.ProjectConfigId = @projectConfigId
)

SELECT TOP 200 
r.ModelElementId, r.ElementName, r.TypeDescription, r.DescriptiveRootPath, 
r.BusinessFields, r.ElementType, MAX(r.ResultPriority) ResultPriority 
FROM r 
INNER JOIN @typeFilter tf ON tf.Value = r.ElementType
LEFT JOIN BIDoc.Modelelements me ON me.ModelElementId = r.ModelElementId
WHERE (@refPathPrefix = N'' OR (@annotationPrefix = 1 AND LEFT(r.RefPath, LEN(@refPathPrefix)) = @refPathPrefix) OR (me.RefPathIntervalStart BETWEEN @intervalFrom AND @intervalTo))
GROUP BY r.ModelElementId, r.ElementName, r.TypeDescription, r.DescriptiveRootPath, 
r.BusinessFields, r.ElementType
ORDER BY MAX(r.ResultPriority) DESC

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindFulltext].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindFulltext].[@refPathPrefix]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[f_GetModelElementIdByRefPath].[ModelElementId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Adm].[f_EscapeForLike]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindFulltext].[@pattern]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalEnd]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementName]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementNameSplit]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[BusinessFields]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[FulltextSearchId]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementName]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[BusinessFields]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Search].[FulltextSearch].[SearchPriority]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindFulltext].[@typeFilter]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindFulltext].[@typeFilter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementName]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[BusinessFields]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPathIntervalStart]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Search].[sp_FindFulltext].[CTE1].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[ElementName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[ElementName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[TypeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[TypeDescription]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[DescriptiveRootPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[DescriptiveRootPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[BusinessFields]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[BusinessFields]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[ResultPriority]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[ElementType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[ElementType]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_FindFulltext].[CTE1].[r].[RefPath]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[RefPath]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Search].[sp_FindFulltext].[@typeFilter]" Disambiguator="22">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Search].[sp_FindFulltext].[@typeFilter].[Value]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_FindFulltext].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_FindFulltext].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_FindFulltext].[@refPathPrefix]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_FindFulltext].[@typeFilter]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[BIDoc].[UDTT_StringList]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3089" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Search].[sp_FindFulltext]&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER, &#xD;&#xA;&#x9;@pattern NVARCHAR(MAX),&#xD;&#xA;&#x9;@refPathPrefix NVARCHAR(300),&#xD;&#xA;&#x9;@typeFilter [BIDoc].[UDTT_StringList] READONLY&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Search].[sp_FindRootElements]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DELETE FROM Search.RootElements WHERE ProjectConfigId = @projectConfigId

INSERT INTO Search.RootElements
(
ProjectConfigId,
ModelElementId,
Caption
)

SELECT @projectConfigId, e.ModelElementId, dp.DescriptivePath 
FROM BIDoc.ModelElements e
INNER JOIN BIDoc.ModelElementDescriptivePaths dp ON e.ModelElementId = dp.ModelElementId
LEFT JOIN BIDoc.ModelLinks pl ON pl.Type = N'parent' AND pl.ElementFromId = e.ModelElementId
LEFT JOIN BIDoc.ModelElements parentFolder ON parentFolder.ModelElementId = pl.ElementToId AND parentFolder.Type = N'CD.DLS.Model.Mssql.Ssrs.FolderElement'
WHERE e.[Type] IN (
 N'CD.DLS.Model.Mssql.Db.DatabaseElement'
 ,N'CD.DLS.Model.Mssql.Ssas.SsasMultidimensionalDatabaseElement'
 ,N'CD.DLS.Model.Mssql.Ssis.ProjectElement'
  ,N'CD.DLS.Model.Mssql.Pbi.TenantElement'
 ,N'CD.DLS.Model.Mssql.Ssrs.FolderElement'
 ,N'CD.DLS.Model.Business.Organization.BusinessRootElement')
AND parentFolder.ModelElementId IS NULL
AND e.ProjectConfigId = @projectConfigId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Search].[RootElements]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_FindRootElements].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[RootElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementFromId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelLinks].[ElementToId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptivePath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_FindRootElements].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1090" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Search].[sp_FindRootElements]&#xD;&#xA;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Search].[sp_IndexFulltext]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN

DELETE fts FROM Search.FullTextSearch fts
--INNER JOIN BIDoc.ModelElements e ON e.ModelElementId = fts.ModelElementId
--WHERE e.ProjectConfigId = @projectConfigId
WHERE fts.ProjectConfigId = @projectConfigId

CREATE TABLE #searchTypes (TypeName NVARCHAR(MAX), SearchPriority INT)

INSERT INTO #searchTypes
(
    TypeName,
    SearchPriority
)
VALUES 

	(N'CD.DLS.Model.Mssql.Ssrs.ReportElement', 10),	
	(N'CD.DLS.Model.Mssql.Ssrs.TextBoxElement', 5),
	(N'CD.DLS.Model.Mssql.Ssis.PackageElement', 7),
	(N'CD.DLS.Model.Mssql.Ssas.CubeElement', 3),
	(N'CD.DLS.Model.Mssql.Db.DatabaseElement', 3),
	(N'CD.DLS.Model.Mssql.Ssis.ProjectElement', 2),
	(N'CD.DLS.Model.Mssql.Ssas.DimensionElement', 7),
	--(N'CD.DLS.Model.Mssql.Ssas.MdxScriptElement', 1),
	(N'CD.DLS.Model.Mssql.Db.ViewElement', 8),
	(N'CD.DLS.Model.Mssql.Db.SchemaTableElement', 9),
	--(N'CD.DLS.Model.Mssql.Ssas.MeasureGroupElement', 6),
	(N'CD.DLS.Model.Mssql.Db.ProcedureElement', 5),
	(N'CD.DLS.Model.Mssql.Ssas.PhysicalMeasureElement', 9),
	--(N'CD.DLS.Model.Mssql.Ssas.CalculatedMeasureElement', 9),
	(N'CD.DLS.Model.Mssql.Ssas.CubeCalculatedMeasureElement', 9),
	(N'CD.DLS.Model.Mssql.Ssas.ReportCalculatedMeasureElement', 5),
	(N'CD.DLS.Model.Mssql.Ssas.DimensionAttributeElement', 8),
	(N'CD.DLS.Model.Mssql.Db.ColumnElement', 7),

	(N'CD.DLS.Model.Business.Excel.PivotTableTemplateElement', 10),

	(N'CD.DLS.Model.Mssql.Tabular.SsasTabularTableElement', 9),
	(N'CD.DLS.Model.Mssql.Tabular.SsasTabularTableColumnElement', 8),

	(N'CD.DLS.Model.Mssql.Pbi.TenantElement', 10),
	(N'CD.DLS.Model.Mssql.Pbi.ReportElement', 10),
	(N'CD.DLS.Model.Mssql.Pbi.ReportSectionElement',8),
	(N'CD.DLS.Model.Mssql.Pbi.VisualElement', 5),
	(N'CD.DLS.Model.Mssql.Pbi.ConnectionElement', 5),
	(N'CD.DLS.Model.Mssql.Pbi.PbiTableElement', 7),
	(N'CD.DLS.Model.Mssql.Pbi.PbiColumnElement', 7)




	

INSERT INTO Search.FulltextSearch(ModelElementID, ElementName, ElementNameSplit, SearchPriority,
[TypeDescription], [DescriptiveRootPath], [ElementType], ProjectConfigId, [RefPath]
)
SELECT e.ModelElementId, e.Caption, adm.f_SplitCamelCase(e.Caption), st.SearchPriority,
td.TypeDescription, dscPth.DescriptiveRootPath, e.Type, @projectConfigId, e.RefPath
FROM BIDoc.ModelElements e 
INNER JOIN #searchTypes st ON e.Type = st.TypeName
INNER JOIN BIDoc.ModelElementDescriptivePaths dscPth ON dscPth.ModelElementId = e.ModelElementId
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = e.[Type]
WHERE e.ProjectConfigId = @projectConfigId

;WITH assignments AS
(
SELECT DISTINCT fts.ModelElementId, 
SUBSTRING(
        (
            SELECT ', ' + fv.Value AS [text()]
            FROM Annotate.FieldValues fv
            WHERE fv.AnnotationElementId = ae.AnnotationElementId
            AND fv.Value <> N''
			FOR XML PATH ('')
        ), 2, 10000) [BusinessValues]

FROM Search.FulltextSearch AS fts
LEFT JOIN Annotate.AnnotationElements ae ON fts.ModelElementId = ae.ModelElementId
WHERE ae.IsCurrentVersion = N'1'
AND ae.ProjectConfigId = @projectConfigId
)
UPDATE fts SET BusinessFields = a.BusinessValues 
FROM Search.FulltextSearch fts
INNER JOIN assignments a ON a.ModelElementId = fts.ModelElementId

ALTER FULLTEXT CATALOG fulltext_default REBUILD

DROP TABLE #searchTypes

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Search].[FulltextSearch]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[#searchTypes]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[#searchTypes].[TypeName]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[#searchTypes].[SearchPriority]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementName]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementNameSplit]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[SearchPriority]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[#searchTypes].[TypeName]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Type]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[adm].[f_SplitCamelCase]" />
				</Entry>
				<Entry>
					<References Name="[Search].[sp_IndexFulltext].[#searchTypes].[SearchPriority]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementDescriptivePaths].[DescriptiveRootPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[RefPath]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[FieldValues].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[AnnotationElementId]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[IsCurrentVersion]" />
				</Entry>
				<Entry>
					<References Name="[Annotate].[AnnotationElements].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[ModelElementId]" />
				</Entry>
				<Entry>
					<References Name="[Search].[FulltextSearch].[BusinessFields]" />
				</Entry>
				<Entry>
					<References Name="[fulltext_default]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Search].[sp_IndexFulltext].[#searchTypes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Search].[sp_IndexFulltext].[#searchTypes].[TypeName]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Search].[sp_IndexFulltext].[#searchTypes].[SearchPriority]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Search].[sp_IndexFulltext].[CTE1].[assignments]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_IndexFulltext].[CTE1].[assignments].[ModelElementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Search].[FulltextSearch].[ModelElementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Search].[sp_IndexFulltext].[CTE1].[assignments].[BusinessValues]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Search].[sp_IndexFulltext].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3429" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Search].[sp_IndexFulltext]&#xD;&#xA;@projectConfigId UNIQUEIDENTIFIER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[Search].[TypeChildTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[TypeChildTypes].[TypeChildTypesId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="70" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[TypeChildTypes].[ParentType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Search].[TypeChildTypes].[ChildType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[Search].[vw_TypeChildTypes]">
			<Property Name="QueryScript">
				<Value><![CDATA[ 
SELECT tct.ParentType, tct.ChildType, td.TypeDescription ChildTypeDescription FROM Search.TypeChildTypes tct
INNER JOIN BIDoc.ModelElementTypeDescriptions td ON td.ElementType = tct.ChildType
WHERE ParentType IS NOT NULL]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[vw_TypeChildTypes].[ParentType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Search].[TypeChildTypes].[ParentType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[vw_TypeChildTypes].[ChildType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Search].[TypeChildTypes].[ChildType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Search].[vw_TypeChildTypes].[ChildTypeDescription]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[Search].[TypeChildTypes]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[ElementType]" />
				</Entry>
				<Entry>
					<References Name="[Search].[TypeChildTypes].[ChildType]" />
				</Entry>
				<Entry>
					<References Name="[Search].[TypeChildTypes].[ParentType]" />
				</Entry>
				<Entry>
					<References Name="[BIDoc].[ModelElementTypeDescriptions].[TypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Search].[TypeChildTypes].[ParentType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Search]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="270" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [Search].[vw_TypeChildTypes]&#xD;&#xA;&#x9;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlSchema" Name="[Stg]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Stg].[ExtractItems]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[ExtractItemId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="69" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[ExtractId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="192" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[ComponentId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[ObjectType]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[ObjectName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[ExtractItems].[Content]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Stg].[ExtractItems].[IX_Stg_Extracts]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ExtractId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Stg].[Extracts]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[Extracts].[ExtractId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="72" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[Extracts].[ProjectConfigId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="193" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[Extracts].[ExtractedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Stg].[Extracts].[ExtractStartTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Stg].[f_GetExtractItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItem].[@ExtractItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItem].[ExtractItemId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItem].[ComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItem].[ObjectType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItem].[ObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItem].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT
	[ExtractItemId],	
	[ComponentId],
	[ObjectType],
	[ObjectName],
	[Content]
FROM Stg.ExtractItems
WHERE ExtractItemId = @ExtractItemId
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="248" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Stg].[f_GetExtractItem]&#xD;&#xA;(&#xD;&#xA;&#x9;@ExtractItemId&#x9;INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItem].[@ExtractItemId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Stg].[f_GetExtractItems]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItems].[@ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItems].[@ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItems].[@ObjectType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItems].[ExtractItemId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItems].[ComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItems].[ObjectType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItems].[ObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItems].[Content]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[Content]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT
	[ExtractItemId],	
	[ComponentId],
	[ObjectType],
	[ObjectName],
	[Content]
FROM Stg.ExtractItems
WHERE ExtractId = @ExtractId AND ComponentId = @ComponentId AND ObjectType = @ObjectType
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="359" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Stg].[f_GetExtractItems]&#xD;&#xA;(&#xD;&#xA;&#x9;@ExtractId&#x9;UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@ComponentId INT,&#xD;&#xA;&#x9;@ObjectType NVARCHAR(200)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItems].[@ExtractId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItems].[@ComponentId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItems].[@ObjectType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Stg].[f_GetExtractItemsNoDef]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItemsNoDef].[@ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItemsNoDef].[@ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[f_GetExtractItemsNoDef].[@ObjectType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItemsNoDef].[ExtractItemId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ExtractItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItemsNoDef].[ComponentId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ComponentId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItemsNoDef].[ObjectType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectType]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItemsNoDef].[ObjectName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Stg].[ExtractItems].[ObjectName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Stg].[f_GetExtractItemsNoDef].[Content]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
SELECT
	[ExtractItemId],	
	[ComponentId],
	[ObjectType],
	[ObjectName],
	NULL [Content]
FROM Stg.ExtractItems
WHERE ExtractId = @ExtractId AND ComponentId = @ComponentId AND ObjectType = @ObjectType
)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="369" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Stg].[f_GetExtractItemsNoDef]&#xD;&#xA;(&#xD;&#xA;&#x9;@ExtractId&#x9;UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@ComponentId INT,&#xD;&#xA;&#x9;@ObjectType NVARCHAR(200)&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItemsNoDef].[@ExtractId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItemsNoDef].[@ComponentId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[f_GetExtractItemsNoDef].[@ObjectType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Stg].[FK_ExtractItems_Extract]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Stg].[Extracts].[ExtractId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Stg].[Extracts]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="192" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Stg].[FK_Extracts_ProjectConfig]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Stg].[Extracts].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Stg].[Extracts]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Adm].[ProjectConfigs].[ProjectConfigId]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Adm].[ProjectConfigs]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="193" />
		</Element>
		<Element Type="SqlProcedure" Name="[Stg].[sp_SaveExtractItem]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	INSERT INTO Stg.ExtractItems(
	[ExtractId],
	[ComponentId],
	[ObjectType],
	[ObjectName],
	[Content]
	)
	VALUES
	(
	@ExtractId,
	@ComponentId,
	@ObjectType,
	@ObjectName,
	@Content
	)
RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Stg].[ExtractItems]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[ExtractItems].[Content]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveExtractItem].[@ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveExtractItem].[@ComponentId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveExtractItem].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveExtractItem].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveExtractItem].[@Content]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveExtractItem].[@ExtractId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveExtractItem].[@ComponentId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveExtractItem].[@ObjectType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveExtractItem].[@ObjectName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveExtractItem].[@Content]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="391" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Stg].[sp_SaveExtractItem]&#xD;&#xA;&#x9;@ExtractId&#x9;UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@ComponentId INT,&#xD;&#xA;&#x9;@ObjectType NVARCHAR(MAX),&#xD;&#xA;&#x9;@ObjectName NVARCHAR(MAX),&#xD;&#xA;&#x9;@Content NVARCHAR(MAX)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Stg].[sp_SaveNewExtract]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	INSERT INTO stg.Extracts
	(
	ExtractId,
	ProjectConfigId,
	ExtractedBy,
	ExtractStartTime
	)
	VALUES
	(
	@extractId,
	@projectConfigId,
	@extractedBy,
	@extractStartTime
	)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Stg].[Extracts]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ExtractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ProjectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ExtractedBy]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[Extracts].[ExtractStartTime]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveNewExtract].[@extractId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveNewExtract].[@projectConfigId]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveNewExtract].[@extractedBy]" />
				</Entry>
				<Entry>
					<References Name="[Stg].[sp_SaveNewExtract].[@extractStartTime]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveNewExtract].[@extractId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveNewExtract].[@projectConfigId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveNewExtract].[@extractedBy]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Stg].[sp_SaveNewExtract].[@extractStartTime]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Stg]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="363" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Stg].[sp_SaveNewExtract]&#xD;&#xA;&#x9;@extractId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@projectConfigId UNIQUEIDENTIFIER,&#xD;&#xA;&#x9;@extractedBy NVARCHAR(MAX),&#xD;&#xA;&#x9;@extractStartTime DATETIME&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlRole" Name="[uploader]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
	</Model>
</DataSchemaModel>